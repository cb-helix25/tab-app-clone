"use strict";(self.webpackChunkteamhub=self.webpackChunkteamhub||[]).push([[903],{22903:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var s=o(65043),r=o(60886),l=o(48330),n=o(20751),i=o(10615),a=o(93989),d=o(72721),c=o(11638),h=o(1870),u=o(39993),p=o(30800),x=o(11622),g=o(36819),f=o(84259),y=o(70579);const _=(0,h.Zq)({fontSize:"14px",fontWeight:600,color:p.M.highlight,marginBottom:"5px"}),E=(0,h.Zq)({fontSize:"18px",color:p.M.light.text,marginBottom:"10px"}),S=(0,h.Zq)({backgroundColor:"#e6ffe6",padding:"10px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}),C=(0,h.Zq)({backgroundColor:"#fff9e6",padding:"10px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}),A=(e,t)=>{const o=new Date(e),s=new Date(t);return o.getFullYear()===s.getFullYear()?`${(0,u.default)(o,"d MMM")} - ${(0,u.default)(s,"d MMM yyyy")}`:`${(0,u.default)(o,"d MMM yyyy")} - ${(0,u.default)(s,"d MMM yyyy")}`},j=e=>{let{bookings:t,onClose:o,team:u}=e;const j=async(e,t,o)=>{const s=`${(0,r.T)()}/${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_UPDATE_ANNUAL_LEAVE_PATH}?code=${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_UPDATE_ANNUAL_LEAVE_CODE}`,l={id:e,newStatus:t,reason:o||""},n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!n.ok)throw new Error(`Update failed with status ${n.status}: ${n.statusText}`)},m=e=>{const t=u.find(t=>t.Initials.toLowerCase()===e.toLowerCase());return(null===t||void 0===t?void 0:t.Nickname)||e},k=e=>{let{entry:t}=e;const o=t.request_id?String(t.request_id):t.id,[r,u]=(0,s.useState)(!1),[x,k]=(0,s.useState)(""),T="rejected"===t.status.toLowerCase(),v=T?C:S;return(0,y.jsxs)(l.B,{tokens:{childrenGap:15},children:[(0,y.jsxs)("div",{className:(0,h.Zq)(v,r&&{backgroundColor:"#f0f0f0",border:"2px solid #009900"}),children:[(0,y.jsx)(n.I,{iconName:T?"Cancel":"CompletedSolid",styles:{root:{fontSize:24,color:T?"#cc0000":"#009900"}}}),(0,y.jsx)(i.E,{style:{fontSize:20,fontWeight:700,color:p.M.light.text},children:T?"Your Annual Leave Request has been Rejected":"Your Annual Leave Request has been Approved"})]}),(0,y.jsxs)(l.B,{horizontal:!0,tokens:{childrenGap:15},verticalAlign:"center",children:[(0,y.jsx)(a.F,{imageUrl:f,text:m(t.person),size:d.WH.size48,styles:{primaryText:{fontWeight:"bold",fontSize:"18px"}}}),(0,y.jsx)(l.B,{tokens:{childrenGap:10},style:{flex:1},children:(0,y.jsx)(l.B,{tokens:{childrenGap:10},styles:{root:{border:`1px solid ${p.M.light.border}`,borderRadius:"4px",padding:"12px",backgroundColor:p.M.light.grey}},children:(0,y.jsx)(l.B,{horizontal:!0,tokens:{childrenGap:40},children:(0,y.jsxs)(l.B,{children:[(0,y.jsx)(i.E,{className:_,children:T?"Rejected Dates:":"Approved Dates:"}),(0,y.jsx)(i.E,{className:E,children:A(t.start_date,t.end_date)})]})})})})]}),(0,y.jsxs)(l.B,{horizontal:!0,tokens:{childrenGap:10},children:[(0,y.jsx)(c.Y,{text:T?"Acknowledge":"Book to Confirm",onClick:async()=>{try{"rejected"===t.status.toLowerCase()?(await j(o,"acknowledged",null),u(!0),k("Acknowledged successfully"),console.log(`Leave ${o} acknowledged after rejection.`)):(await j(o,"booked",null),u(!0),k("Booked successfully"),console.log(`Leave ${o} booked successfully.`))}catch(e){console.error(`Error processing leave ${o}:`,e)}},styles:g.Pk,iconProps:{iconName:T?"Check":"CompletedSolid",styles:{root:{color:T?"#0000FF":"#009900"}}},style:{alignSelf:"flex-start",maxWidth:"auto"}}),!T&&(0,y.jsx)(c.Y,{text:"No Longer Needed",onClick:async()=>{try{await j(o,"discarded",null),u(!0),k("Request discarded successfully"),console.log(`Leave ${o} discarded.`)}catch(e){console.error(`Error discarding leave ${o}:`,e)}},styles:g.Pk,iconProps:{iconName:"Cancel",styles:{root:{color:"#cc0000"}}},style:{alignSelf:"flex-start",maxWidth:"auto"}})]}),x&&(0,y.jsx)(i.E,{style:{marginTop:10,fontWeight:"bold",color:"#009900"},children:x}),T&&t.rejection_notes&&(0,y.jsxs)(l.B,{tokens:{childrenGap:5},styles:{root:{marginTop:10}},children:[(0,y.jsx)(i.E,{style:{fontWeight:600,color:p.M.light.text},children:"Rejection Notes:"}),(0,y.jsx)(i.E,{style:{color:p.M.light.text},children:t.rejection_notes})]})]},o)};return(0,y.jsx)("div",{className:x.dZ,children:(0,y.jsx)(l.B,{tokens:{childrenGap:20},children:0===t.length?(0,y.jsx)(i.E,{style:{fontSize:20,color:p.M.light.text},children:"No approved or rejected leave requests."}):t.map(e=>(0,y.jsx)(k,{entry:e},e.request_id?String(e.request_id):e.id))})})}},84259:(e,t,o)=>{e.exports=o.p+"static/media/helix avatar.8814699fd8c505fb4389.png"}}]);
//# sourceMappingURL=903.a57f9bd7.chunk.js.map