"use strict";(self.webpackChunkteamhub=self.webpackChunkteamhub||[]).push([[448,490],{4490:e=>{e.exports=JSON.parse('[{"MatterID":"c6c6c6c6-c6c6-6c6c-c6c6-c6c6c6c6c6c6","InstructionRef":"HLX-10006-10006","Status":"Active","OpenDate":null,"OpenTime":null,"CloseDate":null,"ClientID":null,"RelatedClientID":null,"DisplayNumber":"MTR-002","ClientName":null,"ClientType":null,"Description":"Corporate restructuring and governance advisory services","PracticeArea":null,"ApproxValue":null,"ResponsibleSolicitor":null,"OriginatingSolicitor":null,"SupervisingPartner":null,"Source":null,"Referrer":null,"method_of_contact":null,"OpponentID":null,"OpponentSolicitorID":null},{"MatterID":"h8h8h8h8-h8h8-8h8h-h8h8-h8h8h8h8h8h8","InstructionRef":"HLX-10008-10008","Status":"Active","OpenDate":null,"OpenTime":null,"CloseDate":null,"ClientID":null,"RelatedClientID":null,"DisplayNumber":"MTR-003","ClientName":null,"ClientType":null,"Description":"International contract breach litigation - high stakes commercial dispute","PracticeArea":null,"ApproxValue":null,"ResponsibleSolicitor":null,"OriginatingSolicitor":null,"SupervisingPartner":null,"Source":null,"Referrer":null,"method_of_contact":null,"OpponentID":null,"OpponentSolicitorID":null},{"MatterID":"m5m5m5m5-m5m5-5m5m-m5m5-m5m5m5m5m5m5","InstructionRef":"HLX-10005-10005","Status":"Active","OpenDate":null,"OpenTime":null,"CloseDate":null,"ClientID":null,"RelatedClientID":null,"DisplayNumber":"MTR-004","ClientName":null,"ClientType":null,"Description":"Boundary dispute resolution between neighbouring properties","PracticeArea":null,"ApproxValue":null,"ResponsibleSolicitor":null,"OriginatingSolicitor":null,"SupervisingPartner":null,"Source":null,"Referrer":null,"method_of_contact":null,"OpponentID":null,"OpponentSolicitorID":null}]')},11528:(e,t,n)=>{n.d(t,{de:()=>i,hs:()=>o,nt:()=>r});var a=n(30800);const o={childrenGap:12},r={childrenGap:8},i={root:{padding:20,borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:a.M.light.sectionBackground}};a.M.orange,a.M.green,a.M.yellow,a.M.greyText},17397:(e,t,n)=>{n.r(t),n.d(t,{default:()=>En,getLiveLocalEnquiries:()=>Yt});var a=n(65043),o=n(97950),r=n(14099);const i=()=>{let e=0,t=5242880;try{for(const t in localStorage)localStorage.hasOwnProperty(t)&&(e+=localStorage[t].length);"storage"in navigator&&"estimate"in navigator.storage&&navigator.storage.estimate().then(e=>{e.quota&&(t=e.quota)})}catch(n){console.warn("Could not calculate storage usage:",n)}return{used:e,total:t,available:t-e,percentUsed:e/t*100}},s=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(n){if(!(n instanceof DOMException&&"QuotaExceededError"===n.name))return console.error(`\u274c Failed to store ${e}:`,n),!1;console.warn("\ud83d\udea8 localStorage quota exceeded, attempting cleanup..."),(()=>{"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DEBUG_VERBOSE&&console.log("\ud83e\uddf9 Starting localStorage cleanup...");const e=[];for(const n in localStorage)if(localStorage.hasOwnProperty(n)){const t=localStorage[n];e.push({key:n,size:t.length,value:t})}e.sort((e,t)=>t.size-e.size),"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DEBUG_VERBOSE&&console.log("\ud83d\udcca Current localStorage items:",e.map(e=>({key:e.key,sizeKB:Math.round(e.size/1024)})));const t=[];for(const n of e)(n.key.includes("cache")||n.key.includes("Data")||n.key.includes("prefetched")||n.size>1e5)&&t.push(n.key);t.forEach(e=>{try{localStorage.removeItem(e),"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DEBUG_VERBOSE&&console.log(`\ud83d\uddd1\ufe0f Removed localStorage item: ${e}`)}catch(n){console.warn(`Failed to remove localStorage item ${e}:`,n)}});const a=i();"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DEBUG_VERBOSE&&console.log(`\u2705 Cleanup complete. Storage usage: ${a.percentUsed.toFixed(1)}%`)})();try{return localStorage.setItem(e,t),"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DEBUG_VERBOSE&&console.log(`\u2705 Successfully stored ${e} after cleanup`),!0}catch(a){return console.error(`\u274c Failed to store ${e} even after cleanup:`,a),!1}}},l=e=>{try{return localStorage.getItem(e)}catch(t){return console.warn(`Failed to get localStorage item ${e}:`,t),null}};var d=n(1870),c=n(48330),u=n(10615),p=n(99773),g=n(85849),x=n(72721),h=n(57433),m=n(11638),f=n(20751),y=n(4961),b=n(30800),v=n(75200),k=n(60184),S=n(70579);const w=e=>{let{metrics:t,isDarkMode:n,headerActions:o,title:r}=e;const[i,s]=a.useState(!1),[l]=a.useState(()=>{try{return"true"!==sessionStorage.getItem("emv2_animated")}catch{return!0}});a.useEffect(()=>{if(l){s(!1);const e=setTimeout(()=>{s(!0);try{sessionStorage.setItem("emv2_animated","true")}catch{}},0);return()=>clearTimeout(e)}s(!0)},[l]);const d=e=>{let{value:t,formatter:n,enabled:o,style:r}=e;const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700;const[n,o]=a.useState(0);return a.useEffect(()=>{if(!Number.isFinite(e))return void o(0);const n=performance.now();let a=0;const r=i=>{const s=Math.min(1,(i-n)/t),l=1-Math.pow(1-s,3);o(e*l),s<1&&(a=requestAnimationFrame(r))};return o(0),a=requestAnimationFrame(r),()=>cancelAnimationFrame(a)},[e,t]),n}(o?t:0),s=o?i:t;return(0,S.jsx)("span",{style:r,children:n(s)})},c=e=>({opacity:i?1:0,transform:i?"translateY(0)":"translateY(6px)",transition:"opacity 300ms ease, transform 300ms ease",transitionDelay:80*e+"ms"}),u=(e,t)=>e>t?"up":e<t?"down":"neutral",p=e=>{switch(e){case"up":return b.M.green;case"down":return b.M.cta;default:return n?b.M.dark.subText:b.M.light.subText}},g=e=>e.title.toLowerCase().includes("enquir")?v.cfS:e.title.toLowerCase().includes("matter")?v.A3x:e.title.toLowerCase().includes("conversion")?v.x_j:e.title.toLowerCase().includes("response")?v.ARf:e.title.toLowerCase().includes("satisfaction")?v.A3x:v.x_j,x=e=>e.isPercentage?e.percentage||0:e.count||0,h=e=>e.isPercentage?e.prevPercentage||0:e.prevCount||0,m=(e,t,n)=>{const a=e-t,o=a>0?"+":"";return n?`${o}${a.toFixed(1)}%`:`${o}${a}`};return(0,S.jsx)("div",{style:{padding:"0 16px",margin:"0",position:"relative",background:"transparent",width:"100%",boxSizing:"border-box"},children:(0,S.jsxs)("div",{style:{background:n?"linear-gradient(135deg, #0B1224 0%, #0F1B33 100%)":`linear-gradient(135deg, ${b.M.light.cardBackground} 0%, rgba(54, 144, 206, 0.05) 100%)`,borderRadius:"12px",border:n?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,boxShadow:n?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",marginBottom:"20px",width:"100%",boxSizing:"border-box"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:n?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,marginBottom:"12px"},children:[(0,S.jsx)("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:n?b.M.dark.text:b.M.light.text,letterSpacing:"-0.025em"},children:r||"Enquiry & Conversion Metrics"}),o&&(0,S.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:o})]}),(0,S.jsxs)("div",{style:{padding:"0 16px 16px 16px"},children:[(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:t.length>3?"16px":"0"},children:t.slice(0,3).map((e,t)=>{const a=g(e),o=x(e),r=h(e),i=u(o,r),s=p(i);return(0,S.jsxs)("div",{style:{background:n?b.M.dark.cardBackground:b.M.light.cardBackground,borderRadius:"8px",padding:"20px",border:n?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,boxShadow:n?"0 2px 4px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"default",...c(t)},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=n?"0 8px 25px rgba(0, 0, 0, 0.4)":"0 8px 25px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=n?"0 2px 4px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,S.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:n?"linear-gradient(135deg, #1E293B 0%, #334155 100%)":`linear-gradient(135deg, ${b.M.highlight} 0%, rgba(54, 144, 206, 0.8) 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:(0,S.jsx)(a,{size:14})}),"neutral"!==i&&(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:s,fontSize:"12px",fontWeight:500},children:[(0,S.jsx)(v.ARf,{size:12,style:{transform:"down"===i?"rotate(180deg)":"none"}}),(0,S.jsx)("span",{children:m(o,r,e.isPercentage||!1)})]})]}),(0,S.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"13px",fontWeight:500,color:n?"#9CA3AF":"#6B7280",lineHeight:"1.2"},children:e.title}),(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:700,color:n?"#F9FAFB":"#111827",letterSpacing:"-0.025em",fontVariantNumeric:"tabular-nums",marginBottom:"8px"},children:(0,S.jsx)(d,{value:x(e),formatter:t=>e.isPercentage?`${t.toFixed(1)}%`:Math.round(t).toLocaleString(),enabled:l})}),e.isPercentage&&(0,S.jsx)("div",{style:{marginTop:"12px"},children:(0,S.jsx)("div",{style:{width:"100%",height:"6px",background:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:"3px",overflow:"hidden"},children:(0,S.jsx)("div",{style:{width:`${Math.min(e.percentage||0,100)}%`,height:"100%",background:(e.percentage||0)>=80?`linear-gradient(90deg, ${b.M.green} 0%, rgba(32, 178, 108, 0.8) 100%)`:`linear-gradient(90deg, ${b.M.highlight} 0%, rgba(54, 144, 206, 0.8) 100%)`,borderRadius:"3px",transition:l?"width 0.3s ease":"none"}})})})]},e.title)})}),t.length>3&&(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:t.slice(3).map((e,t)=>{const a=g(e),o=x(e),r=h(e),i=u(o,r),s=p(i);return(0,S.jsxs)("div",{style:{background:n?b.M.dark.cardBackground:b.M.light.cardBackground,borderRadius:"8px",padding:"20px",border:n?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,boxShadow:n?"0 2px 4px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"default",...c(t+3)},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(a,{size:16,style:{color:n?b.M.dark.iconColor:b.M.light.iconColor}}),(0,S.jsx)("span",{style:{fontSize:"13px",fontWeight:500,color:n?b.M.dark.subText:b.M.light.subText},children:e.title})]}),"neutral"!==i&&(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:s,fontWeight:600},children:["up"===i&&"\u2197","down"===i&&"\u2198",(0,S.jsx)("span",{children:m(o,r,e.isPercentage||!1)})]})]}),(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:700,color:n?b.M.dark.text:b.M.light.text,fontVariantNumeric:"tabular-nums",marginBottom:"8px"},children:(0,S.jsx)(d,{value:x(e),formatter:t=>e.isPercentage?`${t.toFixed(1)}%`:Math.round(t).toLocaleString(),enabled:l})}),e.isPercentage&&(0,S.jsx)("div",{style:{marginTop:"12px"},children:(0,S.jsx)("div",{style:{width:"100%",height:"6px",background:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:"3px",overflow:"hidden"},children:(0,S.jsx)("div",{style:{width:`${Math.min(e.percentage||0,100)}%`,height:"100%",background:(e.percentage||0)>=80?`linear-gradient(90deg, ${b.M.green} 0%, rgba(32, 178, 108, 0.8) 100%)`:`linear-gradient(90deg, ${b.M.highlight} 0%, rgba(54, 144, 206, 0.8) 100%)`,borderRadius:"3px",transition:l?"width 0.3s ease":"none"}})})})]},e.title)})})]})]})})},C=e=>{let{metrics:t,enquiryMetrics:n,isDarkMode:o}=e;const[r,i]=a.useState(!1),[s,l]=a.useState(!1),d=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),c=e=>`${e.toFixed(1)}h`,u=e=>{if(e.showDial&&e.dialTarget){const t=e.isTimeMoney?e.hours||0:e.count||0;return Math.min(t/e.dialTarget*100,100)}return 0},p=(e,t)=>e>t?"up":e<t?"down":"neutral",g=e=>{switch(e){case"up":return"#10B981";case"down":return"#EF4444";default:return o?"#9CA3AF":"#6B7280"}},x=e=>e.title.toLowerCase().includes("outstanding")||e.title.toLowerCase().includes("fees")?k.MxO:e.title.toLowerCase().includes("time")?v.Ohp:(e.title.toLowerCase().includes("enquir")||e.title.toLowerCase().includes("matter")||e.title.toLowerCase().includes("conversion"),v.x_j),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[o,r]=a.useState(0),i=a.useRef(0),s=a.useRef(!1),l=a.useRef(null),d=a.useRef(null);return a.useEffect(()=>{if(!n||s.current)return;const a=Number.isFinite(e)?e:0;d.current=a,s.current=!0;const o=i.current,c=a-o,u=performance.now(),p=e=>{const n=Math.min(1,(e-u)/t),s=1-Math.pow(1-n,3);r(o+c*s),n<1?l.current=requestAnimationFrame(p):(i.current=a,l.current=null)};return r(o),l.current=requestAnimationFrame(p),()=>{l.current&&cancelAnimationFrame(l.current)}},[n,t]),a.useEffect(()=>{if(!n)return;if(!s.current)return;const t=Number.isFinite(e)?e:0;i.current=t,r(t)},[n,e]),a.useEffect(()=>{if(n)return;const a=Number.isFinite(e)?e:0,o=i.current,s=a-o,l=performance.now();let d=null;const c=e=>{const n=Math.min(1,(e-l)/t),u=1-Math.pow(1-n,3);r(o+s*u),n<1?d=requestAnimationFrame(c):(i.current=a,d=null)};return r(o),d=requestAnimationFrame(c),()=>{d&&cancelAnimationFrame(d)}},[e,t,n]),o},m=e=>{let{value:t,formatter:n,enabled:a,className:o,style:r}=e;const i=h(a?t:0,700,a),s=a?i:t;return(0,S.jsx)("span",{className:o,style:r,children:n(s)})},f=e=>e.isMoneyOnly?{value:e.money||0,formatter:e=>d(Math.round(e))}:e.isTimeMoney?{value:e.hours||0,formatter:e=>c(e)}:{value:e.count||0,formatter:e=>Math.round(e).toString()},y=e=>"isTimeMoney"in e||"isMoneyOnly"in e||"money"in e||"hours"in e,C=r?n||[]:t,[j]=a.useState(()=>{try{return"true"!==sessionStorage.getItem("tmv2_animated")}catch{return!0}}),[M]=a.useState(()=>new Map);a.useEffect(()=>{if(j){l(!1);const e=setTimeout(()=>{l(!0);try{sessionStorage.setItem("tmv2_animated","true")}catch{}},0);return()=>clearTimeout(e)}l(!0)},[j]);const _=e=>{if(M.has(e))return M.get(e);const t=j?{opacity:s?1:0,transform:s?"translateY(0)":"translateY(6px)",transition:"opacity 300ms ease, transform 300ms ease",transitionDelay:80*e+"ms"}:{opacity:1,transform:"translateY(0)",transition:"none"};return j&&s&&setTimeout(()=>{M.set(e,{opacity:1,transform:"translateY(0)",transition:"none"})},300+80*e),t},T=e=>y(e)?e.isMoneyOnly?e.money||0:e.isTimeMoney?e.hours||0:e.count||0:e.isPercentage?e.percentage||0:e.count||0,D=e=>y(e)?e.isMoneyOnly?e.prevMoney||0:e.isTimeMoney?e.prevHours||0:e.prevCount||0:e.isPercentage?e.prevPercentage||0:e.prevCount||0;if(r&&n){const e=(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,S.jsx)("span",{style:{fontSize:"13px",color:o?"#E5E7EB":"#111827",fontWeight:r?400:700},children:"Time"}),(0,S.jsx)("button",{onClick:()=>i(!r),style:{width:"50px",height:"26px",borderRadius:"13px",border:"1px solid "+(o?"#374151":"#CBD5E1"),background:r?b.M.highlight:o?"#111827":"#FFFFFF",position:"relative",cursor:"pointer",transition:"all 0.2s ease",boxShadow:o?"inset 0 0 0 1px rgba(255,255,255,0.04)":"inset 0 0 0 1px rgba(0,0,0,0.02)"},"aria-label":"Toggle Time/Enquiries",children:(0,S.jsx)("div",{style:{width:"22px",height:"22px",borderRadius:"50%",background:o?"#E5E7EB":"#FFFFFF",border:"1px solid "+(o?"#4B5563":"#E5E7EB"),position:"absolute",top:"1px",left:r?"24px":"2px",transition:"all 0.2s ease",boxShadow:o?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.07)"}})}),(0,S.jsx)("span",{style:{fontSize:"13px",color:o?"#E5E7EB":"#111827",fontWeight:r?700:400},children:"Conversion"})]});return(0,S.jsx)("div",{style:{padding:"0",margin:"0",position:"relative",background:"transparent"},children:(0,S.jsx)(w,{metrics:n,isDarkMode:o,headerActions:e,title:"Conversion Metrics"})})}return(0,S.jsxs)("div",{style:{padding:"0 16px",margin:"0",position:"relative",background:"transparent"},children:[(0,S.jsxs)("div",{style:{background:o?"linear-gradient(135deg, #0B1224 0%, #0F1B33 100%)":`linear-gradient(135deg, ${b.M.light.cardBackground} 0%, rgba(54, 144, 206, 0.05) 100%)`,borderRadius:"8px",border:o?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,boxShadow:o?"0 2px 8px rgba(0,0,0,0.15), 0 1px 2px rgba(0,0,0,0.08)":"0 2px 8px rgba(0,0,0,0.03), 0 1px 2px rgba(0,0,0,0.01)",marginBottom:"20px",width:"100%",boxSizing:"border-box"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:o?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,marginBottom:"12px"},children:[(0,S.jsx)("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:o?b.M.dark.text:b.M.light.text,letterSpacing:"-0.025em"},children:"Time Metrics"}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,S.jsx)("span",{style:{fontSize:"13px",color:o?"#E5E7EB":"#111827",fontWeight:r?400:700},children:"Time"}),(0,S.jsx)("button",{onClick:()=>i(!r),style:{width:"50px",height:"26px",borderRadius:"13px",border:"1px solid "+(o?"#374151":"#CBD5E1"),background:r?b.M.highlight:o?"#111827":"#FFFFFF",position:"relative",cursor:"pointer",transition:"all 0.2s ease",boxShadow:o?"inset 0 0 0 1px rgba(255,255,255,0.04)":"inset 0 0 0 1px rgba(0,0,0,0.02)"},"aria-label":"Toggle Time/Enquiries",children:(0,S.jsx)("div",{style:{width:"22px",height:"22px",borderRadius:"50%",background:o?"#E5E7EB":"#FFFFFF",border:"1px solid "+(o?"#4B5563":"#E5E7EB"),position:"absolute",top:"1px",left:r?"24px":"2px",transition:"all 0.2s ease",boxShadow:o?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.07)"}})}),(0,S.jsx)("span",{style:{fontSize:"13px",color:o?"#E5E7EB":"#111827",fontWeight:r?700:400},children:"Conversion"})]})]}),(0,S.jsxs)("div",{style:{padding:"0 16px 16px 16px"},children:[(0,S.jsx)("div",{className:"metricsGridThree",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:C.length>3?"16px":"0"},children:C.slice(0,3).map((e,t)=>{const n=x(e),a=T(e),r=D(e),i=y(e)?u(e):0,s=p(a,r),l=g(s);return(0,S.jsxs)("div",{style:{background:o?b.M.dark.cardBackground:b.M.light.cardBackground,borderRadius:"8px",padding:"20px",border:o?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,boxShadow:o?"0 2px 4px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"default",..._(t)},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=o?"0 8px 25px rgba(0, 0, 0, 0.4)":"0 8px 25px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,S.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"#3B82F6"},children:(0,S.jsx)(n,{size:14})}),r>0&&(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:500},children:[(0,S.jsx)("span",{style:{color:o?"#9CA3AF":"#6B7280"},children:"Last:"}),(0,S.jsx)("span",{style:{color:l,fontWeight:600},children:y(e)&&e.isMoneyOnly?d(r):y(e)&&e.isTimeMoney?c(r):r.toFixed(0)}),(0,S.jsx)(v.ARf,{size:12,style:{transform:"down"===s?"rotate(180deg)":"none",color:l}})]})]}),(0,S.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"13px",fontWeight:500,color:o?"#9CA3AF":"#6B7280",lineHeight:"1.2"},children:e.title}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:y(e)&&e.showDial?"16px":"0"},children:[(0,S.jsx)(m,{value:f(e).value,formatter:f(e).formatter,enabled:j,style:{fontSize:"24px",fontWeight:700,color:o?"#F9FAFB":"#111827",letterSpacing:"-0.025em"}}),y(e)&&e.isTimeMoney&&e.money&&(0,S.jsx)(m,{value:e.money||0,formatter:e=>d(Math.round(e)),enabled:j,style:{fontSize:"14px",fontWeight:500,color:o?"#10B981":"#059669"}})]}),y(e)&&e.showDial&&e.dialTarget&&(0,S.jsxs)("div",{style:{position:"relative",marginTop:"12px"},children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,S.jsx)("span",{style:{fontSize:"11px",color:o?"#9CA3AF":"#6B7280",fontWeight:500},children:"Progress"}),(0,S.jsxs)("span",{style:{fontSize:"11px",color:o?"#9CA3AF":"#6B7280",fontWeight:500},children:["Target: ",y(e)?e.dialTarget:0]})]}),(0,S.jsx)("div",{style:{width:"100%",height:"6px",background:o?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:"3px",overflow:"hidden"},children:(0,S.jsx)("div",{style:{width:`${i}%`,height:"100%",background:i>=100?`linear-gradient(90deg, ${b.M.green} 0%, rgba(32, 178, 108, 0.8) 100%)`:`linear-gradient(90deg, ${b.M.highlight} 0%, rgba(54, 144, 206, 0.8) 100%)`,borderRadius:"3px",transition:j?"width 0.3s ease":"none"}})}),(0,S.jsxs)("div",{style:{marginTop:"4px",fontSize:"10px",color:o?"#6B7280":"#9CA3AF",textAlign:"right"},children:[i.toFixed(0),"%"]})]})]},e.title)})}),C.length>3&&(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginTop:"16px"},children:C.slice(3).map((e,t)=>{const n=x(e),a=T(e),r=D(e),i=y(e)?u(e):0,s=p(a,r),l=g(s);return(0,S.jsxs)("div",{style:{background:o?b.M.dark.cardBackground:b.M.light.cardBackground,borderRadius:"8px",padding:"20px",border:o?`1px solid ${b.M.dark.border}`:`1px solid ${b.M.light.border}`,boxShadow:o?"0 2px 4px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"default",..._(t+3)},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(n,{size:16,style:{color:o?b.M.dark.iconColor:b.M.light.iconColor}}),(0,S.jsx)("span",{style:{fontSize:"13px",fontWeight:500,color:o?b.M.dark.subText:b.M.light.subText},children:e.title})]}),r>0&&(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:l,fontWeight:600},children:["up"===s&&"\u2197","down"===s&&"\u2198","neutral"===s&&"\u2192",(0,S.jsxs)("span",{children:["up"===s&&"+",Math.abs((a-r)/r*100).toFixed(0),"%"]})]})]}),(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:700,color:o?b.M.dark.text:b.M.light.text,marginBottom:"8px"},children:(0,S.jsx)(m,{value:f(e).value,formatter:f(e).formatter,enabled:j})}),y(e)&&e.isMoneyOnly&&r>0&&(0,S.jsxs)("div",{style:{fontSize:"11px",fontWeight:500,color:o?"#9CA3AF":"#6B7280",marginBottom:"8px"},children:["Last month: ",d(r)]}),y(e)&&e.isTimeMoney&&e.money&&(0,S.jsx)("div",{style:{fontSize:"12px",color:o?b.M.dark.subText:b.M.light.subText,marginBottom:"12px"},children:(0,S.jsx)(m,{value:e.money||0,formatter:e=>`\xa3${Math.round(e).toLocaleString()}`,enabled:j})}),y(e)&&e.showDial&&(0,S.jsxs)("div",{style:{marginTop:"12px"},children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[(0,S.jsx)("span",{style:{fontSize:"11px",color:o?"#9CA3AF":"#6B7280",fontWeight:500},children:"Progress"}),(0,S.jsxs)("span",{style:{fontSize:"11px",color:o?"#9CA3AF":"#6B7280",fontWeight:500},children:["Target: ",y(e)?e.dialTarget:0]})]}),(0,S.jsx)("div",{style:{width:"100%",height:"6px",background:o?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:"3px",overflow:"hidden"},children:(0,S.jsx)("div",{style:{width:`${i}%`,height:"100%",background:i>=100?`linear-gradient(90deg, ${b.M.green} 0%, rgba(32, 178, 108, 0.8) 100%)`:`linear-gradient(90deg, ${b.M.highlight} 0%, rgba(54, 144, 206, 0.8) 100%)`,borderRadius:"3px",transition:j?"width 0.3s ease":"none"}})}),(0,S.jsxs)("div",{style:{marginTop:"4px",fontSize:"10px",color:o?"#6B7280":"#9CA3AF",textAlign:"right"},children:[i.toFixed(0),"%"]})]})]},e.title)})})]})," "]})," "]})};function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoStart:t=!0,metrics:n,bypassCache:o=!1,onMetric:r,onError:i,onComplete:s}=e,l=(0,a.useRef)(null),[d,c]=(0,a.useState)(!1),u=(0,a.useRef)(),p=(0,a.useRef)(),g=(0,a.useRef)(),x=(0,a.useRef)(0);(0,a.useEffect)(()=>{u.current=r},[r]),(0,a.useEffect)(()=>{p.current=i},[i]),(0,a.useEffect)(()=>{g.current=s},[s]);const h=(0,a.useCallback)(()=>{var e;if(l.current)return;const t=null===(e=n&&n.length?n:void 0)||void 0===e?void 0:e.join(","),a=new URLSearchParams;t&&a.set("metrics",t),o&&a.set("bypassCache","true");const r=`/api/home-metrics/stream?${a.toString()}`,i=new EventSource(r);l.current=i,c(!0),i.onmessage=e=>{try{const o=JSON.parse(e.data);var t;if("metric-complete"===o.type&&o.metric)null===(t=u.current)||void 0===t||t.call(u,o.metric,o.data,!!o.cached);else if("metric-error"===o.type){var n;null===(n=p.current)||void 0===n||n.call(p,o.metric,o.error||"unknown error")}else if("complete"===o.type){var a;null===(a=g.current)||void 0===a||a.call(g),m()}}catch(o){}},i.onerror=()=>{const e=Date.now();var t;e-x.current>5e3&&(x.current=e,null===(t=p.current)||void 0===t||t.call(p,"stream","EventSource error"))}},[o,Array.isArray(n)?n.join(","):""]),m=(0,a.useCallback)(()=>{const e=l.current;if(e){try{e.close()}catch{}l.current=null}c(!1)},[]);return(0,a.useEffect)(()=>(t&&h(),()=>{m()}),[t,h,m]),{start:h,stop:m,isStreaming:d}}n.p,n.p,n.p;var M=n(29760),_=n(85612),T=n(11528),D=n(14117),E=n(60886),A=n(59769),I=n(63485),F=n(9442),B=n(73491),N=n(93589),R=n(42463),L=n(2527),O=n(11622),W=n(36819),P=n(79489);const $=e=>(0,d.Zq)({padding:"20px",color:e?b.M.dark.text:b.M.light.text,fontFamily:"Raleway, sans-serif",display:"flex",flexDirection:"column",gap:"10px"}),z=(e,t)=>(0,d.Zq)({padding:"10px 20px",backgroundColor:t?e?b.M.dark.buttonBackground:b.M.light.buttonBackground:e?b.M.dark.cardBackground:b.M.light.cardBackground,border:`1px solid ${e?b.M.dark.border:b.M.light.border}`,borderRadius:"8px",color:t?e?b.M.dark.buttonText:b.M.light.buttonText:e?b.M.dark.text:b.M.light.text,transition:"background-color 0.3s ease, color 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",width:"100%",height:"50px",":hover":{backgroundColor:t?e?b.M.dark.hoverBackground:b.M.light.hoverBackground:e?b.M.dark.cardHover:b.M.light.cardHover}}),q=(0,d.Zq)({marginTop:"10px",padding:"20px",backgroundColor:b.M.grey,borderRadius:"12px"}),H=e=>{let{resource:t,onClose:n}=e;const{isDarkMode:o}=(0,M.DP)(),[r,i]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[p,g]=(0,a.useState)({}),x={}[t.title.toLowerCase().replace(/\s+/g,"")]||[],h=(0,a.useCallback)(()=>{navigator.clipboard.writeText(t.url).then(()=>{i(`Copied '${t.title}' URL to clipboard!`),setTimeout(()=>i(null),3e3)}).catch(e=>{console.error("Failed to copy: ",e)})},[t.url,t.title]),y=(0,a.useCallback)(()=>{window.open(t.url,"_blank","noopener,noreferrer")},[t.url]);return(0,S.jsxs)(P.A,{isOpen:!0,onClose:n,title:t.title,width:"2000px",children:[(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,S.jsx)("div",{style:{flexGrow:1,overflowY:"auto",padding:"20px"},children:x.length>0?(0,S.jsx)(c.B,{tokens:{childrenGap:20},className:(0,d.Zq)({width:"100%"}),children:x.map(e=>(0,S.jsxs)("div",{className:"action-item",children:[(0,S.jsx)(I.j,{text:e.label,onClick:()=>l(s===e?null:e),styles:{root:z(o,s===e),label:{color:o?s===e?b.M.dark.buttonText:b.M.dark.text:s===e?b.M.light.buttonText:b.M.light.text,fontWeight:"600"}},ariaLabel:`Select action: ${e.label}`}),(0,S.jsx)(L.A,{in:s===e,timeout:300,classNames:"intake-form",unmountOnExit:!0,children:(0,S.jsx)("div",{className:q,children:(0,S.jsx)(O.Ay,{fields:e.requiredFields.map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),name:e,type:"text",placeholder:`Enter ${e}`,required:!0})),onSubmit:t=>{console.log(`Action Submitted: ${e.label}`,t),(e=>{const t=p;console.log(`Executing action: ${e.label}`,t),alert(`Executing action: ${e.label}\nInputs: ${JSON.stringify(t)}`),l(null),g({})})(e)},onCancel:()=>{l(null),g({})},matters:[]})})})]},e.label))}):(0,S.jsx)(u.E,{children:"No actions available for this resource."})}),(0,S.jsxs)("div",{className:$(o),children:[(0,S.jsxs)(c.B,{tokens:{childrenGap:6},children:[(0,S.jsx)(u.E,{variant:"mediumPlus",styles:{root:{fontWeight:"600"}},children:"URL:"}),(0,S.jsx)(F.N,{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url})]}),t.tags&&t.tags.length>0&&(0,S.jsxs)(c.B,{tokens:{childrenGap:6},styles:{root:{marginTop:"20px"}},children:[(0,S.jsx)(u.E,{variant:"mediumPlus",styles:{root:{fontWeight:"600"}},children:"Tags:"}),(0,S.jsx)(c.B,{horizontal:!0,tokens:{childrenGap:10},wrap:!0,children:t.tags.map(e=>(0,S.jsx)(B.S,{content:e,children:(0,S.jsxs)("span",{className:(0,d.Zq)({backgroundColor:o?b.M.dark.sectionBackground:b.M.light.sectionBackground,color:o?b.M.dark.text:b.M.light.text,borderRadius:"12px",padding:"6px 12px",display:"flex",alignItems:"center",gap:"6px"}),children:[(0,S.jsx)(f.I,{iconName:"Tag"}),(0,S.jsx)(u.E,{variant:"small",children:e})]})},e))})]}),t.description&&(0,S.jsxs)(c.B,{tokens:{childrenGap:6},styles:{root:{marginTop:"20px"}},children:[(0,S.jsx)(u.E,{variant:"mediumPlus",styles:{root:{fontWeight:"600"}},children:"Description:"}),(0,S.jsx)(u.E,{children:t.description})]}),(0,S.jsxs)("div",{className:(0,d.Zq)({display:"flex",justifyContent:"space-between",alignItems:"center"}),children:[(0,S.jsxs)("div",{className:(0,d.Zq)({display:"flex",gap:"20px"}),children:[(0,S.jsx)(I.j,{text:"Copy",onClick:h,styles:W.M5,ariaLabel:"Copy URL to clipboard",iconProps:{iconName:"Copy"}}),(0,S.jsx)(I.j,{text:"Go To",onClick:y,styles:W.M5,ariaLabel:"Go to URL",iconProps:{iconName:"NavigateExternalInline"}})]}),(0,S.jsx)(m.Y,{text:"Close",onClick:n,styles:W.Pk,ariaLabel:"Close Details",iconProps:{iconName:"Cancel"}})]})]})]}),r&&(0,S.jsx)(N.n,{messageBarType:R.H.success,isMultiline:!1,onDismiss:()=>i(null),dismissButtonAriaLabel:"Close",styles:{root:{position:"fixed",bottom:20,right:20,maxWidth:"300px",zIndex:1e3,borderRadius:"8px",backgroundColor:b.M.green,color:"white"}},children:r})]})};var U=n(40135),Z=n(78769),Y=n(96555),G=n(93989);const K=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;if(!e)return"No commit message";let n=e.replace(/^(feat|fix|docs|style|refactor|test|chore)(\([^)]*\))?:\s*/i,"").trim();return n=n.charAt(0).toUpperCase()+n.slice(1),n.length>t&&(n=n.substring(0,t-3)+"..."),n},V=e=>{const t=Date.now()-e,n=Math.floor(t/6e4),a=Math.floor(t/36e5),o=Math.floor(t/864e5),r=Math.floor(o/7),i=Math.floor(o/30);return n<1?"Just now":n<60?`${n}m ago`:a<24?`${a}h ago`:o<7?`${o}d ago`:r<4?`${r}w ago`:i<12?`${i}mo ago`:new Date(e).toLocaleDateString()},J=e=>{let{maxItems:t=10,showHeader:n=!0,compact:o=!1}=e;const{isDarkMode:r}=(0,M.DP)(),[i,s]=(0,a.useState)([]),[l,p]=(0,a.useState)(!0),[g,h]=(0,a.useState)(null),[m,y]=(0,a.useState)("");(0,a.useEffect)(()=>{v()},[t]);const v=async()=>{try{p(!0),h(null);const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{const t=await fetch(`/api/git/history?limit=${e}`);if(!t.ok)throw new Error(`Failed to fetch git history: ${t.status} ${t.statusText}`);const n=await t.json(),a=n.commits.map(e=>({...e,timestamp:new Date(e.date).getTime(),filesChanged:Number(e.filesChanged)||0,insertions:Number(e.insertions)||0,deletions:Number(e.deletions)||0}));return{...n,commits:a,lastUpdated:(new Date).toISOString()}}catch(g){throw console.error("[FRONTEND-ERROR] Error fetching git history:",g),g}}(t);s(e.commits),y(e.lastUpdated)}catch(e){console.error("Failed to load git history:",e),h(e instanceof Error?e.message:"Failed to load recent work")}finally{p(!1)}},k=(0,d.Zq)({backgroundColor:r?b.M.dark.cardBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`,borderRadius:"8px",padding:o?"12px":"16px",marginBottom:"16px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.15)",transform:"translateY(-1px)",transition:"all 0.2s ease-in-out"}}),w=(0,d.Zq)({marginBottom:"16px"}),C=(0,d.Zq)({padding:o?"8px 0":"12px 0",borderBottom:`1px solid ${r?b.M.dark.border:b.M.light.border}`,"&:last-child":{borderBottom:"none"},"&:hover":{backgroundColor:r?b.M.dark.cardHover:b.M.light.cardHover,margin:o?"0 -8px":"0 -12px",padding:o?"8px 8px":"12px 12px",borderRadius:"4px",transition:"all 0.15s ease-in-out"}}),j=(0,d.Zq)({fontFamily:'Monaco, Consolas, "Lucida Console", monospace',fontSize:"11px",color:b.M.greyText,backgroundColor:r?b.M.dark.cardHover:b.M.light.cardHover,padding:"2px 6px",borderRadius:"3px",border:`1px solid ${r?b.M.dark.border:b.M.light.border}`,marginRight:"8px"}),_=(0,d.Zq)({fontSize:"11px",color:b.M.greyText,display:"flex",alignItems:"center",gap:"8px"}),T=(0,d.Zq)({cursor:"pointer",color:b.M.blue,"&:hover":{color:b.M.highlight}});return(0,S.jsxs)("div",{className:k,children:[n&&(0,S.jsxs)("div",{className:w,children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:[(0,S.jsx)(f.I,{iconName:"RecentActivities",styles:{root:{fontSize:"16px",color:b.M.blue}}}),(0,S.jsx)(u.E,{variant:"mediumPlus",styles:{root:{fontWeight:600,color:r?b.M.dark.text:b.M.light.text,flex:1}},children:"Recent Work Completed"}),!l&&(0,S.jsx)(B.S,{content:"Refresh",children:(0,S.jsx)(f.I,{iconName:"Refresh",className:T,onClick:v,styles:{root:{fontSize:"14px"}}})})]}),m&&!l&&(0,S.jsxs)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText,marginTop:"4px"}},children:["Last updated: ",new Date(m).toLocaleTimeString()]})]}),g&&(0,S.jsx)(N.n,{messageBarType:R.H.error,onDismiss:()=>h(null),actions:(0,S.jsx)("button",{onClick:v,style:{background:"none",border:"none",color:"inherit",cursor:"pointer"},children:"Retry"}),children:g}),l&&(0,S.jsx)(c.B,{tokens:{childrenGap:12},children:Array.from({length:5}).map((e,t)=>(0,S.jsxs)(c.B,{tokens:{childrenGap:8},children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:12},verticalAlign:"center",children:[(0,S.jsx)(U.W,{shimmerElements:[{type:Z.w.circle,height:32}],width:"32px"}),(0,S.jsxs)(c.B,{tokens:{childrenGap:4},styles:{root:{flex:1}},children:[(0,S.jsx)(U.W,{shimmerElements:[{type:Z.w.line,height:14}],width:"70%"}),(0,S.jsx)(U.W,{shimmerElements:[{type:Z.w.line,height:12}],width:"40%"})]})]}),t<4&&(0,S.jsx)(Y.w,{})]},t))}),!l&&!g&&(0,S.jsx)(c.B,{tokens:{childrenGap:0},children:0===i.length?(0,S.jsxs)(c.B,{horizontalAlign:"center",tokens:{childrenGap:12},styles:{root:{padding:"24px"}},children:[(0,S.jsx)(f.I,{iconName:"GitGraph",styles:{root:{fontSize:"32px",color:b.M.greyText}}}),(0,S.jsx)(u.E,{variant:"medium",styles:{root:{color:b.M.greyText,textAlign:"center"}},children:"No recent commits found"})]}):i.map((e,t)=>{const n=((e,t)=>{if(0===e+t)return"#666666";const n=e/(e+t);return n>.7?"#28a745":n<.3?"#dc3545":"#ffc107"})(e.insertions,e.deletions),a=e.insertions+e.deletions;return(0,S.jsx)("div",{className:C,children:(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:12},verticalAlign:"start",children:[(0,S.jsx)(G.F,{size:x.WH.size32,text:e.author,initialsTextColor:"white",hidePersonaDetails:!0}),(0,S.jsxs)(c.B,{tokens:{childrenGap:4},styles:{root:{flex:1}},children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:[(0,S.jsx)(u.E,{variant:"small",styles:{root:{fontWeight:500,color:r?b.M.dark.text:b.M.light.text,lineHeight:"1.4",flex:1}},children:K(e.message)}),(0,S.jsx)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText,whiteSpace:"nowrap"}},children:V(e.timestamp)})]}),(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:[(0,S.jsx)("span",{className:j,children:e.hash.substring(0,7)}),!o&&(0,S.jsx)("div",{className:_,children:(0,S.jsx)(B.S,{content:`${e.insertions} additions, ${e.deletions} deletions`,children:(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:4},verticalAlign:"center",children:[(0,S.jsx)(f.I,{iconName:"FileCode",styles:{root:{fontSize:"10px"}}}),(0,S.jsx)(u.E,{variant:"tiny",children:e.filesChanged}),a>0&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:n,marginLeft:"4px"}}),(0,S.jsxs)(u.E,{variant:"tiny",children:["+",e.insertions,"/-",e.deletions]})]})]})})})]}),(0,S.jsxs)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText}},children:["by ",e.author.replace(/<[^>]*>/g,"").trim()]})]})]})},e.hash)})})]})};var Q=n(13706),X=n(22953),ee=n(17557),te=n(94028),ne=n(27533);const ae=JSON.parse('{"issues":[{"id":"ISSUE-001","title":"Client portal login timeout","description":"Users experiencing session timeouts after 15 minutes instead of expected 30 minutes","status":"new","priority":"high","reporter":"JW","createdAt":"2025-10-14T09:30:00Z","tags":["client-portal","authentication"]},{"id":"ISSUE-002","title":"Document template merge failing","description":"Word document templates not merging client data correctly for property transactions","status":"in-progress","priority":"medium","reporter":"LZ","createdAt":"2025-10-13T14:20:00Z","tags":["documents","templates","property"]},{"id":"ISSUE-003","title":"Teams app crashing on mobile","description":"Hub app crashes when opening matter details on iOS Teams mobile app","status":"blocked","priority":"high","reporter":"AC","createdAt":"2025-10-12T16:45:00Z","tags":["teams","mobile","ios"]},{"id":"ISSUE-004","title":"Slow database queries on matters search","description":"Search functionality taking 5+ seconds for matters with large document sets","status":"new","priority":"medium","reporter":"SP","createdAt":"2025-10-14T11:00:00Z","tags":["database","performance","search"]},{"id":"ISSUE-005","title":"Email notification duplicates","description":"Clients receiving duplicate notification emails for matter updates","status":"resolved","priority":"low","reporter":"JW","createdAt":"2025-10-11T10:15:00Z","tags":["email","notifications"]},{"id":"ISSUE-006","title":"Calendar sync missing appointments","description":"Some client appointments not syncing to Outlook calendars","status":"in-progress","priority":"high","reporter":"SP","createdAt":"2025-10-13T09:45:00Z","tags":["calendar","outlook","sync"]},{"id":"ISSUE-007","title":"Time tracking rounding issues","description":"Recorded time entries showing incorrect rounded values in reports","status":"new","priority":"medium","reporter":"AC","createdAt":"2025-10-14T13:20:00Z","tags":["time-tracking","reports","billing"]},{"id":"ISSUE-008","title":"File upload progress indicator","description":"Large document uploads showing no progress feedback to users","status":"resolved","priority":"low","reporter":"LZ","createdAt":"2025-10-10T14:30:00Z","tags":["ui","upload","progress"]},{"id":"ISSUE-009","title":"Manually added issue","description":"This is to test that issue can easily be added manually","status":"new","priority":"medium","reporter":"CB","createdAt":"2025-10-14T13:20:00Z","tags":["time-tracking","reports","billing"]}],"metadata":{"lastUpdated":"2025-10-14T14:00:00Z","totalIssues":8,"statusCounts":{"new":3,"in-progress":2,"blocked":1,"resolved":2},"priorityCounts":{"high":3,"medium":3,"low":2}}}'),oe=e=>{switch(e){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}},re=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),a=Math.floor(n/6e4),o=Math.floor(n/36e5),r=Math.floor(n/864e5);return a<1?"Just now":a<60?`${a}m ago`:o<24?`${o}h ago`:r<7?`${r}d ago`:t.toLocaleDateString()},ie=e=>{let{showHeader:t=!0,compact:n=!1,maxItemsPerColumn:o=4}=e;const{isDarkMode:r}=(0,M.DP)(),[i,s]=(0,a.useState)(null),[l,p]=(0,a.useState)(!0),[g,x]=(0,a.useState)(null),[h,y]=(0,a.useState)(""),[v,k]=(0,a.useState)(new Set),[w,C]=(0,a.useState)(!1),[j,_]=(0,a.useState)({title:"",description:"",priority:"medium",reporter:"",tags:""});(0,a.useEffect)(()=>{T()},[]);const T=async()=>{try{p(!0),x(null);const e=await(async()=>{try{return ae}catch(g){throw console.error("Error loading local issues data:",g),g}try{const e=await fetch("/api/team-issues");if(!e.ok)throw new Error(`Failed to fetch team issues: ${e.status}`);return await e.json()}catch(g){throw console.error("[FRONTEND-ERROR] Error fetching team issues from API:",g),g}})();s(e),y(e.metadata.lastUpdated)}catch(e){console.error("Failed to load team issues:",e),x(e instanceof Error?e.message:"Failed to load team issues")}finally{p(!1)}},D=e=>{k(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},E=()=>{_({title:"",description:"",priority:"medium",reporter:"",tags:""}),C(!1),x(null)},A=a.useMemo(()=>i?i.issues.reduce((e,t)=>(e[t.status]||(e[t.status]=[]),e[t.status].push(t),e),{new:[],"in-progress":[],blocked:[],resolved:[]}):{new:[],"in-progress":[],blocked:[],resolved:[]},[i]),F=(0,d.Zq)({backgroundColor:r?b.M.dark.cardBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`,borderRadius:"8px",padding:n?"12px":"16px",marginBottom:"16px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),L=(0,d.Zq)({marginBottom:"16px"}),O=(0,d.Zq)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"16px","@media (max-width: 768px)":{gridTemplateColumns:"1fr",gap:"12px"}}),W=(0,d.Zq)({backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardHover,borderRadius:"6px",padding:"12px",minHeight:"200px"}),P=(0,d.Zq)({display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px",paddingBottom:"8px",borderBottom:`1px solid ${r?b.M.dark.border:b.M.light.border}`}),$=(0,d.Zq)({backgroundColor:r?b.M.dark.cardBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`,borderRadius:"4px",padding:"8px",marginBottom:"8px",cursor:"pointer","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.15)",transform:"translateY(-1px)",transition:"all 0.2s ease-in-out"}}),z=(0,d.Zq)({backgroundColor:r?b.M.dark.border:b.M.light.border,color:r?b.M.dark.text:b.M.light.text,fontSize:"10px",padding:"2px 6px",borderRadius:"10px",marginRight:"4px",marginBottom:"2px"}),q=(0,d.Zq)({cursor:"pointer",color:b.M.blue,"&:hover":{color:b.M.highlight}}),H=[{key:"new",title:"New",icon:"StatusCircleInner",color:"#007bff"},{key:"in-progress",title:"In Progress",icon:"Processing",color:"#17a2b8"},{key:"blocked",title:"Blocked",icon:"Blocked",color:"#dc3545"},{key:"resolved",title:"Resolved",icon:"Completed",color:"#28a745"}],Y=e=>{return(0,S.jsx)(B.S,{content:(0,S.jsxs)(c.B,{tokens:{childrenGap:4},children:[(0,S.jsx)(u.E,{variant:"small",styles:{root:{fontWeight:600}},children:e.title}),(0,S.jsx)(u.E,{variant:"tiny",children:e.description}),(0,S.jsxs)(u.E,{variant:"tiny",children:["Reporter: ",e.reporter]}),(0,S.jsxs)(u.E,{variant:"tiny",children:["Created: ",re(e.createdAt)]}),e.tags.length>0&&(0,S.jsxs)(u.E,{variant:"tiny",children:["Tags: ",e.tags.join(", ")]})]}),children:(0,S.jsx)("div",{className:$,children:(0,S.jsxs)(c.B,{tokens:{childrenGap:4},children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:4},verticalAlign:"center",children:[(0,S.jsx)("div",{className:(t=e.priority,(0,d.Zq)({width:"8px",height:"8px",borderRadius:"50%",backgroundColor:oe(t),marginRight:"6px"}))}),(0,S.jsx)(u.E,{variant:"small",styles:{root:{fontWeight:500,flex:1,color:r?b.M.dark.text:b.M.light.text,lineHeight:"1.3"}},children:e.title})]}),(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:[(0,S.jsx)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText,fontFamily:"Monaco, Consolas, monospace"}},children:e.id}),(0,S.jsxs)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText}},children:["by ",e.reporter]})]}),e.tags.length>0&&(0,S.jsxs)(c.B,{horizontal:!0,wrap:!0,tokens:{childrenGap:2},children:[e.tags.slice(0,2).map(e=>(0,S.jsx)("span",{className:z,children:e},e)),e.tags.length>2&&(0,S.jsxs)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText}},children:["+",e.tags.length-2," more"]})]}),(0,S.jsx)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText,alignSelf:"flex-end"}},children:re(e.createdAt)})]})})},e.id);var t};return(0,S.jsxs)("div",{className:F,children:[t&&(0,S.jsxs)("div",{className:L,children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:[(0,S.jsx)(f.I,{iconName:"IssueTracking",styles:{root:{fontSize:"16px",color:b.M.blue}}}),(0,S.jsx)(u.E,{variant:"mediumPlus",styles:{root:{fontWeight:600,color:r?b.M.dark.text:b.M.light.text,flex:1}},children:"Team Issues Board"}),i&&(0,S.jsxs)(u.E,{variant:"small",styles:{root:{color:b.M.greyText}},children:[i.metadata.totalIssues," total"]}),!l&&(0,S.jsx)(B.S,{content:"Refresh",children:(0,S.jsx)(Q.K,{iconProps:{iconName:"Refresh"},className:q,onClick:T,styles:{root:{fontSize:"14px"}}})})]}),h&&!l&&(0,S.jsxs)(u.E,{variant:"tiny",styles:{root:{color:b.M.greyText,marginTop:"4px"}},children:["Updated: ",re(h)]})]}),g&&(0,S.jsx)(N.n,{messageBarType:R.H.error,onDismiss:()=>x(null),actions:(0,S.jsx)(m.Y,{onClick:T,text:"Retry"}),children:g}),l&&(0,S.jsx)("div",{className:O,children:H.map(e=>(0,S.jsx)("div",{className:W,children:(0,S.jsxs)(c.B,{tokens:{childrenGap:8},children:[(0,S.jsx)(U.W,{shimmerElements:[{type:Z.w.line,height:20}],width:"60%"}),Array.from({length:3}).map((e,t)=>(0,S.jsxs)("div",{style:{backgroundColor:r?b.M.dark.cardBackground:b.M.light.cardBackground,borderRadius:"4px",padding:"8px"},children:[(0,S.jsx)(U.W,{shimmerElements:[{type:Z.w.line,height:14}],width:"80%"}),(0,S.jsx)(U.W,{shimmerElements:[{type:Z.w.line,height:12}],width:"60%"})]},t))]})},e.key))}),!l&&!g&&i&&(0,S.jsx)("div",{className:O,children:H.map(e=>{const t=A[e.key]||[],n=v.has(e.key),a=n?t:t.slice(0,o),i=!n&&t.length>o;return(0,S.jsxs)("div",{className:W,children:[(0,S.jsxs)("div",{className:P,children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:6},verticalAlign:"center",children:[(0,S.jsx)(f.I,{iconName:e.icon,styles:{root:{fontSize:"14px",color:e.color}}}),(0,S.jsx)(u.E,{variant:"medium",styles:{root:{fontWeight:600,color:r?b.M.dark.text:b.M.light.text}},children:e.title}),"new"===e.key&&(0,S.jsx)(B.S,{content:"Add new issue",children:(0,S.jsx)(Q.K,{iconProps:{iconName:"Add"},onClick:()=>C(!0),styles:{root:{color:b.M.blue,fontSize:"12px",width:"20px",height:"20px","&:hover":{color:b.M.highlight,backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardHover}}}})})]}),(0,S.jsx)(u.E,{variant:"small",styles:{root:{backgroundColor:e.color,color:"white",padding:"2px 6px",borderRadius:"10px",fontSize:"11px",fontWeight:600}},children:t.length})]}),(0,S.jsxs)(c.B,{tokens:{childrenGap:0},children:[a.map(Y),i&&(0,S.jsxs)(u.E,{variant:"tiny",styles:{root:{color:b.M.blue,textAlign:"center",padding:"8px",fontStyle:"italic",cursor:"pointer","&:hover":{color:b.M.highlight,textDecoration:"underline"}}},onClick:()=>D(e.key),children:["+",t.length-o," more"]}),n&&t.length>o&&(0,S.jsx)(u.E,{variant:"tiny",styles:{root:{color:b.M.blue,textAlign:"center",padding:"8px",fontStyle:"italic",cursor:"pointer","&:hover":{color:b.M.highlight,textDecoration:"underline"}}},onClick:()=>D(e.key),children:"Show less"}),0===t.length&&(0,S.jsxs)(c.B,{horizontalAlign:"center",tokens:{childrenGap:8},styles:{root:{padding:"16px"}},children:[(0,S.jsx)(f.I,{iconName:"CheckMark",styles:{root:{fontSize:"24px",color:b.M.greyText,opacity:.5}}}),(0,S.jsx)(u.E,{variant:"small",styles:{root:{color:b.M.greyText,textAlign:"center",fontStyle:"italic"}},children:"No issues"})]})]})]},e.key)})}),(0,S.jsx)(X.Z,{isOpen:w,onDismiss:E,type:ee.H.medium,headerText:"Create New Issue",closeButtonAriaLabel:"Close",styles:{content:{backgroundColor:r?b.M.dark.cardBackground:b.M.light.cardBackground},header:{backgroundColor:r?b.M.dark.cardBackground:b.M.light.cardBackground}},children:(0,S.jsxs)(c.B,{tokens:{childrenGap:16},styles:{root:{padding:"16px 0"}},children:[(0,S.jsx)(te.A,{label:"Title",required:!0,placeholder:"Enter issue title",value:j.title,onChange:(e,t)=>_(e=>({...e,title:t||""})),styles:{fieldGroup:{backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`}}}),(0,S.jsx)(te.A,{label:"Description",required:!0,multiline:!0,rows:4,placeholder:"Describe the issue in detail",value:j.description,onChange:(e,t)=>_(e=>({...e,description:t||""})),styles:{fieldGroup:{backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`}}}),(0,S.jsx)(ne.m,{label:"Priority",required:!0,options:[{key:"low",text:"Low Priority"},{key:"medium",text:"Medium Priority"},{key:"high",text:"High Priority"}],selectedKey:j.priority,onChange:(e,t)=>_(e=>({...e,priority:(null===t||void 0===t?void 0:t.key)||"medium"})),styles:{dropdown:{backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`}}}),(0,S.jsx)(te.A,{label:"Reporter",required:!0,placeholder:"Enter reporter initials (e.g., JD)",value:j.reporter,onChange:(e,t)=>_(e=>({...e,reporter:t||""})),styles:{fieldGroup:{backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`}}}),(0,S.jsx)(te.A,{label:"Tags",placeholder:"Enter tags separated by commas (e.g., bug, ui, urgent)",value:j.tags,onChange:(e,t)=>_(e=>({...e,tags:t||""})),styles:{fieldGroup:{backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardBackground,border:`1px solid ${r?b.M.dark.border:b.M.light.border}`}}}),(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:12},horizontalAlign:"end",styles:{root:{marginTop:"24px"}},children:[(0,S.jsx)(m.Y,{text:"Cancel",onClick:E,styles:{root:{border:`1px solid ${r?b.M.dark.border:b.M.light.border}`,backgroundColor:r?b.M.dark.hoverBackground:b.M.light.cardBackground,color:r?b.M.dark.text:b.M.light.text}}}),(0,S.jsx)(I.j,{text:"Create Issue",onClick:()=>{if(!j.title.trim()||!j.description.trim()||!j.reporter.trim())return void x("Please fill in all required fields (Title, Description, Reporter)");const e={id:`ISSUE-${String(Date.now()).slice(-3).padStart(3,"0")}`,title:j.title.trim(),description:j.description.trim(),status:"new",priority:j.priority,reporter:j.reporter.trim(),createdAt:(new Date).toISOString(),tags:j.tags.split(",").map(e=>e.trim()).filter(e=>e.length>0)};if(i){const t=[...i.issues,e],n={...i,issues:t,metadata:{...i.metadata,totalIssues:t.length,lastUpdated:(new Date).toISOString(),statusCounts:{...i.metadata.statusCounts,new:i.metadata.statusCounts.new+1},priorityCounts:{...i.metadata.priorityCounts,[j.priority]:i.metadata.priorityCounts[j.priority]+1}}};s(n),y(n.metadata.lastUpdated)}_({title:"",description:"",priority:"medium",reporter:"",tags:""}),C(!1),x(null)},disabled:!j.title.trim()||!j.description.trim()||!j.reporter.trim()})]})]})})]})};var se=n(80600);const le=(e,t)=>(0,d.Zq)({backgroundColor:e?b.M.dark.cardBackground:b.M.light.cardBackground,borderRadius:0,boxShadow:e?"0 2px 8px rgba(0,0,0,0.6)":"0 2px 8px rgba(0,0,0,0.1)",borderLeft:`6px solid ${"transfer"===(null===t||void 0===t?void 0:t.toLowerCase())?b.M.green:t?b.M.yellow:"transparent"}`,transition:"all 0.3s ease",position:"relative",overflow:"hidden",fontSize:"13px",selectors:{":hover":{transform:"scale(1.02)",boxShadow:e?"0 4px 12px rgba(0,0,0,0.8)":"0 4px 12px rgba(0,0,0,0.2)",zIndex:1},":hover .transaction-details":{maxHeight:"200px",padding:"12px"}}}),de=(0,d.Zq)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px"}),ce=(0,d.Zq)({maxHeight:0,padding:"0 12px",overflow:"hidden",transition:"max-height 0.4s ease-in-out, padding 0.4s ease-in-out",backgroundColor:"inherit"}),ue=(0,d.Zq)({borderTop:`1px solid ${b.M.grey}`,margin:"8px 0"}),pe=(0,d.Zq)({position:"absolute",top:"50%",transform:"translateY(-50%)",right:"12px",fontSize:"40px",opacity:.3,pointerEvents:"none",zIndex:-1,color:b.M.grey}),ge=(0,d.Zq)({display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px"}),xe=e=>{var t;let{transaction:n,onClick:a}=e;const{isDarkMode:o}=(0,M.DP)(),r="requested"===(null===(t=n.status)||void 0===t?void 0:t.toLowerCase())?"pending":n.status;return(0,S.jsxs)("div",{className:`ms-Card ${le(o,n.status)}`,onClick:a,style:{cursor:a?"pointer":"default"},children:[(0,S.jsxs)("div",{className:de,children:[(0,S.jsx)(u.E,{variant:"smallPlus",styles:{root:{fontWeight:600,fontSize:"13px",color:o?b.M.dark.text:b.M.light.text}},children:n.matter_ref}),(0,S.jsx)(u.E,{variant:"smallPlus",styles:{root:{fontWeight:400,fontSize:"13px",color:o?b.M.dark.text:b.M.light.text}},children:(s=n.amount,s.toLocaleString("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}))})]}),(0,S.jsxs)("div",{className:`transaction-details ${ce}`,children:[(0,S.jsx)("div",{className:ue}),(0,S.jsxs)(c.B,{tokens:{childrenGap:6},children:[(0,S.jsxs)("div",{className:ge,children:[(0,S.jsx)(B.S,{content:"Date",children:(0,S.jsxs)(u.E,{variant:"small",children:[(0,S.jsx)("strong",{children:"Date:"})," ",(i=n.transaction_date,new Date(i).toLocaleDateString("en-GB"))]})}),(0,S.jsx)(B.S,{content:"Fee Earner",children:(0,S.jsxs)(u.E,{variant:"small",children:[(0,S.jsx)("strong",{children:"FE:"})," ",n.fe]})})]}),(0,S.jsxs)("div",{className:ge,children:[r&&(0,S.jsx)(B.S,{content:"Status",children:(0,S.jsx)(u.E,{variant:"small",styles:{root:{color:"transfer"===r.toLowerCase()?b.M.green:b.M.yellow,fontWeight:600}},children:r})}),(0,S.jsx)(B.S,{content:"Transaction Type",children:(0,S.jsxs)(u.E,{variant:"small",children:[(0,S.jsx)("strong",{children:"Type:"})," ",n.type]})})]}),(0,S.jsxs)("div",{className:ge,children:[(0,S.jsx)(B.S,{content:"Money Source",children:(0,S.jsx)(u.E,{variant:"small",styles:{root:{color:n.from_client?b.M.green:b.M.yellow,fontWeight:600}},children:n.from_client?"From Client":`From ${n.money_sender||"Unknown Sender"}`})}),(0,S.jsx)("div",{})," "]}),(0,S.jsxs)("div",{className:ge,children:[(0,S.jsx)(B.S,{content:"Transaction ID",children:(0,S.jsxs)(u.E,{variant:"small",children:[(0,S.jsx)("strong",{children:"ID:"})," ",n.transaction_id]})}),(0,S.jsx)("div",{})," "]})]}),(0,S.jsx)(f.I,{iconName:"Pound",className:pe})]})]});var i,s};var he=n(40488);const me={root:{padding:"16px 28px",borderRadius:"10px",backgroundColor:b.M.grey,border:"none",height:"70px",width:"220px",fontWeight:600,fontSize:"18px",color:b.M.greyText,transition:"background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"},rootHovered:{backgroundColor:b.M.highlight,color:"#ffffff",boxShadow:"0 8px 20px rgba(0,0,0,0.2)",transform:"translateY(-3px)"},rootPressed:{backgroundColor:`${b.M.highlight}cc`,color:"#ffffff",boxShadow:"0 4px 10px rgba(0,0,0,0.25)",transform:"translateY(2px)"}},fe={fieldGroup:{borderRadius:"10px",border:`1px solid ${b.M.grey}`,height:"70px",width:"300px",padding:"0 16px",backgroundColor:b.M.grey,boxShadow:"0 2px 6px rgba(0,0,0,0.1)"},prefix:{background:"#ffffff",border:`1px solid ${b.M.grey}`,borderRadius:"6px",padding:"2px 8px",marginRight:8,boxShadow:"0 2px 4px rgba(0,0,0,0.15)",transform:"translateY(-6px)"},field:{fontSize:"18px",color:b.M.greyText,fontWeight:600,marginTop:6}},ye=e=>{let{transaction:t,matters:n,onSubmit:o,onCancel:i,isSubmitting:s=!1,userInitials:l}=e;const d=n.find(e=>e.DisplayNumber===t.matter_ref),p=(null===d||void 0===d?void 0:d.UniqueID)||"",g=`https://eu.app.clio.com/nc/#/matters/${p}`,[x,h]=(0,a.useState)(null),[f,y]=(0,a.useState)(""),[v,k]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null),[j,M]=(0,a.useState)(null),[_,T]=(0,a.useState)(t.status||"requested"),D=e=>e.toLocaleString("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}),A=e=>{h(e),"transfer_custom"!==e&&y("")},I=e=>({root:{padding:"16px 28px",borderRadius:"10px",backgroundColor:e?b.M.highlight:b.M.grey,border:"none",height:"70px",width:"220px",fontWeight:600,fontSize:"18px",color:e?"#ffffff":b.M.greyText,transition:"background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"},rootHovered:me.rootHovered,rootPressed:me.rootPressed}),F="transfer_custom"===x&&(!f||parseFloat(f)<=0||parseFloat(f)>t.amount),B="transfer"===(null===_||void 0===_?void 0:_.toLowerCase())?b.M.green:b.M.yellow,L="requested"===(null===_||void 0===_?void 0:_.toLowerCase())?"pending":_;return(0,S.jsxs)(c.B,{tokens:{childrenGap:30},styles:{root:{padding:"30px",width:"100%",maxWidth:"1000px",boxSizing:"border-box"}},children:[(0,S.jsxs)(c.B,{tokens:{childrenGap:10},styles:{root:{textAlign:"left",backgroundColor:"#f8f9fa",border:`1px solid ${b.M.grey}`,borderRadius:"8px",padding:"20px",width:"100%"}},children:[(0,S.jsx)(u.E,{styles:{root:{fontSize:"18px",fontWeight:600,color:b.M.greyText}},children:"Transaction Approval"}),(0,S.jsx)(u.E,{styles:{root:{fontSize:"16px",color:b.M.greyText,lineHeight:"1.5"}},children:"Please review the transaction details below and choose an action:"}),(0,S.jsxs)(u.E,{styles:{root:{fontSize:"16px",color:b.M.greyText,lineHeight:"1.5"}},children:["- ",(0,S.jsx)("strong",{children:"Leave in Client:"})," Keep the funds in the client account.",(0,S.jsx)("br",{}),"- ",(0,S.jsx)("strong",{children:"Request Transfer:"})," Approve the transfer of the full amount.",(0,S.jsx)("br",{}),"- ",(0,S.jsx)("strong",{children:"Transfer Custom Amount:"})," Specify a custom amount to transfer."]})]}),(0,S.jsxs)(c.B,{tokens:{childrenGap:30},styles:{root:{textAlign:"left",backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"20px",position:"relative",width:"100%"}},children:[(0,S.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",backgroundColor:B,color:"#ffffff",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,textTransform:"capitalize",transition:"background-color 0.5s ease"},children:L}),(0,S.jsxs)(c.B,{tokens:{childrenGap:16},children:[(0,S.jsxs)(u.E,{variant:"mediumPlus",styles:{root:{color:b.M.greyText}},children:[(0,S.jsx)("strong",{children:"Date of Transaction:"})," ",(O=t.transaction_date,new Date(O).toLocaleDateString("en-GB"))]}),(0,S.jsxs)(u.E,{variant:"mediumPlus",styles:{root:{color:b.M.greyText}},children:[(0,S.jsx)("strong",{children:"Matter Reference:"})," ",(0,S.jsx)("a",{href:g,target:"_blank",rel:"noopener noreferrer",style:{color:b.M.highlight},children:t.matter_ref})," ","- ",(0,S.jsx)("strong",{children:"Amount:"})," ",D(t.amount)]}),(0,S.jsxs)(u.E,{variant:"mediumPlus",styles:{root:{color:b.M.greyText}},children:[(0,S.jsx)("strong",{children:"Transaction Type:"})," ",t.type,(0,S.jsx)("br",{}),(0,S.jsx)("strong",{children:"From:"})," ",t.from_client?"Client":t.money_sender||"Unknown Sender"]})]}),(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:24},styles:{root:{justifyContent:"center",width:"100%",maxWidth:"720px",margin:"0 auto"}},children:[(0,S.jsx)(m.Y,{text:"Leave in Client",onClick:()=>A("leave"),styles:I("leave"===x)}),(0,S.jsx)(m.Y,{text:"Request Transfer",onClick:()=>A("transfer"),styles:I("transfer"===x)}),(0,S.jsx)(m.Y,{text:"Transfer Custom Amount",onClick:()=>A("transfer_custom"),styles:I("transfer_custom"===x)})]}),"transfer_custom"===x&&(0,S.jsxs)(c.B,{tokens:{childrenGap:10},styles:{root:{alignItems:"center",maxWidth:"720px",margin:"0 auto"}},children:[(0,S.jsx)(te.A,{label:"Custom Amount",prefix:"\xa3",value:f,onChange:(e,t)=>y(t||""),styles:fe,placeholder:`Max: ${D(t.amount)}`,type:"number",min:0,max:t.amount}),(0,S.jsxs)(u.E,{styles:{root:{fontSize:"14px",color:b.M.greyText}},children:["Enter an amount up to ",D(t.amount)]})]}),x&&!w&&(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:20},styles:{root:{justifyContent:"center",width:"100%",maxWidth:"464px",margin:"0 auto"}},children:[(0,S.jsx)(m.Y,{text:v?"Processing...":"Confirm",onClick:async()=>{k(!0),C(null),M(null);const e={transaction_id:t.transaction_id,transferRequested:"transfer"===x||"transfer_custom"===x,customAmount:"transfer_custom"===x&&parseFloat(f)||void 0,transferCustom:"transfer_custom"===x,user_initials:l,matter_ref:t.matter_ref,amount:t.amount,matterId:p};try{T("transfer");const n=await fetch(`${(0,E.T)()}/${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_UPDATE_TRANSACTIONS_PATH}?code=${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_UPDATE_TRANSACTIONS_CODE}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])});if(!n.ok){const e=await n.text();throw new Error(`Failed to update transaction: ${n.status} - ${e}`)}const a=await n.json();(0,r.cY)("Update successful:",a),C("success");const s={...t,status:"transfer"};o(e,s),setTimeout(()=>{i()},2e3)}catch(n){(0,r.UT)("Error updating transaction:",n),C("error"),M(n instanceof Error?n.message:"Unknown error occurred"),k(!1)}},disabled:F||v||s,styles:{root:{padding:"16px 28px",borderRadius:"10px",backgroundColor:v?`${b.M.green}33`:b.M.highlight,border:v?`2px solid ${b.M.green}`:"none",height:"70px",width:"220px",fontWeight:600,fontSize:"18px",color:"#ffffff",transition:"background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"},rootHovered:me.rootHovered,rootPressed:me.rootPressed}}),(0,S.jsx)(m.Y,{text:"Cancel",onClick:i,styles:I(!1),disabled:v})]})]}),v&&!w&&(0,S.jsx)(c.B,{horizontalAlign:"center",children:(0,S.jsx)(he.y,{label:"Processing transaction...",labelPosition:"right",styles:{label:{color:b.M.green}}})}),"success"===w&&(0,S.jsx)(N.n,{messageBarType:R.H.success,children:"Transfer has been requested successfully!"}),"error"===w&&(0,S.jsx)(N.n,{messageBarType:R.H.error,children:j||"Failed to update transaction."})]});var O},be=(0,d.Zq)({padding:"10px",backgroundColor:b.M.light.sectionBackground,borderRadius:0,boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginBottom:"16px",position:"relative",transition:"all 0.3s ease",fontSize:"13px"}),ve=(0,d.Zq)({padding:"10px",borderBottom:`1px solid ${b.M.light.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"}),ke=(0,d.Zq)({padding:"4px 8px",marginTop:"4px",marginBottom:"4px"}),Se=(0,d.Zq)({fontWeight:400,fontSize:"13px",textDecoration:"none",color:b.M.highlight}),we=(0,d.Zq)({overflow:"hidden",transition:"max-height 0.4s ease-in-out, padding 0.4s ease-in-out, opacity 0.4s ease-in-out"}),Ce=e=>(0,d.Zq)({backgroundColor:e%2===0?"#ffffff":"rgba(244,244,246,0.4)",padding:"8px",marginTop:"8px",borderRadius:0}),je=(0,d.Zq)({display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"}),Me=(0,d.Zq)({margin:"4px 0",borderTop:`1px solid ${b.M.light.border}`,width:"100%"}),_e={color:"#555",fontSize:"13px"},Te=(0,d.Zq)({color:"red",fontWeight:600,fontSize:"13px"}),De=(0,d.Zq)({fontWeight:600,fontSize:"13px"}),Ee=e=>{var t;let{balanceRecord:n,matters:o,computeDueStatus:r}=e;const[i,s]=(0,a.useState)(!1),l=o.filter(e=>n.associated_matter_ids.includes(Number(e.UniqueID))),p=n.outstanding_bills||[],g=(0,d.Zq)(we,{maxHeight:i?"1000px":"0px",padding:i?"8px 0":"0 0",opacity:i?1:0});return(0,S.jsxs)("div",{className:be,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,S.jsxs)("div",{className:ve,children:[(0,S.jsx)(u.E,{style:{fontWeight:600,fontSize:"13px"},children:(null===(t=n.contact)||void 0===t?void 0:t.name)||"Unknown Client"}),(0,S.jsxs)(u.E,{style:{color:"red",fontWeight:700,fontSize:"13px"},children:["\xa3",n.total_outstanding_balance.toFixed(2)]})]}),l.length>0&&(0,S.jsx)("div",{className:ke,children:(0,S.jsx)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:l.map(e=>(0,S.jsx)(F.N,{href:`https://eu.app.clio.com/nc/#/matters/${e.UniqueID}`,target:"_blank",className:Se,children:e.DisplayNumber},e.UniqueID))})}),(0,S.jsx)(Y.w,{styles:{root:{margin:"8px 0"}}}),(0,S.jsx)("div",{className:g,children:p.map((e,t)=>{const n=e.total||0,a=e.paid||0,o=e.due||0,i=r(e);return(0,S.jsxs)("div",{className:Ce(t),children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"start",styles:{root:{justifyContent:"space-between"}},children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:4},verticalAlign:"start",children:[(0,S.jsx)(F.N,{href:`https://eu.app.clio.com/nc/#/bills/${e.id}`,target:"_blank",className:Se,children:e.number}),(0,S.jsxs)(u.E,{className:Te,children:["- ",i]})]}),(0,S.jsxs)("div",{className:je,children:[(0,S.jsxs)(u.E,{className:De,children:["Total: \xa3",n.toFixed(2)]}),a>0&&(0,S.jsxs)(c.B,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:4},children:[(0,S.jsx)(B.S,{content:(0,S.jsxs)("div",{children:[(0,S.jsxs)(u.E,{children:["Last Payment: ",new Date(e.paid_at).toLocaleDateString()]}),(0,S.jsxs)(u.E,{style:{color:"green",fontWeight:600},children:["Amount: \xa3",a.toFixed(2)]})]}),calloutProps:{gapSpace:0},children:(0,S.jsx)(f.I,{iconName:"Info",style:{cursor:"pointer"}})}),(0,S.jsxs)(u.E,{className:De,style:{color:"green"},children:["- Paid: \xa3",a.toFixed(2)]})]}),(0,S.jsx)("div",{className:Me}),(0,S.jsxs)(u.E,{className:De,children:["Balance: \xa3",o.toFixed(2)]})]})]}),(0,S.jsxs)(c.B,{tokens:{childrenGap:4},style:_e,children:[(0,S.jsxs)(u.E,{style:_e,children:["Issued:"," ",e.issued_at?new Date(e.issued_at).toLocaleDateString():"N/A"]}),(0,S.jsxs)(u.E,{style:_e,children:["Due:"," ",e.due_at?new Date(e.due_at).toLocaleDateString():"N/A"]})]})]},e.id)})})]})},Ae=(0,d.Zq)({display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",width:"100%"}),Ie=(0,d.Zq)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"20px",width:"100%"}),Fe=(0,d.Zq)({display:"flex",alignItems:"center",gap:"6px"}),Be=e=>{let{title:t,children:n,isDarkMode:o,defaultCollapsed:r=!1,labels:i=[]}=e;const[s,l]=(0,a.useState)(r),d=i;return(0,S.jsxs)("div",{style:{marginBottom:"20px",boxShadow:T.de.root.boxShadow,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0,overflow:"hidden"},children:[(0,S.jsxs)("div",{onClick:()=>l(!s),style:{backgroundColor:b.M.darkBlue,color:"#ffffff",border:`1px solid ${b.M.light.border}`,padding:"6px 10px",minHeight:"30px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px",borderRadius:0},children:[(0,S.jsx)("span",{style:{fontWeight:600},children:t}),(0,S.jsx)(f.I,{iconName:"ChevronDown",styles:{root:{fontSize:"16px",transform:s?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.3s ease"}}})]}),(0,S.jsx)("div",{style:{padding:s?"6px 10px":se.s.summaryPane.base.padding,backgroundColor:o?b.M.dark.sectionBackground:b.M.light.sectionBackground,boxShadow:se.s.summaryPane.base.boxShadow,borderBottomLeftRadius:0,borderBottomRightRadius:0,maxHeight:s?50:"2000px",overflow:"hidden",transition:"max-height 0.3s ease, opacity 0.3s ease"},children:s?(0,S.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",fontSize:"12px"},children:d.map((e,t)=>(0,S.jsx)("span",{style:{backgroundColor:b.M.tagBackground,padding:"2px 8px",borderRadius:"12px"},children:e},t))}):n})]})},Ne=e=>{let{transactions:t,userInitials:n,isDarkMode:o,onTransactionClick:r,matters:i,updateTransaction:s,outstandingBalances:l}=e;const[d,c]=(0,a.useState)(!0),[p,g]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),m="lz"===n.toLowerCase()?"ac":n,v=(0,a.useMemo)(()=>{const e=t.filter(e=>["requested","transfer"].includes((e.status||"").toLowerCase()));return d?e.filter(e=>(e.fe||"").toLowerCase()===m.toLowerCase()):e},[t,m,d]),k=0===v.length&&d,w=e=>{const t=new Date,n=new Date(e.due_at),a=t.getTime()-n.getTime(),o=Math.floor(a/864e5);return o>0?`${o} day${o>1?"s":""} overdue`:o<0?`Due in ${Math.abs(o)} day${Math.abs(o)>1?"s":""}`:"Due today"},C=[`${v.length} transfer${1===v.length?"":"s"}`,`${l.length} balance${1===l.length?"":"s"}`];return(0,S.jsxs)(Be,{title:"Transfers and Outstanding Balances",isDarkMode:o,defaultCollapsed:k,labels:C,children:[(0,S.jsx)(u.E,{variant:"large",styles:{root:{fontWeight:600,marginBottom:"10px"}},children:"Transfers"}),(0,S.jsx)(y.l,{checked:d,onText:"Mine",offText:"All",onChange:(e,t)=>c(!!t),styles:{root:{marginBottom:"10px"}}}),0===v.length?(0,S.jsxs)("div",{className:Fe,children:[(0,S.jsx)(f.I,{iconName:"CompletedSolid",styles:{root:{fontSize:"16px",color:b.M.green}}}),(0,S.jsx)(u.E,{children:"No transfers require action at this time."})]}):(0,S.jsx)("div",{className:Ae,children:v.map(e=>(0,S.jsx)(xe,{transaction:e,onClick:()=>(e=>{h(e),g(!0)})(e)},e.transaction_id))}),(0,S.jsx)(P.A,{isOpen:p,onClose:()=>g(!1),title:"Approve Transaction",width:"2000px",children:x&&(0,S.jsx)(ye,{transaction:x,matters:i,onSubmit:(e,t)=>{s(t)},onCancel:()=>g(!1),userInitials:n})}),(0,S.jsx)(Y.w,{styles:{root:{marginTop:20,marginBottom:20}}}),(0,S.jsx)(Be,{title:"Outstanding Balances",isDarkMode:o,defaultCollapsed:!0,labels:[`${l.length} record${1===l.length?"":"s"}`],children:0===l.length?(0,S.jsxs)("div",{className:Fe,children:[(0,S.jsx)(f.I,{iconName:"CompletedSolid",styles:{root:{fontSize:"16px",color:b.M.green}}}),(0,S.jsx)(u.E,{children:"No outstanding balances found."})]}):(0,S.jsx)("div",{className:Ie,children:l.map(e=>(0,S.jsx)(Ee,{balanceRecord:e,matters:i,computeDueStatus:w},e.id))})})]})};var Re=n(84593),Le=n(63656);var Oe=n(4326);const We=JSON.parse('{"attendance":[{"name":"Alex Cook","level":"Partner","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Anouszka Taverna","level":"Paralegal","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Wed,Thu"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Wed,Thu,Fri"}}},{"name":"Billy Leith","level":"Non-solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Tue,Thu"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Bianca O\'Donnell","level":"Solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Brendan Rimmer","level":"Partner","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Wed,Thu"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Christopher Smith","level":"Solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Thu"}}},{"name":"Edwin Vass","level":"Paralegal","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Wed,Thu,Fri"}}},{"name":"Fiona Wheeler","level":"Associate Solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Tue,Wed,Thu"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Thu,Fri"}}},{"name":"Imogen Loveridge","level":"Paralegal","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Wed,Thu"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Jonathan Waters","level":"Partner","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Wed,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Tue,Wed,Thu"}}},{"name":"Joshua Whitcombe","level":"Solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Fri"}}},{"name":"Kanchel White","level":"Non-solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Laura Albon","level":"Partner","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Tue"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Tue,Wed,Fri"}}},{"name":"Lukasz Zemanek","level":"Non-solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu"}}},{"name":"Richard Chapman","level":"Associate Solicitor","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Tue,Wed,Thu,Fri"}}},{"name":"Ryan Choi","level":"Paralegal","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Tue,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Thu,Fri"}}},{"name":"Sam Packwood","level":"Partner","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Mon,Tue,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Wed,Thu,Fri"}}},{"name":"Sophie West","level":"Paralegal","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Tue,Wed,Thu,Fri"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Thu,Fri"}}},{"name":"Zoe-Ann Kelly","level":"Paralegal","weeks":{"Monday, 16/06/2025 - Sunday, 22/06/2025":{"iso":25,"attendance":"Tue,Wed,Thu"},"Monday, 23/06/2025 - Sunday, 29/06/2025":{"iso":26,"attendance":"Mon,Tue,Wed,Fri"}}}],"team":[{"First":"Alex","Initials":"AC","Entra ID":"f46fed2c-0775-49a7-9fb4-721b813c84ff","Nickname":"Alex"},{"First":"Anouszka","Initials":"AT","Entra ID":"efb0d9cd-9d40-45ec-9426-474aaf0c174d","Nickname":"Nush"},{"First":"Billy","Initials":"BL","Entra ID":"90f348e3-1679-4024-abd0-46aac6fe21e3","Nickname":"Billy"},{"First":"Bianca","Initials":"BOD","Entra ID":"e419f631-ee7a-458b-bc68-00fabda6e8fb","Nickname":"Bianca"},{"First":"Brendan","Initials":"BR","Entra ID":"f79e3226-0652-4eb5-8594-a48e7e8d253b","Nickname":"Brendan"},{"First":"Christopher","Initials":"CS","Entra ID":"ba341208-aa5a-4f3c-92f1-00d1905e0425","Nickname":"Chris"},{"First":"Edwin","Initials":"EV","Entra ID":"3a781ee5-61a2-463f-9535-973499f2783d","Nickname":"Edwin"},{"First":"Fiona","Initials":"FW","Entra ID":"d39c29e1-6cfe-4376-8021-aebc873fd9e7","Nickname":"Fi"},{"First":"Imogen","Initials":"IL","Entra ID":"bc78a8ad-e8bf-4067-89e2-5c800c356383","Nickname":"Immy"},{"First":"Jonathan","Initials":"JW","Entra ID":"0abc0ceb-0268-448b-b497-25c8fd6ae0be","Nickname":"Jonathan"},{"First":"Joshua","Initials":"JWH","Entra ID":"a4da04a0-a141-4dda-8cfa-9a781392b4e3","Nickname":"Josh"},{"First":"Kanchel","Initials":"KW","Entra ID":"f85e514e-91a3-4d5f-a0e0-2122faa999bc","Nickname":"Kanchel"},{"First":"Laura","Initials":"LA","Entra ID":"f4eded2f-8fb0-4c09-a5ea-31a3f4078709","Nickname":"Laura"},{"First":"Lukasz","Initials":"LZ","Entra ID":"8318a6fd-47aa-4792-855d-4d82a3a9ac7c","Nickname":"Luke"},{"First":"Richard","Initials":"RC","Entra ID":"17c48608-2fcc-4d37-9888-a01d39eab223","Nickname":"Richard"},{"First":"Ryan","Initials":"RCH","Entra ID":"ca6a294d-ef76-4a09-868e-bfbe334011e7","Nickname":"Ryan"},{"First":"Sam","Initials":"SP","Entra ID":"55354c77-72b9-4a0b-adcb-cc301112167a","Nickname":"Sam"},{"First":"Sophie","Initials":"SW","Entra ID":"60cbd65f-c32d-4760-9d34-6c1c6a8b50d5","Nickname":"Sophie"},{"First":"Zoe-Ann","Initials":"ZK","Entra ID":"e861eaac-3c1e-4125-a124-d818104c2003","Nickname":"Zoe-Ann"}]}'),Pe=JSON.parse('{"e3":[{"person":"Lukasz Zemanek","start_date":"2024-04-15","end_date":"2024-04-16","reason":"Holiday","status":"approved","id":"1","approvers":["JD","AC"]},{"person":"Alex Cook","start_date":"2025-06-20","end_date":"2025-06-20","reason":"Holiday","status":"requested","id":"2","approvers":["LZ"]}],"OR":[],"n4":{"totals":{}}}');var $e=n(4490),ze=n(98556);const qe=JSON.parse('[{"intake_id":1,"intake_date":"2024-06-01","transaction_id":"TXN001","matter_ref":"MTR-001","matter_description":"Property Purchase","fe":"LZ","amount":1500,"transaction_date":"2024-06-02","from_client":true,"money_sender":null,"type":"deposit","status":"requested","task_id":null},{"intake_id":2,"intake_date":"2024-06-05","transaction_id":"TXN002","matter_ref":"MTR-002","matter_description":"Contract Drafting","fe":"AC","amount":2500,"transaction_date":"2024-06-06","from_client":false,"money_sender":"Client B","type":"payment","status":"transfer","task_id":"task-002"},{"intake_id":3,"intake_date":"2024-06-07","transaction_id":"TXN003","matter_ref":"MTR-003","matter_description":"Litigation","fe":"LZ","amount":500,"transaction_date":"2024-06-08","from_client":true,"money_sender":null,"type":"deposit","status":"processed","task_id":null}]'),He=JSON.parse('{"meta":{"paging":{},"records":2},"data":[{"id":1,"created_at":"2025-05-01","updated_at":"2025-06-01","associated_matter_ids":[1],"contact":{"name":"Client A"},"total_outstanding_balance":1500,"last_payment_date":"2025-05-15","last_shared_date":null,"newest_issued_bill_due_date":"2025-06-15","pending_payments_total":0,"reminders_enabled":true,"currency":{"id":1},"outstanding_bills":[{"id":101,"number":"INV-001","issued_at":"2025-05-01","created_at":"2025-05-01","due_at":"2025-05-15","total":1500,"paid":500,"paid_at":"2025-05-10","pending":0,"due":1000,"state":"sent","kind":"invoice"}]},{"id":2,"created_at":"2025-04-01","updated_at":"2025-06-01","associated_matter_ids":[2],"contact":{"name":"Client B"},"total_outstanding_balance":2000,"last_payment_date":"2025-04-20","last_shared_date":null,"newest_issued_bill_due_date":"2025-06-20","pending_payments_total":0,"reminders_enabled":false,"currency":{"id":1},"outstanding_bills":[{"id":102,"number":"INV-002","issued_at":"2025-04-01","created_at":"2025-04-01","due_at":"2025-04-15","total":2000,"paid":0,"pending":0,"due":2000,"state":"sent","kind":"invoice"}]}]}'),Ue=JSON.parse('{"current_week":{"daily_data":{"2025-06-23":{"total_hours":2,"total_amount":200},"2025-06-24":{"total_hours":3,"total_amount":300},"2025-06-25":{"total_hours":4,"total_amount":400},"2025-06-26":{"total_hours":5,"total_amount":500},"2025-06-27":{"total_hours":1,"total_amount":100}},"daily_average_hours":3,"daily_average_amount":300},"last_week":{"daily_data":{"2025-06-16":{"total_hours":1,"total_amount":100},"2025-06-17":{"total_hours":2,"total_amount":200},"2025-06-18":{"total_hours":2.5,"total_amount":250},"2025-06-19":{"total_hours":3,"total_amount":300},"2025-06-20":{"total_hours":0,"total_amount":0}},"daily_average_hours":1.7,"daily_average_amount":170}}'),Ze=JSON.parse('[{"id":1,"snippetId":101,"blockTitle":"Intro","currentText":"Current snippet text","proposedText":"Updated snippet text","submittedBy":"Local Tester","submittedAt":"2025-06-15T12:00:00Z","status":"pending"}]');var Ye=n(91485);const Ge=(0,d.i7)({"0%":{opacity:0,transform:"translateY(20px)"},"100%":{opacity:1,transform:"translateY(0)"}}),Ke=(e,t,n)=>(0,d.Zq)({background:e?"minimal"===t?b.M.dark.sectionBackground:"linear-gradient(135deg, #0B1224 0%, #0F1B33 100%)":void 0,backgroundColor:e?void 0:b.M.light.sectionBackground,padding:"minimal"===t?"12px":"16px",borderRadius:"8px",border:`1px solid ${e?b.M.dark.border:b.M.light.border}`,boxShadow:"elevated"===t?e?"0 4px 16px rgba(0,0,0,0.2), 0 1px 4px rgba(0,0,0,0.1)":"0 4px 16px rgba(0,0,0,0.04), 0 1px 4px rgba(0,0,0,0.02)":e?"0 2px 8px rgba(0,0,0,0.15), 0 1px 2px rgba(0,0,0,0.08)":"0 2px 8px rgba(0,0,0,0.03), 0 1px 2px rgba(0,0,0,0.01)",width:"100%",display:"flex",flexDirection:"column",gap:"minimal"===t?"8px":"12px",position:"relative",transition:"all 0.2s ease",animation:`${Ge} 0.4s ease ${n}s both`,overflow:"hidden","&:hover":{transform:"translateY(-1px)",boxShadow:"elevated"===t?e?"0 6px 24px rgba(0,0,0,0.25), 0 2px 8px rgba(0,0,0,0.15)":"0 6px 24px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)":e?"0 4px 16px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.1)":"0 4px 16px rgba(0,0,0,0.04), 0 2px 4px rgba(0,0,0,0.02)"}}),Ve=e=>(0,d.Zq)({fontSize:"14px",fontWeight:"500",color:e?b.M.dark.text:b.M.light.text,marginTop:"4px",lineHeight:"1.4",opacity:.8}),Je=(0,d.Zq)({position:"relative",zIndex:1}),Qe=e=>{let{title:t,subtitle:n,actions:a,children:o,styleOverrides:r,id:i,variant:s="default",animationDelay:l=0}=e;const{isDarkMode:u}=(0,M.DP)();return(0,S.jsxs)("section",{id:i,className:Ke(u,s,l),style:r,"aria-labelledby":t?`${i||t}-heading`:void 0,children:[(t||a)&&(0,S.jsxs)("div",{className:(g=!!n,(0,d.Zq)({display:"flex",alignItems:g?"flex-start":"center",justifyContent:"space-between",marginBottom:g?"8px":"4px",position:"relative"})),children:[(0,S.jsxs)("div",{children:[t&&(0,S.jsx)("h2",{id:`${i||t}-heading`,className:(p=u,(0,d.Zq)({fontWeight:"600",fontSize:"18px",lineHeight:"1.2",color:p?b.M.dark.text:b.M.light.text,margin:0})),children:t}),n&&(0,S.jsx)("p",{className:Ve(u),children:n})]}),a&&(0,S.jsx)("div",{style:{flexShrink:0},children:a})]}),(0,S.jsx)("div",{className:Je,children:(0,S.jsx)(c.B,{tokens:{childrenGap:"minimal"===s?6:10},children:o})})]});var p,g};var Xe=n(3825),et=n(6720),tt=n(32354);const nt=e=>{const t=null!==e&&void 0!==e?e:{},{style:n,className:a}=t;return(0,S.jsx)(f.I,{iconName:"CalendarDay",style:n,className:a})},at={Accept:{outline:k.p29,filled:k.Hcz},Checklist:{outline:k.p29,filled:k.Hcz},Comment:{outline:et.x16,filled:k.rle},Calendar:{outline:nt,filled:nt},CalendarCheck:{outline:k.VGZ,filled:k.x$1},Room:{outline:et.zqu,filled:et.NOq},Building:{outline:k.IqM,filled:k.ymh},Plus:{outline:Xe.tNe,filled:Xe.$jf},Phone:{outline:et.x16,filled:k.rle},Leave:{outline:k.PAB,filled:k.PAB},PalmTree:{outline:k.PAB,filled:k.PAB},OpenFile:{outline:k.K$h,filled:k.M1W},IdCheck:{outline:k.ub,filled:k.Wuj},Assessment:{outline:et.OGs,filled:et.qVA},KnowledgeArticle:{outline:et.sPF,filled:et.ith},CityNext:{outline:et.qd2,filled:et.qod},ConstructionCone:{outline:et.d$G,filled:et.JSL},Presentation:{outline:et.epJ,filled:et.a4Q}},ot=e=>{let{title:t,icon:n,isDarkMode:o,onClick:r,selected:i=!1,disabled:s=!1,style:l={},orientation:d="row",alwaysShowText:c=!1,showPulsingDot:u=!1,panelActive:p=!1}=e;const[g,x]=a.useState(!1),[h,m]=a.useState(!1),[f,y]=a.useState(0),{OutlineIcon:v,FilledIcon:w}=(e=>{const t=at[e];return t?{OutlineIcon:t.outline,FilledIcon:t.filled}:{OutlineIcon:k.p29,FilledIcon:k.Hcz}})(n);a.useEffect(()=>{m(c)},[c]);const C=["quickActionCard",o?"dark-mode":"light-mode",i&&"selected","column"===d&&"vertical",h&&"show-label",!h&&"labels-locked",g&&"hovered",s&&"disabled",p&&"panel-active"].filter(Boolean).join(" "),j={fontSize:15,color:o?b.M.dark.text:b.M.light.text};return(0,S.jsxs)("div",{className:C,onClick:s?void 0:r,role:"button",tabIndex:s?-1:0,style:{...l,transform:`translateZ(${f}px)`},onMouseEnter:()=>{x(!0),c||m(!0),y(e=>e+1)},onMouseLeave:()=>{x(!1),c||m(!1),y(e=>e+1)},onKeyPress:e=>{s||"Enter"!==e.key&&" "!==e.key||r()},"data-action":t,children:[(0,S.jsxs)("div",{className:"quick-action-icon",children:[(0,S.jsx)(v,{className:"icon-outline",style:j}),(0,S.jsx)(w,{className:"icon-filled",style:j})]}),(0,S.jsxs)("span",{className:"quick-action-label",children:[t,u&&(0,S.jsx)(tt.A,{show:u,size:6,animationDuration:350,style:{marginLeft:6}})]})]})};var rt=n(92713);const it=(e,t,n)=>(0,d.Zq)({background:e?"linear-gradient(135deg, #081A36 0%, #0A1E3D 100%)":`linear-gradient(135deg, #FFFFFF 0%, ${b.M.light.grey} 100%)`,borderTop:n?"none":"1px solid "+(e?"rgba(255,255,255,0.06)":"rgba(6,23,51,0.06)"),borderBottom:n?"none":"1px solid "+(e?"rgba(0,0,0,0.35)":"rgba(6,23,51,0.08)"),backdropFilter:"none",boxShadow:n?"none":e?"0 4px 6px rgba(0, 0, 0, 0.30)":"0 4px 6px rgba(6, 23, 51, 0.07)",padding:"8px 10px",minHeight:30,height:46,transition:"all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1)",display:"flex",flexDirection:"row",alignItems:"center",gap:8,overflowX:"hidden",overflowY:"hidden",position:"relative",zIndex:200,borderRadius:0,marginLeft:-12,marginRight:-12,width:"calc(100% + 24px)",marginTop:-8,contain:"layout style",...t&&!n&&{transform:"scale(1.0025)",filter:"brightness(1.02)",boxShadow:e?"0 6px 14px rgba(0, 0, 0, 0.28)":"0 6px 14px rgba(6, 23, 51, 0.10)"},selectors:{"::-webkit-scrollbar":{display:"none"}},"@media (max-width: 900px)":{padding:"4px 16px",gap:"4px"},"@media (max-width: 600px)":{padding:"4px 12px",gap:"2px"}}),st=e=>{let{isDarkMode:t,quickActions:n,handleActionClick:o,currentUserConfirmed:r,highlighted:i=!1,resetSelectionRef:s,panelActive:l=!1,seamless:d=!1,userDisplayName:c,userIdentifier:u,onToggleTheme:p}=e;const[g,x]=a.useState(null),[h,m]=a.useState(!1),[y,v]=a.useState(!0),[k,w]=a.useState(!1),[C,j]=a.useState(!1),M=a.useMemo(()=>{const e=n.length;if(0===e)return 0;return 44*e+8},[n.length]),_=a.useRef(null),T=a.useRef(null),D=a.useRef(null),E=a.useRef(null),A=a.useMemo(()=>{if(!c&&!u)return null;const e=(u||c||"").toLowerCase().trim();return e?`quickActionsGreeting:${e}`:null},[c,u]),I=a.useMemo(()=>{if(!c)return null;const e=c.trim();if(!e)return null;const t=e.split(" ")[0];return`Hi ${t.charAt(0).toUpperCase()+t.slice(1)}!`},[c]),F=C&&Boolean(I);a.useEffect(()=>{if(!A||!I)return;if(E.current===A)return;let e=!1;try{e="seen"===window.sessionStorage.getItem(A)}catch{e=!1}if(!e){E.current=A,j(!0);try{window.sessionStorage.setItem(A,"seen")}catch{}}},[I,A]),a.useEffect(()=>{if(!C)return;const e=window.setTimeout(()=>{j(!1)},4200);return()=>{window.clearTimeout(e)}},[C]),a.useEffect(()=>{y||j(!1)},[y]),a.useEffect(()=>{s&&(s.current=()=>{l||x(null)})},[s,l]),a.useEffect(()=>()=>{x(null)},[]);const B=a.useCallback(()=>{var e,t,a,o;if(y)return;const r=n.length;if(0===r)return void w(!1);const i=null!==(e=null===(t=T.current)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:0,s=null!==(a=null===(o=D.current)||void 0===o?void 0:o.getBoundingClientRect().width)&&void 0!==a?a:0,l=Math.max(0,i-s-40-32)/r>=120;w(e=>e===l?e:l)},[y,n.length]);a.useLayoutEffect(()=>{if(y)return;B();const e=window.requestAnimationFrame(()=>{window.requestAnimationFrame(B)}),t=window.setTimeout(B,220),n=()=>B();window.addEventListener("resize",n);const a=new ResizeObserver(()=>B());return _.current&&a.observe(_.current),()=>{window.cancelAnimationFrame(e),window.clearTimeout(t),window.removeEventListener("resize",n),a.disconnect()}},[y,B]);const N=e=>{switch(e){case"Create a Task":return"New Task";case"Save Telephone Note":return"Attendance Note";case"Request Annual Leave":return"Book Leave";case"Update Attendance":return"Attendance";case"Confirm Attendance":return"Confirm Attendance";case"Book Space":return"Book Room";default:return e}};return(0,S.jsxs)("div",{ref:T,className:it(t,i,d),role:"region","aria-label":"Quick actions",children:[(0,S.jsxs)("button",{ref:D,type:"button","aria-expanded":!y,onClick:()=>{v(e=>!e)},style:{display:"flex",alignItems:"center",gap:6,height:30,width:"auto",padding:"0 2px",background:"transparent",border:"none",color:t?"#E5E7EB":"#0F172A",fontWeight:600,cursor:"pointer",textAlign:"left",flex:"0 0 auto",minWidth:110},children:[(0,S.jsx)("span",{style:{fontSize:13},children:"Quick actions"}),(0,S.jsx)(f.I,{iconName:"DoubleChevronRight",styles:{root:{transition:"transform 200ms ease, opacity 160ms ease",transform:y?"translateX(0)":"translateX(6px)",opacity:y?1:0,fontSize:14,color:t?"#9CA3AF":"#64748B"}}})]}),I&&(0,S.jsx)("div",{"aria-live":"polite",role:"status",style:{position:"absolute",right:d?12:10,top:"50%",transform:F?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(42px)",opacity:F?1:0,transition:"opacity 200ms ease, transform 260ms cubic-bezier(0.33, 1, 0.68, 1)",color:t?"#E5E7EB":"#0F172A",fontSize:13,fontWeight:600,letterSpacing:.2,whiteSpace:"nowrap",pointerEvents:"none",textShadow:t?"0 1px 2px rgba(0,0,0,0.35)":"none"},children:I}),(0,S.jsxs)("div",{ref:_,style:{display:"flex",alignItems:"center",gap:0,paddingTop:y?0:2,paddingBottom:y?0:2,flexWrap:"nowrap",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",flex:y?"0 0 0":"0 1 auto",minWidth:0,width:y?0:"auto",maxWidth:y?0:k?"100%":`${M}px`,opacity:y?0:1,pointerEvents:y?"none":"auto",transition:"max-width 220ms ease, flex 220ms ease, opacity 180ms ease",border:"1px solid "+(t?"rgba(255,255,255,0.1)":"rgba(6,23,51,0.1)"),borderColor:y?"transparent":void 0,borderRadius:y?0:8,padding:y?0:"0px 4px",background:"transparent"},children:[!y&&(0,S.jsx)("button",{type:"button","aria-label":"Collapse quick actions",onClick:()=>v(!0),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,border:"none",borderRadius:4,background:"transparent",color:t?"#9CA3AF":"#64748B",cursor:"pointer",marginRight:2},children:(0,S.jsx)(f.I,{iconName:"ChevronLeft",styles:{root:{fontSize:14}}})}),!y&&n.map((e,n)=>(0,S.jsx)(ot,{title:N(e.title),icon:e.icon,isDarkMode:t,onClick:()=>(e=>{x(e.title),m(!0),j(!1),setTimeout(()=>{o(e),m(!1)},150)})(e),iconColor:b.M.cta,selected:g===e.title,confirmed:"Confirm Attendance"===e.title||"Update Attendance"===e.title?r:void 0,disabled:h&&g!==e.title,panelActive:l&&g===e.title,alwaysShowText:k,style:{"--card-index":n,"--card-bg":"transparent","--card-border":"transparent","--card-hover":t?"rgba(255,255,255,0.08)":"rgba(6,23,51,0.08)","--card-selected":t?"rgba(255,255,255,0.12)":"rgba(6,23,51,0.12)","--card-shadow":"none",height:"32px",opacity:h&&g!==e.title?.6:1,filter:h&&g===e.title?"brightness(1.06)":"none",borderRadius:6,animation:`quickActionCascade 0.3s ease-out ${.05*n}s both`,transform:"translateX(-10px)",animationFillMode:"forwards"}},e.title))]}),h&&(0,S.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:t?"linear-gradient(135deg, rgba(45, 45, 45, 0.25) 0%, rgba(58, 58, 58, 0.18) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(248, 250, 252, 0.18) 100%)",backdropFilter:"blur(1px)",pointerEvents:"none",transition:"opacity 0.2s ease"}}),p&&!F&&(0,S.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8,paddingLeft:12,borderLeft:"1px solid "+(t?"rgba(255,255,255,0.1)":"rgba(6,23,51,0.1)")},children:[(0,S.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:t?"#E5E7EB":"#0F172A",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{flexShrink:0},children:t?(0,S.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,S.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,S.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,S.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,S.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,S.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,S.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,S.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,S.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),(0,S.jsx)("span",{style:{fontSize:13,fontWeight:500,color:t?"#E5E7EB":"#0F172A",whiteSpace:"nowrap"},children:t?"Dark":"Light"}),(0,S.jsx)(rt.A,{checked:t,onChange:p,ariaLabel:"Toggle dark mode"})]})]})},lt=e=>{const t=null!==e&&void 0!==e?e:{},{style:n,className:a}=t;return(0,S.jsx)(f.I,{iconName:"CalendarDay",style:n,className:a})},dt={OpenFile:k.g1V,Folder:k.M1W,Phone:k.rle,Calendar:lt,CalendarCheck:lt,Accept:k.CMH,ContactCard:k.Wuj,Verify:k.BAG,IdCheck:k.Wuj,Shield:k.SMR,Send:k.Cer,ReviewRequestMirrored:et.mpA,Presentation:et.a4Q,PalmTree:k.PAB,Edit:k.uO9,KnowledgeArticle:et.ith,Room:et.NOq},ct=e=>{var t;let{title:n,icon:o,isDarkMode:r,onClick:i,disabled:s=!1,subtitle:l,count:d,category:c="critical"}=e;const[u,p]=a.useState(!0),g=a.useRef(null),x=dt[o]||k.M1W;const h=r?b.M.dark.cardBackground:b.M.light.sectionBackground,m=r?"rgba(54,144,206,0.12)":"#eef5ff",f=r?b.M.dark.text:b.M.light.text,y=r?b.M.dark.border:"#e5e7eb";a.useEffect(()=>{var e;const t=()=>{var e;if(null===(e=g.current)||void 0===e||!e.parentElement)return;const t=g.current.parentElement.offsetWidth,n=g.current.parentElement.children.length;p(t/n>120)};t(),window.addEventListener("resize",t);const n=new ResizeObserver(t);return null!==(e=g.current)&&void 0!==e&&e.parentElement&&n.observe(g.current.parentElement),()=>{window.removeEventListener("resize",t),n.disconnect()}},[]);const v=null!==(t={critical:b.M.red,standard:b.M.highlight,success:b.M.green}[c])&&void 0!==t?t:b.M.red;return(0,S.jsxs)("button",{ref:g,type:"button","aria-label":l?`${n}: ${l}`:n,onClick:s?void 0:i,disabled:s,className:"immediate-action-chip",style:{display:"inline-flex",alignItems:"center",gap:u?6:4,padding:u?"6px 10px":"6px 8px",height:32,minWidth:32,borderRadius:8,background:h,color:f,border:`1px solid ${y}`,boxShadow:"none",cursor:s?"not-allowed":"pointer",opacity:s?.6:1,transition:"transform 120ms ease, background-color 140ms ease, border-color 140ms ease, gap 200ms ease, padding 200ms ease"},onKeyDown:e=>{s||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),i())},onMouseEnter:e=>{if(s)return;const t=e.currentTarget;t.style.transform="translateY(-1px)",t.style.background=m,t.style.borderColor=b.M.highlight,t.style.color="#3690CE"},onMouseLeave:e=>{const t=e.currentTarget;t.style.transform="translateY(0)",t.style.background=h,t.style.borderColor=y,t.style.color=f},children:[(0,S.jsx)(tt.A,{show:!0,color:v,size:6,animationDuration:360,style:{flexShrink:0}}),(0,S.jsx)(x,{style:{fontSize:15,opacity:.9}}),u&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{style:{fontSize:13,fontWeight:500,opacity:u?1:0,width:u?"auto":0,overflow:"hidden",transition:"opacity 200ms ease, width 200ms ease",whiteSpace:"nowrap"},children:n}),l&&(0,S.jsxs)("span",{style:{fontSize:11,opacity:u?.8:0,transition:"opacity 200ms ease"},children:[" ",l]}),"number"===typeof d&&(0,S.jsx)("span",{"aria-label":`count ${d}`,style:{marginLeft:6,minWidth:16,height:16,padding:"0 5px",borderRadius:8,background:r?"rgba(14,165,233,0.25)":"#e8f1ff",color:r?"#dff6ff":"#0b3d62",fontSize:11,fontWeight:700,display:"inline-flex",alignItems:"center",justifyContent:"center",opacity:u?1:0,transition:"opacity 200ms ease"},children:d})]})]})},ut=(e,t)=>(0,d.Zq)({position:"relative",zIndex:10,background:e?"linear-gradient(135deg, #0B1224 0%, #0F1B33 50%, #0B1328 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F3F7FC 100%)",borderTop:e?"1px solid rgba(255,255,255,0.04)":"1px solid rgba(6,23,51,0.06)",borderBottom:"none",borderRadius:"0",boxShadow:e?"0 4px 6px rgba(0, 0, 0, 0.28)":"0 4px 6px rgba(6, 23, 51, 0.07)",margin:"0",padding:"8px 10px",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",...t&&{transform:"translateY(-1px)",boxShadow:e?"0 4px 8px rgba(54, 144, 206, 0.25)":"0 4px 8px rgba(54, 144, 206, 0.20)",borderColor:e?"rgba(54, 144, 206, 0.2)":"rgba(54, 144, 206, 0.15)",background:e?"linear-gradient(135deg, #1E293B 0%, #334155 100%)":"linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%)"}}),pt=(0,d.i7)({from:{opacity:0,transform:"translateY(5px)"},to:{opacity:1,transform:"translateY(0)"}}),gt=(0,d.i7)({"0%":{transform:"scale(0)",opacity:0},"70%":{transform:"scale(1.3)",opacity:1},"100%":{transform:"scale(1)",opacity:1}}),xt=(0,d.Zq)({display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:"12px",animation:`${pt} 0.3s ease-out`}),ht=(0,d.Zq)({width:"24px",height:"24px",borderRadius:"50%",background:b.M.highlight,color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",animation:`${gt} 0.3s ease`}),mt=(0,d.Zq)({marginLeft:"8px",fontSize:"14px",animation:`${pt} 0.3s ease-out`}),ft=e=>{let{isDarkMode:t,immediateActionsReady:n,immediateActionsList:o,highlighted:r=!1,seamless:i=!1}=e;const[s,l]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),p=o.length>0||!n||s;return(0,a.useEffect)(()=>{const e=()=>{if(c)return;window.scrollY>72?l(!1):l(!0)};return 0!==o.length||c||window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[o,c]),(0,a.useEffect)(()=>{let e;return n&&0===o.length?(u(!1),l(!0),e=window.setTimeout(()=>{u(!0),l(!1)},3e3)):(c&&u(!1),l(!0)),()=>{e&&window.clearTimeout(e)}},[n,o.length]),(0,S.jsx)("div",{className:ut(t,r),style:{height:p?"auto":0,overflow:"hidden",opacity:p?1:0,transform:p?"translateY(0)":"translateY(-10px)",transition:"height 0.3s ease, opacity 0.3s ease, transform 0.3s ease",pointerEvents:p&&n?"auto":"none",borderTop:p?void 0:"none",padding:p?void 0:0,marginTop:p?void 0:0,marginBottom:p?void 0:0},children:(0,S.jsx)("div",{className:(o.length,(0,d.Zq)({backgroundColor:"transparent",boxShadow:"none",border:"none",padding:"0",display:"flex",flexDirection:"row",gap:"8px",overflowX:"auto",msOverflowStyle:"none",scrollbarWidth:"none",alignItems:"center",height:36,selectors:{"::-webkit-scrollbar":{display:"none"}}})),children:n?0===o.length?(0,S.jsxs)("div",{className:xt,children:[(0,S.jsx)("div",{className:ht,children:(0,S.jsx)(k.CMH,{})}),(0,S.jsx)("div",{className:mt,children:"Nothing to Action."})]}):(0,S.jsx)(S.Fragment,{children:o.map(e=>(0,S.jsx)(ct,{title:e.title,icon:e.icon,isDarkMode:t,onClick:e.onClick,disabled:e.disabled,category:e.category},e.title))}):(0,S.jsx)(he.y,{size:h.H.small})})})},yt=(0,d.Zq)({padding:"10px",backgroundColor:b.M.light.sectionBackground,borderRadius:0,boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginBottom:"16px"}),bt=(0,d.Zq)({padding:"8px",borderBottom:`1px solid ${b.M.light.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"}),vt=(0,d.Zq)({padding:"4px 8px",marginTop:"4px",marginBottom:"4px"}),kt=(0,d.Zq)({fontWeight:400,fontSize:"14px",textDecoration:"none",color:b.M.highlight}),St=e=>(0,d.Zq)({backgroundColor:e%2===0?"#ffffff":"rgba(244,244,246,0.4)",padding:"8px",marginTop:"8px",borderRadius:"4px"}),wt=(0,d.Zq)({display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"}),Ct=(0,d.Zq)({margin:"4px 0",borderTop:`1px solid ${b.M.light.border}`,width:"100%"}),jt={color:"#555",fontSize:"14px"},Mt=(0,d.Zq)({color:"red",fontWeight:600,fontSize:"14px"}),_t=(0,d.Zq)({fontWeight:600,fontSize:"14px"}),Tt=e=>{let{balances:t,matters:n}=e;const a=t.filter(e=>e.total_outstanding_balance>0);if(0===a.length)return(0,S.jsx)(u.E,{children:"No outstanding balances found."});return(0,S.jsx)("div",{children:a.map(e=>{var t;const a=(e=>n.filter(t=>e.associated_matter_ids.includes(Number(t.UniqueID))))(e);return(0,S.jsxs)("div",{className:yt,children:[(0,S.jsxs)("div",{className:bt,children:[(0,S.jsx)(u.E,{style:{fontWeight:600},children:(null===(t=e.contact)||void 0===t?void 0:t.name)||"Unknown Client"}),(0,S.jsxs)(u.E,{style:{color:"red",fontWeight:700},children:["\xa3",e.total_outstanding_balance.toFixed(2)]})]}),a.length>0&&(0,S.jsx)("div",{className:vt,children:(0,S.jsx)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"center",children:a.map(e=>(0,S.jsx)(F.N,{href:`https://eu.app.clio.com/nc/#/matters/${e.UniqueID}`,target:"_blank",className:kt,children:e.DisplayNumber},e.UniqueID))})}),(0,S.jsx)(Y.w,{styles:{root:{margin:"8px 0"}}}),e.outstanding_bills.map((e,t)=>{const n=e.total,a=e.paid,o=e.due,r=(e=>{const t=new Date,n=new Date(e.due_at),a=t.getTime()-n.getTime(),o=Math.floor(a/864e5);return o>0?`${o} day${o>1?"s":""} overdue`:o<0?`Due in ${Math.abs(o)} day${Math.abs(o)>1?"s":""}`:"Due today"})(e);return(0,S.jsxs)("div",{className:St(t),children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:8},verticalAlign:"start",styles:{root:{justifyContent:"space-between"}},children:[(0,S.jsxs)(c.B,{horizontal:!0,tokens:{childrenGap:4},verticalAlign:"start",children:[(0,S.jsx)(F.N,{href:`https://eu.app.clio.com/nc/#/bills/${e.id}`,target:"_blank",className:kt,children:e.number}),(0,S.jsxs)(u.E,{className:Mt,children:["- ",r]})]}),(0,S.jsxs)("div",{className:wt,children:[(0,S.jsxs)(u.E,{className:_t,children:["Total: \xa3",n.toFixed(2)]}),a>0&&(0,S.jsxs)(c.B,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:4},children:[(0,S.jsx)(B.S,{content:(0,S.jsxs)("div",{children:[(0,S.jsxs)(u.E,{children:["Last Payment: ",new Date(e.paid_at).toLocaleDateString()]}),(0,S.jsxs)(u.E,{style:{color:"green",fontWeight:600},children:["Amount: \xa3",a.toFixed(2)]})]}),calloutProps:{gapSpace:0},children:(0,S.jsx)(f.I,{iconName:"Info",style:{cursor:"pointer"}})}),(0,S.jsxs)(u.E,{className:_t,style:{color:"green"},children:["- Paid: \xa3",a.toFixed(2)]})]}),(0,S.jsx)("div",{className:Ct}),(0,S.jsxs)(u.E,{className:_t,children:["Balance: \xa3",o.toFixed(2)]})]})]}),(0,S.jsxs)(c.B,{tokens:{childrenGap:4},style:jt,children:[(0,S.jsxs)(u.E,{style:jt,children:["Issued: ",new Date(e.issued_at).toLocaleDateString()]}),(0,S.jsxs)(u.E,{style:jt,children:["Due: ",new Date(e.due_at).toLocaleDateString()]})]})]},e.id)})]},e.id)})})},Dt=e=>{let{status:t,size:n,color:a}=e;if("office"===t)return(0,S.jsx)("svg",{viewBox:"0 0 57.56 100","aria-label":"Helix Office",role:"img",style:{width:n,height:n,display:"block",color:a},children:(0,S.jsxs)("g",{children:[(0,S.jsx)("path",{fill:"currentColor",d:"M57.56,13.1c0,7.27-7.6,10.19-11.59,11.64-4,1.46-29.98,11.15-34.78,13.1C6.4,39.77,0,41.23,0,48.5v-13.1C0,28.13,6.4,26.68,11.19,24.74c4.8-1.94,30.78-11.64,34.78-13.1,4-1.45,11.59-4.37,11.59-11.64v13.09h0Z"}),(0,S.jsx)("path",{fill:"currentColor",d:"M57.56,38.84c0,7.27-7.6,10.19-11.59,11.64s-29.98,11.16-34.78,13.1c-4.8,1.94-11.19,3.4-11.19,10.67v-13.1c0-7.27,6.4-8.73,11.19-10.67,4.8-1.94,30.78-11.64,34.78-13.1,4-1.46,11.59-4.37,11.59-11.64v13.09h0Z"}),(0,S.jsx)("path",{fill:"currentColor",d:"M57.56,64.59c0,7.27-7.6,10.19-11.59,11.64-4,1.46-29.98,11.15-34.78,13.1-4.8,1.94-11.19,3.39-11.19,10.67v-13.1c0-7.27,6.4-8.73,11.19-10.67,4.8-1.94,30.78-11.64,34.78-13.1,4-1.45,11.59-4.37,11.59-11.64v13.1h0Z"})]})});if("away"===t)return(0,S.jsx)(k.PAB,{style:{color:a,fontSize:n}});const o="off-sick"===t?"Health":"out-of-office"===t?"Suitcase":"wfh"===t?"Home":"Help";return(0,S.jsx)(f.I,{iconName:o,style:{color:a,fontSize:n}})},Et=[{key:"current",label:"This Week"},{key:"next",label:"Next Week"}],At=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"}],It=[{key:"office",label:"Office"},{key:"wfh",label:"WFH"},{key:"away",label:"Away"},{key:"off-sick",label:"Sick"},{key:"out-of-office",label:"OOO"}],Ft=["monday","tuesday","wednesday","thursday","friday"],Bt={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4},Nt=e=>{let{isDarkMode:t,attendanceRecords:n,teamData:o,userData:i,annualLeaveRecords:s,futureLeaveRecords:l,onAttendanceUpdated:c,onOpenModal:p,onDayUpdate:g}=e;(0,r.cY)("WeeklyAttendanceView received data:",{attendanceRecordsCount:null===n||void 0===n?void 0:n.length,teamDataCount:null===o||void 0===o?void 0:o.length,sampleAttendanceRecord:null===n||void 0===n?void 0:n[0],sampleTeamMember:null===o||void 0===o?void 0:o[0],annualLeaveCount:null===s||void 0===s?void 0:s.length,futureLeaveCount:null===l||void 0===l?void 0:l.length,allAttendanceInitials:(null===n||void 0===n?void 0:n.map(e=>e.Initials))||[],allTeamInitials:(null===o||void 0===o?void 0:o.map(e=>e.Initials))||[]});const[x,h]=(0,a.useState)("daily"),[y,v]=(0,a.useState)(["current"]),[k,w]=(0,a.useState)([]),[C,j]=(0,a.useState)([]),M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=new Date,a=new Date(n),o=n.getDay();a.setDate(n.getDate()-(0===o?6:o-1)),1===t&&a.setDate(a.getDate()+7);const i=new Date(a);i.setDate(a.getDate()+4);const d=0===t?s:l,c=(e,t)=>{for(const n of t){const t=e[n];if(t){const e=new Date(t);if(!isNaN(e.getTime()))return e}}return null};for(const s of d){if((s.Initials||s.person||s.Person||s.initials||"").toString().trim().toUpperCase()!==e.toString().trim().toUpperCase())continue;const n=(s.status||"").toString().toLowerCase();if("booked"!==n)continue;const o=c(s,["start_date","Leave_Start","Start","From","StartDate","start","leaveStart"]),l=c(s,["end_date","Leave_End","End","To","EndDate","end","leaveEnd"]);if(!o||!l)continue;const d=o<=i&&l>=a;if(d&&(0,r.cY)(`DEBUG: ${e} is on leave for week ${t}:`,{leaveStart:o.toDateString(),leaveEnd:l.toDateString(),weekStart:a.toDateString(),weekEnd:i.toDateString(),status:n}),!d)continue;const u=[s.reason,s.Reason,s.leave_reason,s.leaveReason,s.type,s.Type,s.leave_type,s.category,s.Category].map(e=>e?e.toString().toLowerCase():"").filter(Boolean).join(" ").replace(/\s+/g," ").trim();return/\b(out[-\s]?of[-\s]?office|ooo)\b/.test(u)?"out-of-office":"away"}return null},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=M(e.Initials,t);if(a)return[a,a,a,a,a];if(0===t&&(!0===e.isOnLeave||!0===e.IsOnLeave))return["away","away","away","away","away"];const o=0===t?"attendanceDays":"nextWeekAttendanceDays";let i=e[o]||e.attendanceDays||e.Attendance_Days||e.Status||"";if((0,r.cY)(`DEBUG: getDailyAttendance for ${e.Initials||e.First}:`,{weekOffset:t,attendanceKey:o,attendanceDays:i,memberStatus:e.Status,memberKeys:Object.keys(e)}),!i||""===i.toString().trim()){const t=n.find(t=>t.Initials===e.Initials);t&&(i=t.Attendance_Days||t.Status||"")}const s=(i||"").toString().trim(),l=s.toLowerCase();if(["wfh","office","away","off-sick","out-of-office"].includes(l)){const e=l;return Array(5).fill(e)}if(!s)return["wfh","wfh","wfh","wfh","wfh"];const d=s.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);return["Monday","Tuesday","Wednesday","Thursday","Friday"].map(e=>{const t=d.find(t=>t.includes(":")&&t.startsWith(e.slice(0,3).toLowerCase()));if(t){const[,e]=t.split(":");return e}return d.includes(e.toLowerCase())||d.includes(e.slice(0,3).toLowerCase())?"office":"wfh"})},T=e=>{switch(e){case"office":return t?b.M.blue:b.M.missedBlue;case"wfh":return b.M.green;case"away":return b.M.subtleGrey;case"off-sick":return b.M.cta;case"out-of-office":return b.M.orange;default:return b.M.grey}},D=(0,a.useMemo)(()=>o.map(e=>{var t,a,s,l;const d=(null===i||void 0===i||null===(t=i.displayName)||void 0===t||null===(a=t.match(/\b\w/g))||void 0===a?void 0:a.join("").toUpperCase())||(null===i||void 0===i||null===(s=i.mail)||void 0===s?void 0:s.substring(0,2).toUpperCase())||"UN",c=n.find(t=>t.Initials===e.Initials),u=(null===c||void 0===c?void 0:c.Attendance_Days)||(null===c||void 0===c?void 0:c.Status)||e.Status||"";(0,r.cY)("processedTeamData debug - ONE TIME ONLY:",{memberInitials:e.Initials,attendanceRecord:c,attendanceDays:u,attendanceRecordsCount:n.length,allAttendanceInitials:n.map(e=>e.Initials),foundMatch:!!c}),e.Initials===(null===(l=o[0])||void 0===l?void 0:l.Initials)&&((0,r.cY)("FULL ATTENDANCE RECORDS:",n),(0,r.cY)("FULL TEAM DATA:",o));const p=M(e.Initials,0),g=M(e.Initials,1);let x="unknown";return x=p||(u.includes("Monday")||u.includes("Tuesday")||u.includes("Wednesday")||u.includes("Thursday")||u.includes("Friday")?"office":"home"),{...e,status:x,attendanceDays:u,isConfirmed:null!==(null===c||void 0===c?void 0:c.Confirmed_At),isUser:e.Initials===d,isOnLeaveCurrentWeek:Boolean(p),isOnLeaveNextWeek:Boolean(g),currentWeekLeaveStatus:p,nextWeekLeaveStatus:g}}),[o,n,i,s,l]),E=((0,d.Zq)({display:"flex",gap:"3px",alignItems:"center"}),e=>(0,d.Zq)({minWidth:"54px",height:"24px",padding:"0 10px",fontSize:"11px",fontWeight:500,background:e?t?"linear-gradient(135deg, rgba(54, 144, 206, 0.35) 0%, rgba(27, 91, 136, 0.26) 100%)":"linear-gradient(135deg, rgba(54, 144, 206, 0.20) 0%, rgba(118, 184, 228, 0.16) 100%)":"transparent",border:`1px solid ${e?b.M.highlight:t?b.M.dark.border:b.M.light.border}`,color:e?t?"#E9F5FF":b.M.highlight:t?b.M.dark.text:b.M.light.text,borderRadius:"6px",lineHeight:1.2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:e?t?"0 4px 6px rgba(42, 116, 168, 0.38)":"0 4px 6px rgba(54, 144, 206, 0.22)":"none","&:hover":{background:e?t?"linear-gradient(135deg, rgba(54, 144, 206, 0.42) 0%, rgba(27, 91, 136, 0.32) 100%)":"linear-gradient(135deg, rgba(54, 144, 206, 0.26) 0%, rgba(118, 184, 228, 0.22) 100%)":t?"rgba(54, 144, 206, 0.15)":"rgba(54, 144, 206, 0.12)"}})),A=(0,d.Zq)({display:"flex",gap:"4px",padding:"2px",borderRadius:"8px",background:t?"rgba(54, 144, 206, 0.12)":"rgba(54, 144, 206, 0.08)",border:"1px solid "+(t?"rgba(54, 144, 206, 0.26)":"rgba(54, 144, 206, 0.22)")}),I=e=>(0,d.Zq)({minWidth:"70px",padding:"2px 14px",height:"26px",fontSize:"11px",fontWeight:600,background:e?t?"linear-gradient(135deg, rgba(54, 144, 206, 0.32) 0%, rgba(26, 100, 152, 0.24) 100%)":"linear-gradient(135deg, rgba(54, 144, 206, 0.18) 0%, rgba(93, 170, 226, 0.14) 100%)":"transparent",color:e?t?"#E9F5FF":b.M.highlight:t?b.M.dark.text:b.M.light.text,border:`1px solid ${e?b.M.highlight:t?b.M.dark.border:b.M.light.border}`,borderRadius:"6px",lineHeight:1.2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:e?t?"0 4px 7px rgba(37, 122, 184, 0.26)":"0 4px 7px rgba(54, 144, 206, 0.18)":"none","&:hover":{background:e?t?"linear-gradient(135deg, rgba(54, 144, 206, 0.42) 0%, rgba(26, 100, 152, 0.32) 100%)":"linear-gradient(135deg, rgba(54, 144, 206, 0.24) 0%, rgba(93, 170, 226, 0.2) 100%)":t?"rgba(54, 144, 206, 0.16)":"rgba(54, 144, 206, 0.1)"}}),F=(0,d.Zq)({marginBottom:"12px",display:"flex",flexDirection:"column",gap:"6px"}),B=(0,d.Zq)({display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",flex:"0 1 auto"}),N=(0,d.Zq)({display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"}),R=(0,d.Zq)({display:"flex",flexDirection:"column",gap:"4px",width:"100%"}),L=(0,d.Zq)({display:"flex",flexWrap:"wrap",gap:"8px",rowGap:"6px",alignItems:"flex-start",padding:"4px 0 0 0",borderTop:"1px solid "+(t?"rgba(59, 130, 246, 0.2)":"rgba(148, 163, 184, 0.3)")}),O=(0,d.Zq)({display:"flex",flexDirection:"column",gap:"4px",minWidth:"0"}),W=(0,d.Zq)(O,{flex:"0 0 auto"}),P=(0,d.Zq)(O,{flex:"1 1 280px"}),$=(0,d.Zq)({display:"flex",gap:"3px",flexWrap:"wrap"}),z=(0,d.Zq)({fontSize:"10px",fontWeight:600,color:t?"#E2E8F0":"#1E3A8A",opacity:.8,textTransform:"uppercase",letterSpacing:"0.04em"}),q=e=>{const t=new Date,n=t.getDay(),a=0===n?-1:n-1;if((0,r.cY)(`DEBUG: getTodayAttendance for ${e.Initials||e.First}:`,{today:t.toDateString(),dayIndex:n,mondayBasedIndex:a,isWeekend:a<0||a>4}),a<0||a>4){return _(e,0)[4]||e.status||"wfh"}const o=_(e,0),i=o[a]||e.status||"wfh";return(0,r.cY)(`DEBUG: Today status for ${e.Initials||e.First}:`,{currentWeekAttendance:o,mondayBasedIndex:a,todayStatus:i}),i},H=(0,a.useMemo)(()=>{const e=y.length>0?y:["current"];return D.filter(t=>{let n=!1,a=!1;if(e.includes("current")){const e=_(t,0),a=0===k.length?e.some(Boolean):k.some(t=>{const n=Bt[t];return n>=0&&void 0!==e[n]}),o=0===C.length||e.some((e,t)=>{if(!e)return!1;if(0===k.length)return C.includes(e);const n=Ft[t];return k.includes(n)&&C.includes(e)});n=a&&o}if(e.includes("next")){const e=_(t,1),n=0===k.length?e.some(Boolean):k.some(t=>{const n=Bt[t];return n>=0&&void 0!==e[n]}),o=0===C.length||e.some((e,t)=>{if(!e)return!1;if(0===k.length)return C.includes(e);const n=Ft[t];return k.includes(n)&&C.includes(e)});a=n&&o}return n||a})},[D,y,k,C]),U=["office","wfh","away","off-sick","out-of-office"];return(0,S.jsxs)("div",{className:(Z=t,(0,d.Zq)({padding:0,background:"transparent",color:Z?b.M.dark.text:b.M.light.text,borderRadius:0})),children:[(0,S.jsxs)("div",{className:F,children:[(0,S.jsx)("div",{className:B,children:(0,S.jsx)("div",{className:N,children:(0,S.jsxs)("div",{className:A,children:[(0,S.jsx)(m.Y,{text:"Daily",iconProps:{iconName:"CalendarDay"},onClick:()=>h("daily"),styles:{root:I("daily"===x)}}),(0,S.jsx)(m.Y,{text:"Weekly",iconProps:{iconName:"CalendarWeek"},onClick:()=>h("weekly"),styles:{root:I("weekly"===x)}})]})})}),(0,S.jsx)("div",{className:R,children:(0,S.jsxs)("div",{className:L,children:[(0,S.jsxs)("div",{className:W,children:[(0,S.jsx)(u.E,{className:z,children:"Week"}),(0,S.jsx)("div",{className:$,children:Et.map(e=>(0,S.jsx)(m.Y,{text:e.label,onClick:()=>{return t=e.key,void v(e=>e.includes(t)?1===e.length?e:e.filter(e=>e!==t):[...e,t]);var t},styles:{root:E(y.includes(e.key))}},e.key))})]}),(0,S.jsxs)("div",{className:P,children:[(0,S.jsx)(u.E,{className:z,children:"Days"}),(0,S.jsx)("div",{className:$,children:At.map(e=>(0,S.jsx)(m.Y,{text:e.label,onClick:()=>{return t=e.key,void w(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},styles:{root:E(k.includes(e.key))}},e.key))})]}),(0,S.jsxs)("div",{className:P,children:[(0,S.jsx)(u.E,{className:z,children:"Status"}),(0,S.jsx)("div",{className:$,children:It.map(e=>(0,S.jsx)(m.Y,{text:e.label,onClick:()=>{return t=e.key,void j(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},styles:{root:E(C.includes(e.key))}},e.key))})]})]})})]}),(0,S.jsx)("div",{style:{marginBottom:"12px"},children:(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(380px, 1fr))",gap:"8px",maxWidth:"100%"},children:"daily"===x?(0,S.jsx)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:(()=>{const e=H.reduce((e,t)=>{const n=(e=>{const t=y.length>0?y:["current"],n=k.length>0?k:Ft,a=(new Date).getDay();if((0===a||6===a)&&0===k.length){const t=q(e);if(U.includes(t))return t}for(const o of t){const t=_(e,"current"===o?0:1);for(const e of n){const n=Bt[e];if(n<0)continue;const a=t[n];if(a&&(0===C.length||C.includes(a)))return a}}if(t.includes("current")){const t=q(e);if(U.includes(t))return t}return _(e,1).find(e=>U.includes(e))||"wfh"})(t);return e[n]||(e[n]=[]),e[n].push(t),e},{}),n={office:"In Office",wfh:"Working From Home",away:"Away","off-sick":"Off Sick","out-of-office":"Out Of Office"};return["wfh","office","away","off-sick","out-of-office"].filter(t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.length)>0}).map(a=>(0,S.jsxs)("div",{style:{background:t?b.M.dark.cardBackground:b.M.light.cardBackground,border:`1px solid ${t?b.M.dark.border:b.M.light.border}`,borderRadius:"8px",padding:"16px",minWidth:"280px",flex:"1",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.07)",transition:"background 0.2s ease, box-shadow 0.2s ease",cursor:"default"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",paddingBottom:"8px",borderBottom:`1px solid ${t?b.M.dark.border:b.M.light.border}`},children:[(0,S.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"6px",backgroundColor:`${T(a)}20`,border:`1px solid ${T(a)}`,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(Dt,{status:a,size:"12px",color:T(a)})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontWeight:"600",fontSize:"14px",color:t?b.M.dark.text:b.M.light.text},children:n[a]}),(0,S.jsxs)("div",{style:{fontSize:"11px",color:t?b.M.dark.subText:b.M.light.subText},children:[e[a].length," ",1===e[a].length?"person":"people"]})]})]}),(0,S.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:e[a].map(e=>{const n=(e=>{const t=new Date,n=t.getDay();if(0===n||6===n){const t=_(e,0),a=_(e,1);return{status:(6===n?a:t)[0]||e.status||"wfh",label:"Monday:",day:"Monday"}}const a=new Date;a.setDate(a.getDate()+1);const o=a.getDay(),r=0===o?-1:o-1;if(r<0||r>4)return{status:e.status||"wfh",label:"",day:""};const i=a.getDate()<t.getDate()||a.getDate()-t.getDate()>=7||a.getMonth()!==t.getMonth();return{status:_(e,i?1:0)[r]||e.status||"wfh",label:"tomorrow:",day:["Monday","Tuesday","Wednesday","Thursday","Friday"][r]||"Tomorrow"}})(e),o=n.status!==a&&""!==n.label;return(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",borderRadius:"4px",background:e.isUser?t?"rgba(74, 155, 79, 0.1)":"rgba(74, 155, 79, 0.05)":t?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)"},children:[(0,S.jsxs)("span",{style:{fontSize:"13px",fontWeight:e.isUser?"700":"400",color:e.isUser?b.M.missedBlue:t?b.M.dark.text:b.M.light.text},children:[e.First||e.Initials,e.isUser&&(0,S.jsx)("span",{style:{fontSize:"9px",color:b.M.missedBlue,marginLeft:"4px",fontWeight:"600",background:`${b.M.missedBlue}15`,padding:"1px 4px",borderRadius:"3px"},children:"(you)"})]}),o&&(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",opacity:.6},children:[(0,S.jsx)("span",{style:{fontSize:"8px",color:t?b.M.dark.subText:b.M.light.subText},children:n.label}),(0,S.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"2px",backgroundColor:T(n.status),display:"flex",alignItems:"center",justifyContent:"center"},title:`${n.day}: ${n.status}`,children:(0,S.jsx)(Dt,{status:n.status,size:"6px",color:"white"})})]})]},e.Initials)})})]},a))})()}):(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"6px",width:"100%"},children:H.sort((e,t)=>e.isUser&&!t.isUser?-1:!e.isUser&&t.isUser?1:(e.First||e.Initials).localeCompare(t.First||t.Initials)).map(e=>{const n=_(e,0),a=_(e,1);return(0,S.jsxs)("div",{style:{background:t?b.M.dark.cardBackground:b.M.light.cardBackground,border:`1px solid ${t?b.M.dark.border:b.M.light.border}`,borderRadius:"6px",padding:"6px 8px",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",minHeight:"32px",width:"100%",boxSizing:"border-box",boxShadow:t?"0 2px 4px rgba(0, 0, 0, 0.2)":"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[(0,S.jsxs)("div",{style:{minWidth:"65px",maxWidth:"65px",fontWeight:e.isUser?"700":"500",color:e.isUser?b.M.missedBlue:t?b.M.dark.text:b.M.light.text,fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.First||e.Initials,e.isUser&&(0,S.jsx)("span",{style:{fontSize:"9px",color:b.M.missedBlue,marginLeft:"4px",fontWeight:"600",background:`${b.M.missedBlue}15`,padding:"1px 4px",borderRadius:"3px"},children:"(you)"})]}),"                    ",(0,S.jsx)("div",{style:{display:"flex",gap:"2px"},children:n.map((t,n)=>{const a=["Mon","Tue","Wed","Thu","Fri"][n],o="out-of-office"===t,r=e.isUser&&g&&!o;return(0,S.jsx)("div",{style:{width:"14px",height:"14px",borderRadius:"2px",backgroundColor:`${T(t)}20`,border:`1px solid ${T(t)}`,cursor:r?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px"},title:o?`${a}: On Annual Leave`:`${a}: ${t}`,onClick:r?n=>{n.stopPropagation();const o=["wfh","office","away","off-sick","out-of-office"],r=o.indexOf(t),i=o[(r+1)%o.length];g(e.Initials,a,i,"current")}:void 0,children:(0,S.jsx)(Dt,{status:t,size:"8px",color:T(t)})},`current-${n}`)})}),(0,S.jsx)("div",{style:{width:"1px",height:"16px",backgroundColor:t?"#4A5568":"#E2E8F0"}}),(0,S.jsx)("div",{style:{display:"flex",gap:"2px"},children:a.map((t,n)=>{const a=["Mon","Tue","Wed","Thu","Fri"][n],o="out-of-office"===t,r=e.isUser&&g&&!o;return(0,S.jsx)("div",{style:{width:"14px",height:"14px",borderRadius:"2px",backgroundColor:`${T(t)}20`,border:`1px solid ${T(t)}`,cursor:r?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"7px",opacity:.8},title:`Next ${a}: ${t}`,onClick:r?n=>{n.stopPropagation();const o=["wfh","office","away","off-sick","out-of-office"],r=o.indexOf(t),i=o[(r+1)%o.length];g(e.Initials,a,i,"next")}:void 0,children:(0,S.jsx)(Dt,{status:t,size:"8px",color:T(t)})},`next-${n}`)})})]},e.Initials)})})})}),0===H.length&&(0,S.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:t?b.M.dark.subText:b.M.light.subText},children:[(0,S.jsx)(f.I,{iconName:"Search",style:{fontSize:"24px",marginBottom:"8px"}}),(0,S.jsx)(u.E,{children:"No team members match the selected filters"})]})]});var Z},Rt=(0,a.forwardRef)((e,t)=>{var n,o,r;const{isDarkMode:i,isLoadingAttendance:s,isLoadingAnnualLeave:l,attendanceError:c,annualLeaveError:p,attendanceRecords:g,teamData:x,annualLeaveRecords:h,futureLeaveRecords:y,userData:v,onAttendanceUpdated:k}=e,[w,C]=(0,a.useState)(!1),[j,M]=(0,a.useState)("current"),[_,T]=(0,a.useState)({}),[D,E]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),[F,B]=(0,a.useState)(!1),L=(null===v||void 0===v||null===(n=v.displayName)||void 0===n||null===(o=n.match(/\b\w/g))||void 0===o?void 0:o.join("").toUpperCase())||(null===v||void 0===v||null===(r=v.mail)||void 0===r?void 0:r.substring(0,2).toUpperCase())||"UN",O=()=>{C(!0),T({Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1})},W=()=>{C(!1),I(null)},$=e=>{const t=(()=>{const e=new Date,t=e.getDay(),n=new Date(e);return n.setDate(e.getDate()-(0===t?6:t-1)),n})();return"next"===e&&t.setDate(t.getDate()+7),t.toISOString().split("T")[0]};(0,a.useImperativeHandle)(t,()=>({focusTable:O,setWeek:e=>{M(e),O()}}));const z=e=>(0,d.Zq)({padding:"16px",background:e?b.M.dark.background:b.M.light.background,color:e?b.M.dark.text:b.M.light.text,borderRadius:"8px"}),q=(0,d.Zq)({display:"flex",flexDirection:"column",gap:"16px",padding:"8px"}),H=(e,t)=>(0,d.Zq)({padding:"8px 16px",cursor:"pointer",transition:"background-color 0.15s ease",fontSize:"13px",fontWeight:"500",background:t?b.M.blue:e?b.M.dark.cardBackground:b.M.light.cardBackground,color:t?"#fff":e?b.M.dark.text:b.M.light.text,border:"none",borderRight:t?"none":`1px solid ${e?b.M.dark.border:b.M.light.border}`,"&:last-child":{borderRight:"none"},"&:hover":{background:t?b.M.blue:e?b.M.dark.sectionBackground:b.M.light.sectionBackground}}),U=(0,d.Zq)({display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"}),Z=(e,t,n)=>(0,d.Zq)({display:"flex",flexDirection:"column",alignItems:"center",padding:"12px 8px",border:`2px solid ${t?b.M.blue:e?b.M.dark.border:b.M.light.border}`,borderRadius:"8px",cursor:n?"not-allowed":"pointer",background:t?b.M.blue+"20":e?b.M.dark.cardBackground:b.M.light.cardBackground,transition:"all 0.2s ease",opacity:n?.5:1,"&:hover":{...n?{}:{background:t?b.M.blue+"30":e?b.M.dark.sectionBackground:b.M.light.sectionBackground,transform:"translateY(-1px)",boxShadow:e?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"}}}),Y=e=>(0,d.Zq)({fontSize:"12px",fontWeight:"600",marginBottom:"4px",color:e?b.M.dark.text:b.M.light.text});return s||l?(0,S.jsxs)("div",{className:z(i),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"36px 40px",background:i?"linear-gradient(135deg, rgba(46, 60, 78, 0.75) 0%, rgba(31, 45, 65, 0.85) 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",borderRadius:"12px",border:"1px solid "+(i?"rgba(255,255,255,0.08)":"rgba(6,23,51,0.06)"),boxShadow:i?"0 12px 30px rgba(0, 0, 0, 0.35)":"0 12px 30px rgba(6, 23, 51, 0.12)"},children:[(0,S.jsx)(f.I,{iconName:"Sync",style:{fontSize:"24px",color:b.M.blue,animation:"spin 1s linear infinite",lineHeight:1}}),(0,S.jsx)(u.E,{style:{color:i?"#E5E7EB":b.M.light.subText,fontWeight:600,letterSpacing:"0.3px",lineHeight:1.4,display:"flex",alignItems:"center"},children:"Loading attendance data..."})]}):c||p?(0,S.jsx)("div",{className:z(i),children:(0,S.jsx)(N.n,{messageBarType:R.H.error,children:c||p})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Nt,{isDarkMode:i,attendanceRecords:g,teamData:x,userData:v,annualLeaveRecords:h,futureLeaveRecords:y,onAttendanceUpdated:k,onDayUpdate:async(e,t,n,a)=>{if(e===L)try{const o=$(a);if(!(await fetch("/api/attendance/updateAttendance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initials:e,weekStart:o,day:t.toLowerCase(),status:n})})).ok)throw new Error("Failed to update attendance");null===k||void 0===k||k([]),B(!0),setTimeout(()=>B(!1),2e3)}catch(o){console.error("Error updating attendance:",o)}}}),F&&(0,S.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",background:b.M.green,color:"white",padding:"12px 20px",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,fontSize:"14px",fontWeight:"500"},children:"\u2713 Attendance updated successfully"}),(0,S.jsx)(P.A,{isOpen:w,onClose:W,title:"Confirm Your Attendance",width:"500px",children:(0,S.jsxs)("div",{className:q,children:[A&&(0,S.jsx)(N.n,{messageBarType:R.H.error,onDismiss:()=>I(null),children:A}),(0,S.jsxs)("div",{children:[(0,S.jsx)(u.E,{style:{fontWeight:"600",marginBottom:"8px",display:"block"},children:"Select Week"}),(0,S.jsxs)("div",{className:(G=i,(0,d.Zq)({display:"flex",gap:"0px",border:`1px solid ${G?b.M.dark.border:b.M.light.border}`,borderRadius:"4px",overflow:"hidden"})),children:[(0,S.jsx)("div",{className:H(i,"current"===j),onClick:()=>M("current"),children:"This Week"}),(0,S.jsx)("div",{className:H(i,"next"===j),onClick:()=>M("next"),children:"Next Week"})]})]}),(0,S.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,S.jsx)(u.E,{style:{fontWeight:"600",marginBottom:"8px",display:"block"},children:"Days in Office"}),(0,S.jsx)("div",{className:U,children:["Monday","Tuesday","Wednesday","Thursday","Friday"].map(e=>{const t=_[e]||!1;return(0,S.jsxs)("div",{className:Z(i,t,!1),onClick:()=>(e=>{T(t=>({...t,[e]:!t[e]}))})(e),children:[(0,S.jsx)(u.E,{className:Y(i),children:e.slice(0,3)}),(0,S.jsx)(f.I,{iconName:t?"CityNext":"Home",className:(n=t,(0,d.Zq)({fontSize:"16px",color:n?b.M.blue:b.M.grey}))})]},e);var n})})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,S.jsx)(m.Y,{text:"Cancel",onClick:W,disabled:D}),(0,S.jsx)(m.Y,{text:D?"Saving...":"Confirm Attendance",primary:!0,onClick:async()=>{E(!0),I(null);try{const t=$(j),n=Object.keys(_).filter(e=>_[e]).join(",")||"office";if(await fetch("/api/attendance/updateAttendance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initials:L,weekStart:t,attendanceDays:n})}),k)try{const e=await fetch("/api/attendance/getAttendance",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();if(t.success&&t.attendance){const e=t.attendance.map(e=>({Attendance_ID:0,Entry_ID:0,First_Name:e.First,Initials:e.Initials,Level:"",Week_Start:(new Date).toISOString().split("T")[0],Week_End:(new Date).toISOString().split("T")[0],ISO_Week:Math.ceil((((new Date).getTime()-new Date((new Date).getFullYear(),0,1).getTime())/864e5+1)/7),Attendance_Days:"office"===e.Status?"Monday,Tuesday,Wednesday,Thursday,Friday":"",Confirmed_At:e.IsConfirmed?(new Date).toISOString():null,status:e.Status,isConfirmed:e.IsConfirmed,isOnLeave:e.IsOnLeave}));k(e)}}}catch(e){console.error("Error refreshing attendance data:",e),k([])}W()}catch(t){console.error("Error saving attendance:",t),I(t instanceof Error?t.message:"Failed to save attendance")}finally{E(!1)}},disabled:D,styles:{root:{background:b.M.blue,borderColor:b.M.blue},rootHovered:{background:b.M.blue+"CC",borderColor:b.M.blue+"CC"},rootDisabled:{background:b.M.grey,color:"#fff",borderColor:b.M.grey}}})]})]})})]});var G}),Lt=Rt;var Ot=n(74586);const Wt=e=>({background:e?"linear-gradient(135deg, rgba(5, 12, 26, 0.98) 0%, rgba(9, 22, 44, 0.94) 52%, rgba(13, 35, 63, 0.9) 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",borderRadius:"16px",padding:"24px",boxShadow:e?"0 20px 44px rgba(2, 6, 17, 0.72)":"0 16px 40px rgba(13, 47, 96, 0.18)",border:"1px solid "+(e?"rgba(59, 130, 246, 0.26)":"rgba(148, 163, 184, 0.16)"),width:"100%",maxWidth:"920px",margin:"0 auto",transition:"background 0.25s ease, box-shadow 0.25s ease",display:"flex",flexDirection:"column",gap:"20px",color:e?b.M.dark.text:b.M.light.text}),Pt=e=>({background:e?"linear-gradient(135deg, rgba(7, 16, 32, 0.94) 0%, rgba(11, 30, 55, 0.86) 55%, rgba(10, 39, 72, 0.8) 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:"1px solid "+(e?"rgba(125, 211, 252, 0.24)":"rgba(148, 163, 184, 0.22)"),borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:e?"0 18px 32px rgba(2, 6, 17, 0.58)":"0 12px 28px rgba(13, 47, 96, 0.12)",backdropFilter:"blur(12px)",transition:"transform 0.2s ease, box-shadow 0.2s ease",display:"flex",flexDirection:"column",gap:"16px"}),$t=(e,t)=>({padding:"6px 12px",borderRadius:"6px",border:`1px solid ${t}`,background:e?`linear-gradient(135deg, ${t}40 0%, rgba(8, 23, 42, 0.75) 100%)`:`linear-gradient(135deg, #FFFFFF 0%, ${t}1f 100%)`,color:e?"#E9F5FF":t,cursor:"pointer",fontSize:"11px",fontWeight:500,boxShadow:e?"0 6px 16px rgba(0, 0, 0, 0.35)":"0 6px 16px rgba(13, 47, 96, 0.12)",transition:"transform 0.15s ease, box-shadow 0.15s ease"}),zt=e=>{let{status:t,size:n,color:a}=e;if("office"===t)return(0,S.jsx)("img",{src:Ot.A,alt:"Helix Office",style:{width:n,height:n,objectFit:"contain",filter:"brightness(0) saturate(100%) invert(17%) sepia(41%) saturate(1344%) hue-rotate(195deg) brightness(95%) contrast(91%)"}});if("away"===t)return(0,S.jsx)(k.PAB,{style:{color:a,fontSize:n}});const o="off-sick"===t?"Health":"out-of-office"===t?"Suitcase":"wfh"===t?"Home":"Help";return(0,S.jsx)(f.I,{iconName:o,style:{color:a,fontSize:n}})},qt=(0,a.forwardRef)((e,t)=>{var n,o,r,i;let{isDarkMode:s,attendanceRecords:l,annualLeaveRecords:d,futureLeaveRecords:c,userData:u,onSave:p,onClose:g}=e;const x=["Monday","Tuesday","Wednesday","Thursday","Friday"],h=()=>{const e=new Date,t=e.getDay(),n=0===t?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+n),a},y=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,v=y(h()),k=new Date(h());k.setDate(k.getDate()+7);const w=y(k),C=(null===u||void 0===u||null===(n=u.displayName)||void 0===n||null===(o=n.match(/\b\w/g))||void 0===o?void 0:o.join("").toUpperCase())||(null===u||void 0===u||null===(r=u.mail)||void 0===r?void 0:r.substring(0,2).toUpperCase())||(null===u||void 0===u||null===(i=u[0])||void 0===i?void 0:i.Initials)||"";console.log("\ud83d\udd0d userInitials:",C),console.log("\ud83d\udd0d userData:",u);const j=(0,a.useMemo)(()=>[...d,...c],[d,c]),M=(0,a.useMemo)(()=>{console.log("\ud83d\udd0d Calculating initial state..."),console.log("\ud83d\udd0d attendanceRecords:",l),console.log("\ud83d\udd0d userInitials in useMemo:",C);const e={[v]:{},[w]:{}},t={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday"},n=l.filter(e=>e.Initials===C);return console.log("\ud83d\udd0d Filtered attendance records:",n),n.forEach(n=>{if(n.Attendance_Days){console.log("\ud83d\udd0d Processing record:",n);const a=n.Attendance_Days.split(",").map(e=>e.trim());console.log("\ud83d\udd0d Day statuses from record:",a),a.forEach(a=>{const[o,r]=a.includes(":")?a.split(":"):[a,"office"],i=t[o]||o;x.includes(i)&&(e[n.Week_Start][i]=r||"wfh",console.log("\ud83d\udd0d Set state for",n.Week_Start,i,"to",r))})}}),[v,w].forEach(t=>{x.forEach(n=>{e[t][n]||(e[t][n]="wfh",console.log("\ud83d\udd0d Set default state for",t,n,"to wfh"))})}),console.log("\ud83d\udd0d Initial state calculated:",e),e},[l,C,v,w]),[_,T]=(0,a.useState)(M);console.log("\ud83d\udd0d LocalAttendance state:",_);const[D,E]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),[F,B]=(0,a.useState)(!1);(0,a.useImperativeHandle)(t,()=>({setWeek:()=>{},focusTable:()=>{}}));const N=["wfh","office","away","off-sick","out-of-office"],R=e=>{const t=new Date(e+"T00:00:00"),n=new Date(t);n.setDate(t.getDate()+4);const a=e=>e.toLocaleDateString("en-GB",{day:"numeric",month:"short"});return`${a(t)} - ${a(n)}`},L=(e,t)=>(0,S.jsxs)("div",{style:Pt(s),children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid "+(s?"rgba(148, 163, 184, 0.28)":"rgba(148, 163, 184, 0.22)")},children:[(0,S.jsx)("h3",{style:{margin:0,color:s?"#FFFFFF":b.M.light.text,fontSize:"16px",fontWeight:600,letterSpacing:"0.01em"},children:e}),(0,S.jsx)("span",{style:{fontSize:"12px",color:s?"rgba(226, 232, 240, 0.75)":b.M.greyText},children:R(t)})]}),(A||F)&&(0,S.jsx)("div",{style:{marginBottom:"12px",padding:"10px 12px",borderRadius:"8px",border:`1px solid ${A?b.M.cta:b.M.green}`,background:A?s?"linear-gradient(135deg, rgba(214, 85, 65, 0.22) 0%, rgba(127, 29, 29, 0.45) 100%)":`${b.M.cta}10`:s?"linear-gradient(135deg, rgba(32, 178, 108, 0.24) 0%, rgba(17, 99, 67, 0.4) 100%)":`${b.M.green}10`,color:s?b.M.dark.text:b.M.light.text,boxShadow:s?"0 6px 16px rgba(8, 23, 44, 0.35)":"0 6px 16px rgba(13, 47, 96, 0.1)"},children:A?"Could not save attendance. Please try again.":"Attendance saved."}),(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))",gap:"12px"},children:x.map((e,n)=>{var a;const o=(null===(a=_[t])||void 0===a?void 0:a[e])||"home",r=((e,t)=>{const n=new Date(e+"T00:00:00"),a=new Date(n);a.setDate(a.getDate()+t);const o=y(a);return j.some(e=>"booked"===e.status&&e.person.trim().toLowerCase()===C.toLowerCase()&&o>=e.start_date&&o<=e.end_date)})(t,n),i=(e=>{switch(e){case"office":return{icon:"office",color:b.M.missedBlue,label:"In Office",bgColor:`${b.M.missedBlue}20`,darkBg:"linear-gradient(135deg, rgba(13, 47, 96, 0.55) 0%, rgba(9, 25, 49, 0.68) 100%)"};case"wfh":default:return{icon:"wfh",color:b.M.green,label:"WFH",bgColor:`${b.M.green}20`,darkBg:"linear-gradient(135deg, rgba(32, 178, 108, 0.32) 0%, rgba(15, 63, 63, 0.55) 100%)"};case"away":return{icon:"away",color:b.M.subtleGrey,label:"Away",bgColor:`${b.M.subtleGrey}20`,darkBg:"linear-gradient(135deg, rgba(107, 114, 128, 0.38) 0%, rgba(55, 65, 81, 0.48) 100%)"};case"off-sick":return{icon:"off-sick",color:b.M.cta,label:"Off Sick",bgColor:`${b.M.cta}20`,darkBg:"linear-gradient(135deg, rgba(214, 85, 65, 0.3) 0%, rgba(127, 29, 29, 0.45) 100%)"};case"out-of-office":return{icon:"out-of-office",color:b.M.orange,label:"Out-Of-Office",bgColor:`${b.M.orange}20`,darkBg:"linear-gradient(135deg, rgba(255, 140, 0, 0.28) 0%, rgba(146, 64, 14, 0.45) 100%)"}}})(o);return(0,S.jsxs)("div",{onClick:r?void 0:()=>((e,t)=>{console.log("\ud83d\udd0d toggleDay called with weekStart:",e,"day:",t),T(n=>{var a;console.log("\ud83d\udd0d Previous localAttendance:",n);const o=(null===(a=n[e])||void 0===a?void 0:a[t])||"wfh";console.log("\ud83d\udd0d Current status:",o);const r=(N.indexOf(o)+1)%N.length,i=N[r];console.log("\ud83d\udd0d Next status:",i);const s={...n,[e]:{...n[e],[t]:i}};return console.log("\ud83d\udd0d New localAttendance state:",s),s})})(t,e),style:{padding:"16px 10px",borderRadius:"10px",border:`2px solid ${r?"rgba(148, 163, 184, 0.45)":i.color}`,background:r?s?"linear-gradient(135deg, rgba(107, 114, 128, 0.24) 0%, rgba(55, 65, 81, 0.42) 100%)":`${b.M.greyText}20`:s?i.darkBg:i.bgColor,cursor:r?"not-allowed":"pointer",textAlign:"center",transition:"transform 0.2s ease, box-shadow 0.2s ease",opacity:r?.6:1,boxShadow:s?"0 8px 18px rgba(8, 23, 44, 0.35)":"0 8px 18px rgba(13, 47, 96, 0.1)"},children:[(0,S.jsx)("div",{style:{fontSize:"12px",fontWeight:600,color:s?"#E9F5FF":b.M.light.text,marginBottom:"10px",letterSpacing:"0.05em"},children:e.substring(0,3).toUpperCase()}),(0,S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"26px"},children:r?(0,S.jsx)(f.I,{iconName:"Airplane",style:{color:s?"#CBD5F5":b.M.greyText,fontSize:"18px"}}):(0,S.jsx)(zt,{status:o,size:"18px",color:i.color})}),(0,S.jsx)("div",{style:{fontSize:"11px",color:s?"rgba(226, 232, 240, 0.72)":b.M.light.subText,marginTop:"6px"},children:r?"Away":i.label})]},e)})}),(0,S.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"14px",flexWrap:"wrap"},children:[(0,S.jsx)("button",{type:"button",onClick:()=>T(e=>({...e,[t]:x.reduce((e,t)=>({...e,[t]:"wfh"}),{})})),style:$t(s,b.M.green),children:"All WFH"}),(0,S.jsx)("button",{type:"button",onClick:()=>T(e=>({...e,[t]:x.reduce((e,t)=>({...e,[t]:"office"}),{})})),style:$t(s,b.M.missedBlue),children:"All Office"})]})]},t);return(0,S.jsxs)("div",{style:Wt(s),children:[(0,S.jsxs)("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"6px"},children:[(0,S.jsx)("h2",{style:{margin:0,color:s?"#FFFFFF":b.M.light.text,fontSize:"19px",fontWeight:600,letterSpacing:"0.01em"},children:"Confirm Your Attendance"}),(0,S.jsx)("p",{style:{margin:0,fontSize:"12px",color:s?"rgba(226, 232, 240, 0.7)":b.M.greyText},children:"Tap each day to cycle through Office, WFH, Away, Sick or OOO. We auto mark booked leave."})]}),L("This Week",v),L("Next Week",w),(0,S.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"12px",paddingTop:"18px",borderTop:"1px solid "+(s?"rgba(96, 165, 250, 0.24)":"rgba(148, 163, 184, 0.24)")},children:[(0,S.jsx)(m.Y,{text:"Cancel",onClick:g,styles:{root:{border:`1px solid ${s?"rgba(148, 163, 184, 0.45)":b.M.greyText}`,backgroundColor:s?"rgba(15, 35, 61, 0.6)":"transparent",color:s?b.M.dark.text:b.M.light.text,transition:"transform 0.15s ease, background-color 0.15s ease"},rootHovered:{backgroundColor:s?"rgba(54, 144, 206, 0.22)":"rgba(54, 144, 206, 0.12)",borderColor:b.M.highlight,color:b.M.highlight}}}),(0,S.jsx)(m.Y,{text:D?"Saving...":"Save Attendance",onClick:async()=>{console.log("\ud83d\udd0d Save button clicked"),E(!0),I(null),B(!1);try{for(const e of[v,w]){const t=_[e]||{};console.log("\ud83d\udd0d Day statuses for",e,":",t);const n=Object.entries(t).map(e=>{let[t,n]=e;return`${{Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri"}[t]||t}:${n}`}).join(",");console.log("\ud83d\udd0d Calling onSave with weekStart:",e,"days:",n),await p(e,n)}console.log("\ud83d\udd0d Save completed successfully"),B(!0),setTimeout(()=>{g()},700)}catch(e){console.error("\u274c Error saving attendance:",e);const t=e instanceof Error?e.message:"Failed to save attendance";I(t)}finally{E(!1)}},disabled:D,primary:!0,styles:{root:{background:"linear-gradient(135deg, #0d2f60 0%, #174a92 100%)",border:"1px solid #174a92",color:"#ffffff",boxShadow:s?"0 10px 28px rgba(8, 23, 44, 0.5)":"0 10px 24px rgba(13, 47, 96, 0.28)",transition:"transform 0.15s ease, box-shadow 0.15s ease"},rootHovered:{background:"linear-gradient(135deg, #174a92 0%, #1c5fb8 100%)",borderColor:"#1c5fb8"},rootPressed:{background:"linear-gradient(135deg, #123a78 0%, #174a92 100%)",borderColor:"#123a78"},rootDisabled:{backgroundColor:s?"rgba(59, 130, 246, 0.2)":"rgba(148, 163, 184, 0.2)",borderColor:"transparent",color:s?"rgba(226, 232, 240, 0.5)":"rgba(55, 65, 81, 0.5)"}}})]})]})}),Ht=qt;var Ut=n(18636);const Zt=(0,E.T)();function Yt(e){try{const t=n(75273);if(Array.isArray(t)&&t.length>0){const n=new Date,a=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0"),r=`${a}-${o}-${String(n.getDate()).padStart(2,"0")}`;t[0].Touchpoint_Date=r,t[0].Date_Created=r,e&&t.forEach(t=>{t.Point_of_Contact=e})}return t}catch(t){return[]}}const Gt=(0,a.lazy)(()=>n.e(152).then(n.bind(n,45152))),Kt=(0,a.lazy)(()=>n.e(600).then(n.bind(n,29600))),Vt=(0,a.lazy)(()=>Promise.all([n.e(884),n.e(48),n.e(744)]).then(n.bind(n,42001))),Jt=(0,a.lazy)(()=>n.e(279).then(n.bind(n,73279))),Qt=(0,a.lazy)(()=>n.e(903).then(n.bind(n,22903))),Xt=(0,a.lazy)(()=>n.e(728).then(n.bind(n,8728))),en=(0,a.lazy)(()=>n.e(634).then(n.bind(n,64634))),tn={"Update Attendance":1,"Confirm Attendance":1,"Open Matter":2,"Review Instructions":3,"Review ID":3,"Verify ID":3,"Assess Risk":4,"Submit to CCL":5,"Create a Task":4,"Request CollabSpace":5,"Save Telephone Note":6,"Save Attendance Note":7,"Request ID":8,"Open a Matter":9,"Request Annual Leave":10,"Unclaimed Enquiries":11},nn=[{title:"Update Attendance",icon:"Calendar"},{title:"Create a Task",icon:"Checklist"},{title:"Save Telephone Note",icon:"Comment"},{title:"Request Annual Leave",icon:"PalmTree"},{title:"Book Space",icon:"Room"}],an=e=>{const t=e?"%23FFFFFF":"%23061733",n=e?"0.06":"0.035";return`url("data:image/svg+xml,${`<svg xmlns='http://www.w3.org/2000/svg' width='900' height='900' viewBox='0 0 900 900'>\n    <g transform='rotate(-12 450 450)'>\n      <path d='M160 242 C160 226 176 210 200 210 L560 210 Q640 235 560 274 L200 274 C176 274 160 258 160 242 Z' fill='${t}' fill-opacity='${n}'/>\n      <path d='M160 362 C160 346 176 330 200 330 L560 330 Q640 355 560 394 L200 394 C176 394 160 378 160 362 Z' fill='${t}' fill-opacity='${n}'/>\n      <path d='M160 482 C160 466 176 450 200 450 L560 450 Q640 475 560 514 L200 514 C176 514 160 498 160 482 Z' fill='${t}' fill-opacity='${n}'/>\n    </g>\n  </svg>`}")`},on=e=>(0,d.Zq)({background:e?b.M.darkBlue:"#ffffff",minHeight:"100vh",boxSizing:"border-box",position:"relative","&::before":{content:'""',position:"fixed",top:0,left:0,right:0,bottom:0,background:"none",backgroundImage:an(e),backgroundRepeat:"no-repeat",backgroundPosition:e?"right -120px top -80px":"right -140px top -100px",backgroundSize:"min(52vmin, 520px)",pointerEvents:"none",zIndex:0}}),rn=((0,d.Zq)({display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",padding:"10px 0",gap:"16px"}),(0,d.Zq)({display:"flex",flexDirection:"column",position:"relative",zIndex:1}),(0,d.Zq)({animation:"fadeIn 0.5s ease-in-out"}),(0,d.Zq)({backgroundColor:"#ffffff",padding:"16px",borderRadius:0,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",marginBottom:"24px","@media (max-width: 600px)":{padding:"12px"}}),(0,d.Zq)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"16px","@media (min-width: 1000px)":{gridTemplateColumns:"repeat(5, 1fr)"}}),(0,d.Zq)({display:"grid",paddingLeft:"80px",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"16px",alignItems:"center",width:"100%"}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];for(const[a,o]of Object.entries(e)){const e=t?`${t}.${a}`:a;o&&"object"===typeof o&&!Array.isArray(o)?n=n.concat(rn(o,e)):n.push({key:e,value:o})}return n}),sn=e=>{if(!e||"object"!==typeof e)return(0,r.UT)("Invalid context object:",e),[];return rn(e).map(e=>{let{key:t,value:n}=e;return{key:t,value:"object"===typeof n?JSON.stringify(n):String(n)}})},ln=e=>[{key:"key",name:"Key",fieldName:"key",minWidth:150,maxWidth:200,isResizable:!0,styles:{root:{color:e?b.M.dark.text:b.M.light.text}}},{key:"value",name:"Value",fieldName:"value",minWidth:300,maxWidth:600,isResizable:!0,styles:{root:{color:e?b.M.dark.text:b.M.light.text}}}],dn=e=>{const t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const n=new Date(t.getFullYear(),0,4);return Math.round(((t.getTime()-n.getTime())/864e5+1)/7)+1},cn=e=>{const[t,n,a]=e.split("/");return`${a}-${n.padStart(2,"0")}-${t.padStart(2,"0")}`},un=e=>{if(!e)return null;if(e instanceof Date)return isNaN(e.getTime())?null:e;const t=String(e).trim();if(!t)return null;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)){const e=cn(t),n=new Date(e);return isNaN(n.getTime())?null:n}const n=new Date(t);return isNaN(n.getTime())?null:n};let pn=null,gn=null,xn=null,hn=null,mn=null,fn=null,yn=null,bn=null,vn=null,kn=null,Sn=null,wn=null,Cn=null,jn=null,Mn=null;let _n=null,Tn=null;const Dn=e=>{let{dataKey:t,dataForm:n}=e;const o=a.useRef(null);return(0,a.useEffect)(()=>{if(o.current){o.current.innerHTML="";const e=document.createElement("script");return e.src="https://www.cognitoforms.com/f/seamless.js",e.setAttribute("data-key",t),e.setAttribute("data-form",n),e.async=!0,o.current.appendChild(e),()=>{o.current&&(o.current.innerHTML="")}}},[t,n]),(0,S.jsx)("div",{ref:o})},En=e=>{var t,n,f,v,k,w,E,I,F,B,N,R,L,O,W,$,z,q,U,Z,Y,G;let{context:K,userData:V,enquiries:Q,matters:X,instructionData:ee,onAllMattersFetched:te,onOutstandingBalancesFetched:ne,onPOID6YearsFetched:ae,onTransactionsFetched:oe,teamData:re,onBoardroomBookingsFetched:se,onSoundproofBookingsFetched:le,isInMatterOpeningWorkflow:de=!1,onImmediateActionsChange:ce}=e;const{isDarkMode:ue,toggleTheme:pe}=(0,M.DP)(),{setContent:ge}=(0,_.M9)(),xe=((0,Re.S)(),!0),[he,me]=(0,a.useState)([]),fe=(0,a.useMemo)(()=>{var e;return(null!==(e=null!==re&&void 0!==re?re:he)&&void 0!==e?e:[]).filter(e=>"active"===e.status||void 0===e.status).map(e=>{var t,n,a,o,r;return{First:null!==(t=e.First)&&void 0!==t?t:"",Initials:null!==(n=e.Initials)&&void 0!==n?n:"","Entra ID":null!==(a=e["Entra ID"])&&void 0!==a?a:"",Nickname:null!==(o=null!==(r=e.Nickname)&&void 0!==r?r:e.First)&&void 0!==o?o:""}})},[re,he]),[be,ve]=(0,a.useState)(null),[ke,Se]=(0,a.useState)(!1),we=(0,a.useRef)(null),Ce=(0,a.useRef)(null),je=(0,a.useRef)(!1),[Me,_e]=(0,a.useState)(0),[Te,De]=(0,a.useState)(0),[Ee,Ae]=(0,a.useState)(0),[Ie,Fe]=(0,a.useState)(10),[Be,Ge]=(0,a.useState)(20),[Ke,Ve]=(0,a.useState)(15),[Je,Xe]=(0,a.useState)({hours:120,money:1e3}),[et,tt]=(0,a.useState)(8),[nt,ot]=(0,a.useState)(18),[rt,it]=(0,a.useState)(950),[lt,dt]=(0,a.useState)(12),[ct,ut]=(0,a.useState)(18),[pt,gt]=(0,a.useState)(17),[xt,ht]=(0,a.useState)({hours:110,money:900}),[mt,yt]=(0,a.useState)(!1),[bt,vt]=(0,a.useState)([]),[kt,St]=(0,a.useState)([]),[wt,Ct]=(0,a.useState)(null),[jt,Mt]=(0,a.useState)(null),[_t,Dt]=(0,a.useState)(!1),[Et,At]=(0,a.useState)(null),[It,Ft]=(0,a.useState)(""),[Bt,Nt]=(0,a.useState)(""),[Rt,Ot]=(0,a.useState)(null),[Wt,Pt]=(0,a.useState)(!1),[$t,zt]=(0,a.useState)(new Set),[qt,Yt]=(0,a.useState)(""),[an,rn]=(0,a.useState)(""),[En,An]=(0,a.useState)([]),[In,Fn]=(0,a.useState)(null),[Bn,Nn]=(0,a.useState)([]),[Rn,Ln]=(0,a.useState)(null),[On,Wn]=(0,a.useState)(!1),[Pn,$n]=(0,a.useState)(!1),[zn,qn]=(0,a.useState)(null),[Hn,Un]=(0,a.useState)(null),[Zn,Yn]=(0,a.useState)(null),[Gn,Kn]=(0,a.useState)(null),[Vn,Jn]=(0,a.useState)([]),[Qn,Xn]=(0,a.useState)(null),[ea,ta]=(0,a.useState)(null),[na,aa]=(0,a.useState)(!1),[oa,ra]=(0,a.useState)(!1),[ia,sa]=(0,a.useState)([]),[la,da]=(0,a.useState)(null),[ca,ua]=(0,a.useState)(!0),[pa,ga]=(0,a.useState)(null),[xa,ha]=(0,a.useState)(null),[ma,fa]=(0,a.useState)(!1),ya=(0,a.useRef)(null),[ba,va]=(0,a.useState)(!1),[ka,Sa]=(0,a.useState)(!1),[wa,Ca]=(0,a.useState)(null),[ja,Ma]=(0,a.useState)(!1),[_a,Ta]=(0,a.useState)(null),Da=!On&&!Pn;a.useEffect(()=>{!ca||On||Pn||ua(!1)},[ca,On,Pn]),a.useEffect(()=>{if(!ca)return;const e=setTimeout(()=>{ca&&((0,r.UT)("[ImmediateActions] Hard timeout reached, forcing isActionsLoading = false"),ua(!1))},5e3);return()=>clearTimeout(e)},[ca]);const[Ea,Aa]=(0,a.useState)(!1),[Ia,Fa]=(0,a.useState)(!1),[Ba,Na]=(0,a.useState)(!1),[Ra,La]=(0,a.useState)([]),[Oa,Wa]=(0,a.useState)(null),[Pa,$a]=(0,a.useState)({boardroomBookings:[],soundproofBookings:[]}),[za,qa]=(0,a.useState)([]),Ha=(0,a.useMemo)(()=>(Q||[]).filter(e=>"team@helix-law.com"===(e.Point_of_Contact||"").toLowerCase()),[Q]);(0,a.useEffect)(()=>{(async()=>{qa(Ze),sessionStorage.getItem("prefetchedBlocksData")||sessionStorage.setItem("prefetchedBlocksData",JSON.stringify(Ye))})()},[]),(0,a.useEffect)(()=>{const e=()=>{Fa((0,Le.es)(de))};e();const t=setInterval(e,2e3);return()=>clearInterval(t)},[de]),(0,a.useEffect)(()=>{const e=()=>{Na((()=>{const e=localStorage.getItem("pitchBuilderState");if(!e)return!1;try{const t=JSON.parse(e);return Boolean(t&&t.enquiryId)}catch{return!1}})())};e();const t=setInterval(e,2e3);return()=>clearInterval(t)},[]);const[Ua,Za]=(0,a.useState)([]),Ya=ee||Ua;(0,a.useEffect)(()=>{if(!ee){const e=ze.map(e=>({prospectId:e.prospectId,deals:e.deals||[],instructions:e.instructions||[],documents:e.documents||[],riskAssessment:e.riskAssessment||null,idVerification:e.idVerification||null,matter:e.matter||null}));Za(e)}},[xe,ee]),(0,a.useEffect)(()=>{V&&V[0]&&(rn((V[0].Email||"").toLowerCase().trim()),Yt(V[0].FullName||""))},[V]),(0,a.useEffect)(()=>{var e,t;const n=((null===V||void 0===V||null===(e=V[0])||void 0===e?void 0:e.Email)||"").toLowerCase().trim(),a=((null===V||void 0===V||null===(t=V[0])||void 0===t?void 0:t.Initials)||"").toUpperCase().trim(),o=n||a?`${n}|${a}`:null;o?Cn!==o&&(Cn=o,yn=null,bn=null,vn=null,kn=null,Sn=null,wn=null,qn(null),Yn(null),Kn(null)):Cn=null},[V]),(0,a.useEffect)(()=>{if(je.current)return;var e;null===vn?(async()=>{var e;if(null===V||void 0===V||!V[0])return;const t=V[0],n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,a=(null===t||void 0===t||null===(e=t.Email)||void 0===e?void 0:e.toLowerCase().includes("luke"))||"LW"===(null===t||void 0===t?void 0:t.Initials),o="LZ"===(null===t||void 0===t?void 0:t.Initials);let r=null!==t&&void 0!==t&&t["Clio ID"]?String(t["Clio ID"]):null,i=null!==t&&void 0!==t&&t.EntraID?String(t.EntraID):null;if((n||a||o)&&re){const e=re.find(e=>"AC"===e.Initials||"Alex"===e.First);e&&(e["Clio ID"]&&(r=String(e["Clio ID"])),e["Entra ID"]&&(i=String(e["Entra ID"])))}if(r||i)try{const e=new URL("/api/reporting/management-datasets",window.location.origin);e.searchParams.set("datasets","recoveredFeesSummary"),r&&e.searchParams.set("clioId",r),i&&e.searchParams.set("entraId",i);const t=await fetch(e.toString(),{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)return void console.error("\u274c Failed to fetch recovered fees summary:",t.status,t.statusText);const n=(await t.json()).recoveredFeesSummary;if(!n||"object"!==typeof n)return;const a=Number(n.currentMonthTotal)||0,o=Number(n.previousMonthTotal)||0;vn=a,Sn=o,Yn(a),Kn(o),je.current=!0}catch(s){console.error("\u274c Error fetching recovered fees summary:",s)}})():(je.current=!0,Yn(vn),Kn(null!==(e=Sn)&&void 0!==e?e:0))},[re,null===V||void 0===V||null===(t=V[0])||void 0===t?void 0:t.EntraID,null===V||void 0===V||null===(n=V[0])||void 0===n?void 0:n["Entra ID"],null===V||void 0===V||null===(f=V[0])||void 0===f?void 0:f.Initials,null===V||void 0===V||null===(v=V[0])||void 0===v?void 0:v["Clio ID"]]);const Ga=(0,a.useMemo)(()=>{var e;if(X&&X.length>0)return X;if(!pa)return[];const t=(null===V||void 0===V||null===(e=V[0])||void 0===e?void 0:e.FullName)||"";return pa.map(e=>(0,Oe.NY)(e,t,"legacy_all"))},[X,pa,V]),[Ka,Va]=(0,a.useState)(()=>sessionStorage.getItem("reviewedInstructionIds")||""),Ja=()=>{const e=new Date,t=e.getDay(),n=0===t?-6:1-t,a=new Date(e);return a.setDate(e.getDate()+n),a},Qa=e=>{const t=new Date(e);t.setDate(e.getDate()+6);const n={day:"2-digit",month:"2-digit",year:"numeric"},a=e.toLocaleDateString("en-GB",n),o=t.toLocaleDateString("en-GB",n);return`${e.toLocaleDateString("en-GB",{weekday:"long"})}, ${a} - ${t.toLocaleDateString("en-GB",{weekday:"long"})}, ${o}`},Xa=(e,t)=>{Nn(t=>t.filter(t=>t.id!==e)),La(t=>t.filter(t=>t.id!==e))},eo=(null===V||void 0===V||null===(k=V[0])||void 0===k?void 0:k.Initials)||"";(0,a.useEffect)(()=>{eo&&(we.current=eo)},[eo]);const to=we.current||eo;(0,a.useEffect)(()=>{(async()=>{try{const e=await fetch("https://www.gov.uk/bank-holidays.json");if(!e.ok)throw new Error(`Failed to fetch bank holidays: ${e.status}`);const t=await e.json(),n=(new Date).getFullYear(),a=(t["england-and-wales"].events||[]).filter(e=>new Date(e.date).getFullYear()===n).map(e=>e.date);zt(new Set(a))}catch(e){console.error("Error fetching bank holidays:",e)}})()},[]),(0,a.useEffect)(()=>{const e=l("formsFavorites"),t=l("resourcesFavorites");e&&vt(JSON.parse(e)),t&&St(JSON.parse(t))},[]),(0,a.useEffect)(()=>{const e=e=>{"formsFavorites"===e.key&&e.newValue&&vt(JSON.parse(e.newValue)),"resourcesFavorites"===e.key&&e.newValue&&St(JSON.parse(e.newValue))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),(0,a.useEffect)(()=>{if(Q&&an){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=Ja();n.setHours(0,0,0,0);const a=new Date(e);a.setDate(a.getDate()-7);const o=new Date(n);o.setDate(o.getDate()-7),o.setHours(0,0,0,0);const r=new Date(a),i=new Date(e.getFullYear(),e.getMonth()-1,1),s=new Date(e.getFullYear(),e.getMonth(),0),l=Q.map(e=>{var t;return{...e,ID:e.ID||(null===(t=e.id)||void 0===t?void 0:t.toString()),Touchpoint_Date:e.Touchpoint_Date||e.datetime,Point_of_Contact:e.Point_of_Contact||e.poc,Area_of_Work:e.Area_of_Work||e.aow,Type_of_Work:e.Type_of_Work||e.tow,Method_of_Contact:e.Method_of_Contact||e.moc,First_Name:e.First_Name||e.first,Last_Name:e.Last_Name||e.last,Email:e.Email||e.email,Phone_Number:e.Phone_Number||e.phone,Value:e.Value||e.value,Initial_first_call_notes:e.Initial_first_call_notes||e.notes,Call_Taker:e.Call_Taker||e.rep}}),d="LZ"===(to||"").toUpperCase(),c=e=>{const t=(e||"").toLowerCase().trim();if(d){return new Set(["ac","alex cook","ac@helix-law.com"]).has(t)}return t===an||t===to.toLowerCase().trim()},u=l.filter(t=>{if(!t.Touchpoint_Date)return!1;const n=new Date(t.Touchpoint_Date).toDateString()===e.toDateString(),a=c(t.Point_of_Contact);return n&&a}).length,p=l.filter(t=>{if(!t.Touchpoint_Date)return!1;const a=new Date(t.Touchpoint_Date);return a>=n&&a<=e&&c(t.Point_of_Contact)}).length,g=l.filter(n=>{if(!n.Touchpoint_Date)return!1;const a=new Date(n.Touchpoint_Date);return a>=t&&a<=e&&c(n.Point_of_Contact)}).length,x=l.filter(e=>{if(!e.Touchpoint_Date)return!1;return new Date(e.Touchpoint_Date).toDateString()===a.toDateString()&&c(e.Point_of_Contact)}).length,h=l.filter(e=>{if(!e.Touchpoint_Date)return!1;const t=new Date(e.Touchpoint_Date);return t>=o&&t<=r&&c(e.Point_of_Contact)}).length,m=l.filter(e=>{if(!e.Touchpoint_Date)return!1;const t=new Date(e.Touchpoint_Date);return t>=i&&t<=s&&c(e.Point_of_Contact)}).length;_e(u),De(p),Ae(g),tt(x),ot(h),it(m)}},[Q,an,to]),(0,a.useEffect)(()=>{pn&&(An(pn.attendance),me(pn.team||[])),gn&&Fn(gn),hn&&Nn(hn),fn&&sa(fn),mn&&Ln(mn),(pn||gn)&&Wn(!1),(hn||mn)&&($n(!1),ua(!1));{var e;const t=Ja(),n=new Date(t);n.setDate(t.getDate()+7);const a=Qa(t),o=Qa(n),r=structuredClone(We);return Array.isArray(r.attendance)&&r.attendance.forEach(e=>{e.weeks=e.weeks||{},e.weeks[a]||(e.weeks[a]={iso:dn(t),attendance:"Mon,Tue,Wed,Thu,Fri",confirmed:!0}),e.weeks[o]||(e.weeks[o]={iso:dn(n),attendance:"Mon,Tue,Wed,Thu,Fri",confirmed:!0})}),An(r.attendance||[]),me(r.team||[]),Nn(Pe.e3||[]),sa(Pe.OR||[]),null!==(e=Pe.n4)&&void 0!==e&&e.totals&&da(Pe.n4.totals),Wn(!1),$n(!1),void ua(!1)}},[V]),(0,a.useEffect)(()=>{var e,t,n,a,o;if(null===V||void 0===V||!V[0])return void(0,r.cY)("\u23f8\ufe0f Skipping WIP fetch until user data is available");const i=null!==(e=null!==(t=null===V||void 0===V||null===(n=V[0])||void 0===n?void 0:n.EntraID)&&void 0!==t?t:null===V||void 0===V||null===(a=V[0])||void 0===a?void 0:a["Entra ID"])&&void 0!==e?e:null;(0,r.cY)("\ud83c\udfaf WIP useEffect triggered",{entraId:i,clioId:null===V||void 0===V||null===(o=V[0])||void 0===o?void 0:o["Clio ID"],hasCachedWip:!!yn,useLocalData:xe});var s;yn||bn?((0,r.cY)("\ud83d\udce6 Using cached WIP data"),qn(yn),Un(bn),aa(!1),null!==vn&&((0,r.cY)("\ud83d\udcb0 Restoring cached recovered fees:",{current:vn,prev:Sn}),Yn(vn),Kn(null!==(s=Sn)&&void 0!==s?s:0))):((0,r.cY)("\ud83d\udcc2 Using local WIP data"),yn=Ue,qn(yn),aa(!1))},[null===V||void 0===V||null===(w=V[0])||void 0===w?void 0:w.EntraID,null===V||void 0===V||null===(E=V[0])||void 0===E?void 0:E["Entra ID"],null===V||void 0===V||null===(I=V[0])||void 0===I?void 0:I["Clio ID"]]),(0,a.useEffect)(()=>{var e,t;const n=(null===V||void 0===V||null===(e=V[0])||void 0===e?void 0:e.FullName)||"",a=(null===V||void 0===V||null===(t=V[0])||void 0===t?void 0:t.Initials)||"";(n||a)&&(jn=null,Mn=null)},[null===V||void 0===V||null===(F=V[0])||void 0===F?void 0:F.FullName,null===V||void 0===V||null===(B=V[0])||void 0===B?void 0:B.Initials,null===V||void 0===V||null===(N=V[0])||void 0===N?void 0:N.First,null===V||void 0===V||null===(R=V[0])||void 0===R?void 0:R.Last]),(0,a.useEffect)(()=>{const e="v2-2025-09-21-db-cleanup";if(l("matters-cache-version")!==e){(0,r.cY)("\ud83d\udd04 Invalidating matters cache due to database changes"),jn=null,Mn=null,(()=>{const e=i();console.log("\ud83d\udcca localStorage Usage:",{usedMB:(e.used/1048576).toFixed(2),totalMB:(e.total/1048576).toFixed(2),percentUsed:e.percentUsed.toFixed(1)+"%",availableMB:(e.available/1048576).toFixed(2)})})();s("matters-cache-version",e)||(0,r.UT)("\u26a0\ufe0f Could not update cache version in localStorage")}if((0,r.cY)("\ud83d\udd0d Matters loading path check:",{hasCachedMatters:!!jn,hasCachedError:!!Mn,useLocalData:xe,REACT_APP_USE_LOCAL_DATA:"true"}),jn||Mn){var t;(0,r.cY)("\ud83d\udce6 Using cached matters:",(null===(t=jn)||void 0===t?void 0:t.length)||0),ga(jn||[]),ha(Mn)}else{{(0,r.cY)("\ud83c\udfe0 Using local mock data");const e=$e;jn=e,ga(e),te&&te(e)}}fa(!1)},[null===V||void 0===V||null===(L=V[0])||void 0===L?void 0:L.FullName,xe]),(0,a.useEffect)(()=>{if(xn)Ca(xn),Ma(!1),ae&&ae(xn);else{(async()=>{try{Ma(!0);const e=await fetch("/api/poid/6years",{method:"GET"});if(!e.ok)throw new Error(`Failed to fetch POID6Years: ${e.status}`);const t=await e.json();xn=t,Ca(t),ae&&ae(t)}catch(e){console.error("Error fetching POID6Years:",e),Ta(e.message||"Unknown error occurred.")}finally{Ma(!1)}})()}},[]),(0,a.useEffect)(()=>{!async function(){try{const e=await fetch("/api/future-bookings");if(!e.ok)throw new Error(`Error fetching space bookings: ${e.status}`);const t=await e.json(),n=t.boardroomBookings||[],a=t.soundproofBookings||[];$a({boardroomBookings:n,soundproofBookings:a}),"function"===typeof se&&se(n),"function"===typeof le&&le(a)}catch(e){console.error("Error fetching space bookings:",e)}}()},[]),j({autoStart:!0,metrics:["transactions","futureBookings","outstandingBalances","poid6Years"],bypassCache:!1,onMetric:(e,t)=>{switch(e){case"transactions":Tn=t,Jn(t),null===oe||void 0===oe||oe(t);break;case"futureBookings":$a(t),null===se||void 0===se||se(t.boardroomBookings||[]),null===le||void 0===le||le(t.soundproofBookings||[]);break;case"outstandingBalances":_n=t,s("outstandingBalancesData",JSON.stringify(t)),Wa(t),null===ne||void 0===ne||ne(t);break;case"poid6Years":Ca(t),null===ae||void 0===ae||ae(t)}},onError:(e,t)=>{console.warn("Home metrics stream error:",e,t)}}),(0,a.useEffect)(()=>{!async function(){{const e=qe;Tn=e,Jn(e),oe&&oe(e)}}()},[]),(0,a.useEffect)(()=>{const e=l("outstandingBalancesData");if(e){const t=JSON.parse(e);ne&&ne(t),Wa(t)}{const e=He;return _n=e,ne&&ne(e),void Wa(e)}},[]);(0,a.useMemo)(()=>ln(ue),[ue]);const no=he.find(e=>(e.Initials||"").toLowerCase()===to.toLowerCase()),ao=no?no.First:"",oo=En.find(e=>(e.name||"").toLowerCase()===(ao||"").toLowerCase()),ro=new Date,io=4===ro.getDay()&&ro.getHours()>=12,so=Qa(Ja()),lo=(()=>{const e=Ja(),t=new Date(e);return t.setDate(e.getDate()+7),Qa(t)})(),co=(0,a.useMemo)(()=>{var e;if(!pn&&!En.length)return[];return((null===(e=pn)||void 0===e?void 0:e.attendance)||En).map(e=>{if(e.Initials&&e.First&&!e.weeks){const t=Ja(),n=new Date(t);n.setDate(t.getDate()+7);const a=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,o=new Date(t);o.setDate(t.getDate()+6);const r=new Date(n);return r.setDate(n.getDate()+6),[{Attendance_ID:0,Entry_ID:0,First_Name:e.First||"",Initials:e.Initials||"",Level:"",Week_Start:a(t),Week_End:a(o),ISO_Week:dn(t),Attendance_Days:"away"===e.Status?"":e.Status||"",Confirmed_At:e.IsConfirmed?(new Date).toISOString():null},{Attendance_ID:0,Entry_ID:0,First_Name:e.First||"",Initials:e.Initials||"",Level:"",Week_Start:a(n),Week_End:a(r),ISO_Week:dn(n),Attendance_Days:"",Confirmed_At:null}]}if(e.weeks){return Object.keys(e.weeks).map(t=>{var n;const a=t.split(" - ")[0].split(", ")[1],o=t.split(" - ")[1].split(", ")[1],r=cn(a),i=cn(o);return{Attendance_ID:0,Entry_ID:0,First_Name:e.name||"",Initials:(null===(n=fe.find(t=>{var n;return(null===(n=t.First)||void 0===n?void 0:n.toLowerCase())===(e.name||"").toLowerCase()}))||void 0===n?void 0:n.Initials)||"",Level:"",Week_Start:r,Week_End:i,ISO_Week:dn(new Date(r)),Attendance_Days:e.weeks[t].attendance||"",Confirmed_At:e.weeks[t].confirmed?(new Date).toISOString():null}})}return[]}).flat()},[En,fe]),uo=e=>{(0,r.cY)("handleAttendanceUpdated records:",e.length),An(t=>{var n;const a=[...t];let o=!1;return e.forEach(e=>{const t=Qa(new Date(e.Week_Start)),n=a.findIndex(n=>n.name===e.First_Name&&n.weeks&&n.weeks[t]);if(-1!==n){const r=a[n],i={attendance:e.Attendance_Days,confirmed:!!e.Confirmed_At};JSON.stringify(r.weeks[t])!==JSON.stringify(i)&&(a[n].weeks[t]=i,o=!0)}else{const n=a.findIndex(t=>t.name===e.First_Name);-1!==n?(a[n].weeks={...a[n].weeks,[t]:{attendance:e.Attendance_Days,confirmed:!!e.Confirmed_At}},o=!0):(a.push({name:e.First_Name,weeks:{[t]:{attendance:e.Attendance_Days,confirmed:!!e.Confirmed_At}}}),o=!0)}}),o?(pn={attendance:a,team:(null===(n=pn)||void 0===n?void 0:n.team)||he},(0,r.cY)("Attendance state updated; size:",a.length),a):((0,r.cY)("No attendance changes; state unchanged"),t)})},po=async(e,t)=>{var n,a;(0,r.cY)("saveAttendance",e,t);const o=!1;(0,r.cY)("useLocalData:",o);const i=to||(null===V||void 0===V||null===(n=V[0])||void 0===n?void 0:n.Initials)||"",s=(null===(a=fe.find(e=>e.Initials===i))||void 0===a?void 0:a.First)||"";(0,r.cY)("user initials/name:",i,s);try{var l,d,c,u;const n="/api/attendance/updateAttendance",a={initials:i,weekStart:e,attendanceDays:t};(0,r.cY)("API call:",n,a);const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if((0,r.cY)("API status:",o.status),!o.ok)throw console.error("\ud83d\udd0d API call failed with status:",o.status),new Error(`Failed to save attendance: ${o.status}`);const p=await o.json();if((0,r.cY)("API json:",p),!p||!0!==p.success||!p.record)throw new Error("Unexpected response from updateAttendance");const g=p.record,x={Attendance_ID:null!==(l=g.Attendance_ID)&&void 0!==l?l:0,Entry_ID:null!==(d=g.Entry_ID)&&void 0!==d?d:0,First_Name:g.First_Name||s,Initials:g.Initials||i,Level:(null===(c=he.find(e=>e.Initials===(g.Initials||i)))||void 0===c?void 0:c.Level)||"",Week_Start:g.Week_Start||e,Week_End:g.Week_End||new Date(new Date(e).setDate(new Date(e).getDate()+6)).toISOString().split("T")[0],ISO_Week:null!==(u=g.ISO_Week)&&void 0!==u?u:dn(new Date(g.Week_Start||e)),Attendance_Days:g.Attendance_Days||t,Confirmed_At:g.Confirmed_At||(new Date).toISOString()};uo([x])}catch(g){console.error("Error saving attendance (home):",g);if("true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_ATTENDANCE_FALLBACK_LOCAL){var p;(0,r.UT)("\u26a0\ufe0f Falling back to local attendance update");const n={Attendance_ID:0,Entry_ID:0,First_Name:s,Initials:i,Level:(null===(p=he.find(e=>e.Initials===i))||void 0===p?void 0:p.Level)||"",Week_Start:e,Week_End:new Date(new Date(e).setDate(new Date(e).getDate()+6)).toISOString().split("T")[0],ISO_Week:dn(new Date(e)),Attendance_Days:t,Confirmed_At:(new Date).toISOString()};return void uo([n])}throw g instanceof Error?g:new Error("Failed to save attendance")}},go=io?lo:so,xo="localhost"===window.location.hostname,ho=xo||!oo||!(null===oo||void 0===oo||null===(O=oo.weeks)||void 0===O||!O[go]),mo=(0,a.useMemo)(()=>{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[];return e.forEach((e,a)=>{var o,r,i,s,l,d,c,u,p,g,x;const h=e.instructions&&e.instructions[0];if(!h)return;const m=h.MatterId||e.matter;if(m&&!t)return;const f="successful"===(null===(o=h.PaymentResult)||void 0===o?void 0:o.toLowerCase())||"paid"===h.InternalStatus||"paid"===h.internalStatus?"complete":"pending",y=e.electronicIDChecks&&e.electronicIDChecks[0],b=e.idVerifications&&e.idVerifications[0],v=null===y||void 0===y||null===(r=y.EIDOverallResult)||void 0===r?void 0:r.toLowerCase(),k=null===b||void 0===b||null===(i=b.EIDOverallResult)||void 0===i?void 0:i.toLowerCase(),S="passed"===v||"passed"===k||h.IdVerified||"passed"===(null===(s=h.EIDOverallResult)||void 0===s?void 0:s.toLowerCase());let w;w="proof-of-id-complete"===(null===h||void 0===h?void 0:h.Stage)||"proof-of-id-complete"===(null===h||void 0===h?void 0:h.stage)?"review"===v?"review":S||"passed"===v?"complete":"review":y||e.electronicIDChecks&&0!==e.electronicIDChecks.length?S?"complete":"review":(null===h||void 0===h?void 0:h.proofOfIdComplete)||(null===h||void 0===h?void 0:h.ProofOfIdComplete)?"received":"pending";const C=h.DocumentsReceived?"complete":"pending",j=e.riskAssessments&&e.riskAssessments[0],M=null!==(l=null===j||void 0===j||null===(d=j.RiskAssessmentResult)||void 0===d?void 0:d.toString().toLowerCase())&&void 0!==l?l:"",_=M?["low","low risk","pass","approved"].includes(M)?"complete":"review":"pending",T="complete"!==w?"id":"complete"!==f?"payment":"complete"!==C?"documents":"complete"!==_?"risk":"ccl",D=t&&m&&"complete"===w&&"complete"===f,E="review"===w,A="review"===_;if(!("id"===T||"risk"===T||"ccl"===T||E||A||D))return;const I=`${null!==(c=h.FirstName)&&void 0!==c?c:""} ${null!==(u=h.LastName)&&void 0!==u?u:""}`.trim(),F=(null===(p=e.deals)||void 0===p||null===(g=p[0])||void 0===g?void 0:g.ServiceDescription)||"New Matter";let B="",N=!1;if(E)B="Review ID";else if(A)B="Review Risk";else if(D)B="Open Matter";else if("id"===T)B="Verify ID";else if("risk"===T)B="Assess Risk";else{if("ccl"!==T)return;B="Submit to CCL",N=!t}n.push({id:null!==(x=h.InstructionRef)&&void 0!==x?x:String(e.prospectId),clientName:I||"Unknown Client",service:F,nextAction:B,disabled:N})}),n}(Ya,xo);return e},[Ya,xo]),fo=(0,a.useMemo)(()=>mo.map(e=>e.id).sort().join(","),[mo]),yo=Ka===fo&&""!==fo,bo=new Date,vo=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,ko=vo(bo),So=((0,a.useMemo)(()=>he&&0!==he.length?he.sort((e,t)=>e.First.localeCompare(t.First)).map(e=>{const t=En.find(t=>(t.name||"").toLowerCase()===(e.First||"").toLowerCase()),n=!!t&&t.attendingToday;return{id:e.Initials,name:e.First,initials:e.Initials,presence:n?x.As.online:x.As.none,nickname:e.Nickname||e.First}}):[],[he,En]),e=>{if(!e)return"";let t=e.trim().toLowerCase();return"bianca odonnell"===t&&(t="bianca o'donnell"),"samuel packwood"===t&&(t="sam packwood"),t}),{name:wo,clioId:Co}=((e,t,n)=>{const a=(e||"").toLowerCase(),o=(t||"").toLowerCase();if(a.includes("lukasz")||a.includes("luke")||"lz"===o)return{name:"Jonathan Waters",clioId:137557};if("samuel packwood"===a)return{name:"Sam Packwood",clioId:"string"===typeof n?parseInt(n,10):n};return{name:e||"",clioId:"string"===typeof n?parseInt(n,10):n}})(null===V||void 0===V||null===(W=V[0])||void 0===W?void 0:W["Full Name"],null===V||void 0===V||null===($=V[0])||void 0===$?void 0:$.Initials,null===V||void 0===V||null===(z=V[0])||void 0===z?void 0:z["Clio ID"]);let jo=((null===V||void 0===V||null===(q=V[0])||void 0===q?void 0:q.FullName)||(null===V||void 0===V||null===(U=V[0])||void 0===U?void 0:U["Full Name"])||"").trim()||wo;const Mo=(null===V||void 0===V||null===(Z=V[0])||void 0===Z?void 0:Z.Initials)||"";"localhost"!==window.location.hostname&&"LZ"!==Mo||(jo="Alex Cook");const _o=(0,a.useMemo)(()=>Ga&&0!==Ga.length?Ga.filter(e=>So(e.responsibleSolicitor)===So(jo)).map(e=>{const t=Number(e.matterId);return isNaN(t)?null:t}).filter(e=>null!==e):[],[Ga,jo]),To=(0,a.useMemo)(()=>null!==Oa&&void 0!==Oa&&Oa.data&&0!==_o.length?Oa.data.filter(e=>e.associated_matter_ids.some(e=>_o.includes(Number(e)))):[],[Oa,_o]),[Do,Eo]=(0,a.useState)(!1),[Ao,Io]=(0,a.useState)(!0),Fo=((0,a.useMemo)(()=>Oa&&Oa.data?Oa.data.map(e=>({id:e.id,created_at:e.created_at,updated_at:e.updated_at,associated_matter_ids:e.associated_matter_ids,contact:e.contact,total_outstanding_balance:e.total_outstanding_balance,last_payment_date:e.last_payment_date,last_shared_date:e.last_shared_date,newest_issued_bill_due_date:e.newest_issued_bill_due_date,pending_payments_total:e.pending_payments_total,reminders_enabled:e.reminders_enabled,currency:e.currency,outstanding_bills:e.outstanding_bills})):[],[Oa]),(0,a.useMemo)(()=>{if(!Oa||!Oa.data)return[];const e=Oa.data.map(e=>({id:e.id,created_at:e.created_at,updated_at:e.updated_at,associated_matter_ids:e.associated_matter_ids,contact:e.contact,total_outstanding_balance:e.total_outstanding_balance,last_payment_date:e.last_payment_date,last_shared_date:e.last_shared_date,newest_issued_bill_due_date:e.newest_issued_bill_due_date,pending_payments_total:e.pending_payments_total,reminders_enabled:e.reminders_enabled,currency:e.currency,outstanding_bills:e.outstanding_bills}));return Ao&&_o.length>0?e.filter(e=>e.associated_matter_ids.some(e=>_o.includes(Number(e)))):e},[Oa,Ao,_o])),Bo=(0,a.useMemo)(()=>Oa&&Oa.data?0===_o.length?0:To.reduce((e,t)=>e+(Number(t.total_outstanding_balance)||0),0):null,[Oa,_o,To]),No=(0,a.useMemo)(()=>{var e,t,n,a,o,i,s,l,d,c,u,p,g,x,h,m,f,y,b,v;const k=new Date,S=k.getMonth(),w=k.getFullYear(),C=(null===V||void 0===V||null===(e=V[0])||void 0===e||null===(t=e.First)||void 0===t?void 0:t.trim().toLowerCase())||"",j=(null===V||void 0===V||null===(n=V[0])||void 0===n||null===(a=n.Last)||void 0===a?void 0:a.trim().toLowerCase())||"",M=(null===V||void 0===V||null===(o=V[0])||void 0===o||null===(i=o.FullName)||void 0===i?void 0:i.trim().toLowerCase())||`${C} ${j}`,_=(null===V||void 0===V||null===(s=V[0])||void 0===s||null===(l=s.Initials)||void 0===l?void 0:l.trim().toLowerCase())||"",T=fe.find(e=>(e.Initials||"").toLowerCase()===_),D=(null===T||void 0===T||null===(d=T.Nickname)||void 0===d?void 0:d.trim().toLowerCase())||"",E=C,A=j,I=M,F=_,B=((()=>{const e=[],t=(E||"").trim(),n=(A||"").trim(),a=(I||"").trim(),o=(F||"").trim(),r=(D||"").trim();a&&e.push(a),t&&n&&e.push(`${t} ${n}`),r&&n&&e.push(`${r} ${n}`),o&&e.push(o),t&&n&&e.push(`${t[0]} ${n}`),t&&n&&e.push(`${t[0]}. ${n}`),new Set(e.map(e=>(e=>{if(!e)return"";let t=String(e).trim().toLowerCase();if(t.includes(",")){const[e,n]=t.split(",").map(e=>e.trim());n&&e&&(t=`${n} ${e}`)}return t=t.replace(/\./g,""),t=t.replace(/\s*\([^)]*\)\s*/g," "),t=t.replace(/\s[-/|].*$/,""),"bianca odonnell"===t&&(t="bianca o'donnell"),"samuel packwood"===t&&(t="sam packwood"),t.replace(/\s+/g," ")})(e)))})(),(Ga||[]).filter(e=>{const t=un(e.openDate);if(!t)return!1;if(!(t.getMonth()===S&&t.getFullYear()===w))return!1;const n=e.role;return"responsible"===n||"both"===n}).length);const N=(Ga||[]).filter(e=>{const t=un(e.openDate);return!!t&&(t.getMonth()===S&&t.getFullYear()===w)}).length;if(!zn)return[{title:"Time Today",isTimeMoney:!0,money:0,hours:0,prevMoney:0,prevHours:0,showDial:!0,dialTarget:6},{title:"Av. Time This Week",isTimeMoney:!0,money:0,hours:0,prevMoney:0,prevHours:0,showDial:!0,dialTarget:6},{title:"Time This Week",isTimeMoney:!0,money:0,hours:0,prevMoney:0,prevHours:0,showDial:!0,dialTarget:30},{title:"Fees Recovered This Month",isMoneyOnly:!0,money:null!==Zn&&void 0!==Zn?Zn:0,prevMoney:null!==Gn&&void 0!==Gn?Gn:0},{title:"Outstanding Office Balances",isMoneyOnly:!0,money:null!==Bo&&void 0!==Bo?Bo:0},{title:"Enquiries Today",isTimeMoney:!1,count:Me,prevCount:et},{title:"Enquiries This Week",isTimeMoney:!1,count:Te,prevCount:nt},{title:"Matters Opened",isTimeMoney:!1,count:B,prevCount:0,secondary:N}];const R=null===(c=zn.current_week)||void 0===c||null===(u=c.daily_data)||void 0===u?void 0:u[ko],L=new Date(bo);L.setDate(bo.getDate()-7);const O=vo(L),W=null===(p=zn.last_week)||void 0===p||null===(g=p.daily_data)||void 0===g?void 0:g[O],P=new Date(bo);P.setDate(bo.getDate()-bo.getDay()+(0===bo.getDay()?-6:1)),P.setHours(0,0,0,0);const $=new Date(P);$.setDate(Ja().getDate()-7);const z=(e,t,n)=>{let a=0,o=0,r=0;for(let i=new Date(t);i<=n;i.setDate(i.getDate()+1)){const t=e[vo(i)];t&&(a+=t.total_hours,o+=t.total_amount);const n=i.getDay();n>=1&&n<=5&&t&&(r+=1)}return{avgHours:r?parseFloat((a/r).toFixed(2)):0,avgAmount:r?parseFloat((o/r).toFixed(2)):0}},q=z(null!==(x=null===(h=zn.current_week)||void 0===h?void 0:h.daily_data)&&void 0!==x?x:{},P,bo),H=z(null!==(m=null===(f=zn.last_week)||void 0===f?void 0:f.daily_data)&&void 0!==m?m:{},$,L);(0,r.cY)("\ud83d\udcca Average calculations:",{currentAvg:q,prevAvg:H,startOfCurrentWeek:P.toISOString(),today:bo.toISOString(),formattedToday:ko,currentWeekDataKeys:Object.keys((null===(y=zn.current_week)||void 0===y?void 0:y.daily_data)||{}),todayData:null===(b=zn.current_week)||void 0===b||null===(v=b.daily_data)||void 0===v?void 0:v[ko]});let U=0;zn.current_week&&zn.current_week.daily_data&&(Object.values(zn.current_week.daily_data).forEach(e=>{U+=e.total_hours||0}),(0,r.cY)("\ud83d\udcca Current week time calculation:",{dailyDataKeys:Object.keys(zn.current_week.daily_data),dailyDataSample:Object.entries(zn.current_week.daily_data).slice(0,3),totalTimeThisWeek:U}));let Z=0;zn.last_week&&zn.last_week.daily_data&&(Object.values(zn.last_week.daily_data).forEach(e=>{Z+=e.total_hours||0}),(0,r.cY)("\ud83d\udcca Last week time calculation:",{dailyDataKeys:Object.keys(zn.last_week.daily_data),totalTimeLastWeek:Z}));const Y=(()=>{const e=new Date,t=e.getDay(),n=0===t?-6:1-t,a=new Date(e);a.setDate(e.getDate()+n);const o=[];for(let r=0;r<5;r++){const e=new Date(a);e.setDate(a.getDate()+r),o.push(e)}return o})();let G=0;Y.forEach(e=>{const t=vo(e);Bn.some(e=>"booked"===e.status&&(e.person||"").toLowerCase()===(_||"").toLowerCase()&&t>=e.start_date&&t<=e.end_date)&&G++});const K=6*(5-G);return[{title:"Time Today",isTimeMoney:!0,money:R?R.total_amount:0,hours:R?R.total_hours:0,prevMoney:W?W.total_amount:0,prevHours:W?W.total_hours:0,showDial:!0,dialTarget:6},{title:"Av. Time This Week",isTimeMoney:!0,money:q.avgAmount,hours:q.avgHours,prevMoney:H.avgAmount,prevHours:H.avgHours,showDial:!0,dialTarget:6},{title:"Time This Week",isTimeMoney:!0,money:0,hours:U,prevMoney:0,prevHours:Z,showDial:!0,dialTarget:K},{title:"Fees Recovered This Month",isMoneyOnly:!0,money:null!==Zn&&void 0!==Zn?Zn:0,prevMoney:null!==Gn&&void 0!==Gn?Gn:0},{title:"Outstanding Office Balances",isMoneyOnly:!0,money:null!==Bo&&void 0!==Bo?Bo:0},{title:"Enquiries Today",isTimeMoney:!1,count:Me,prevCount:et},{title:"Enquiries This Week",isTimeMoney:!1,count:Te,prevCount:nt},{title:"Enquiries This Month",isTimeMoney:!1,count:Ee,prevCount:rt},{title:"Matters Opened",isTimeMoney:!1,count:B,prevCount:0,secondary:N}]},[zn,Zn,Gn,ko,Me,et,Te,nt,Ee,rt,Bn,V,Ga,to,fe,Oa,_o]),Ro=No.slice(0,5),Lo=(0,a.useMemo)(()=>[...Bn,...ia],[Bn,ia]),Oo=["AC","JW","LZ","KW"].includes(to),Wo=(0,a.useMemo)(()=>Oo?Lo.filter(e=>{var t;return"requested"===e.status&&(null===(t=e.approvers)||void 0===t?void 0:t.includes(to))}):[],[Lo,Oo,to]),Po=(0,a.useMemo)(()=>Oo?za.filter(e=>"pending"===e.status):[],[za,Oo]),$o=(0,a.useMemo)(()=>[...Bn,...ia].filter(e=>("approved"===e.status||"rejected"===e.status)&&(e.person||"").toLowerCase()===(to||"").toLowerCase()),[Bn,ia,to]),zo=()=>{Wo.length>0&&(At((0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Jt,{approvals:Wo.map(e=>({id:e.id,person:e.person,start_date:e.start_date,end_date:e.end_date,reason:e.reason,status:e.status,hearing_confirmation:e.hearing_confirmation,hearing_details:e.hearing_details})),futureLeave:ia.map(e=>({id:e.id,person:e.person,start_date:e.start_date,end_date:e.end_date,reason:e.reason,status:e.status,hearing_confirmation:e.hearing_confirmation,hearing_details:e.hearing_details})),onClose:()=>{Dt(!1),Vo()},team:null!==re&&void 0!==re?re:[],totals:la,allLeaveEntries:Ra,onApprovalUpdate:Xa})})),Ft("Approve Annual Leave"),Dt(!0))},qo=(0,a.useCallback)(()=>{At((0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Jt,{approvals:[{id:"test-1",person:"Test User",start_date:"2025-09-25",end_date:"2025-09-27",reason:"Family vacation",status:"requested",hearing_confirmation:null,hearing_details:""},{id:"test-2",person:"Another User",start_date:"2025-10-01",end_date:"2025-10-03",reason:"Medical appointment",status:"requested",hearing_confirmation:null,hearing_details:""}],futureLeave:ia.map(e=>({id:e.id,person:e.person,start_date:e.start_date,end_date:e.end_date,reason:e.reason,status:e.status,hearing_confirmation:e.hearing_confirmation,hearing_details:e.hearing_details})),onClose:()=>{Dt(!1),Vo()},team:null!==re&&void 0!==re?re:[],totals:la,allLeaveEntries:Ra,onApprovalUpdate:Xa})})),Ft("Approve Annual Leave (Test)"),Dt(!0)},[ia,la,Ra,Xa]),Ho=a.useCallback(e=>{e&&0!==e.length&&(At((0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Qt,{bookings:e.map(e=>({id:e.id,person:e.person,start_date:e.start_date,end_date:e.end_date,status:e.status,rejection_notes:e.rejection_notes})),onClose:()=>{var e;Dt(!1),null===(e=ya.current)||void 0===e||e.call(ya)},team:fe})})),Ft("Book Requested Leave"),Dt(!0))},[At,Ft,Dt,fe]),Uo=a.useCallback(()=>{Ho($o)},[$o,Ho]),Zo=a.useCallback(()=>{var e,t;const n=(new Date).toISOString(),a=new Date(Date.now()+864e5).toISOString(),o=[{id:"preview-booking",person:null!==(e=null===(t=V[0])||void 0===t?void 0:t.FullName)&&void 0!==e?e:"You",start_date:n,end_date:a,status:"approved",rejection_notes:""}];Ho(o)},[Ho,V]),Yo=async(e,t)=>{try{const n=Zt;if(t){const t=`${n}/${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_APPROVE_SNIPPET_EDIT_PATH}?code=${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_APPROVE_SNIPPET_EDIT_CODE}`;await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editId:e,approvedBy:to})})}else{const t=`${n}/${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DELETE_SNIPPET_EDIT_PATH}?code=${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_DELETE_SNIPPET_EDIT_CODE}`;await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editId:e})})}qa(t=>t.filter(t=>t.id!==e))}catch(n){console.error("Failed to update snippet edit",n)}},Go=()=>{Po.length>0&&(At((0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(en,{edits:Po,onApprove:e=>Yo(e,!0),onReject:e=>Yo(e,!1),onClose:()=>{Dt(!1),Vo()}})})),Ft("Approve Snippet Edits"),Dt(!0))},Ko=(0,a.useMemo)(()=>{const e=[];return xo&&0===Wo.length&&e.push({title:"Approve Annual Leave (Test)",onClick:qo,icon:"PalmTree",category:"critical"}),Oo&&Wo.length>0&&e.push({title:"Approve Annual Leave",onClick:zo,icon:"PalmTree",category:"critical"}),Oo&&Po.length>0&&e.push({title:"Approve Snippet Edits",onClick:Go,icon:"Edit",category:"standard"}),$o.length>0&&e.push({title:"Book Requested Leave",onClick:Uo,icon:"Accept",category:"success"}),xo&&0===$o.length&&e.push({title:"Book Requested Leave",onClick:Zo,icon:"Accept",category:"success"}),e},[Oo,Wo,Po,$o,qo,zo,Go,Uo,Zo,xo]),Vo=(0,a.useCallback)(()=>{ya.current&&ya.current()},[]),Jo=(0,a.useCallback)(e=>{let t=(0,S.jsx)("div",{children:"No form available."}),n=e.title,o="";const i={"Create a Task":{shortTitle:"New Task",description:"Create and assign a new task or reminder"},"Save Telephone Note":{shortTitle:"Attendance Note",description:"Record details from a phone conversation"},"Request Annual Leave":{shortTitle:"Book Leave",description:"Submit a request for annual leave or time off"},"Update Attendance":{shortTitle:"Confirm Your Attendance",description:""},"Confirm Attendance":{shortTitle:"Confirm Attendance",description:""},"Book Space":{shortTitle:"Book Room",description:"Reserve a meeting room or workspace"}};if(i[n]){const e=i[n];n=e.shortTitle,o=e.description}switch(e.title){case"Confirm Attendance":case"Update Attendance":t=(0,S.jsx)(Ht,{isDarkMode:ue,attendanceRecords:co,annualLeaveRecords:Bn,futureLeaveRecords:ia,userData:V,onSave:po,onClose:()=>{At(null),Dt(!1),Vo()}});break;case"Create a Task":t=(0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Gt,{})});break;case"Request CollabSpace":t=(0,S.jsx)(Dn,{dataKey:"QzaAr_2Q7kesClKq8g229g",dataForm:"44"});break;case"Save Telephone Note":t=(0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Kt,{})});break;case"Save Attendance Note":t=(0,S.jsx)(Dn,{dataKey:"QzaAr_2Q7kesClKq8g229g",dataForm:"38"});break;case"Request ID":t=(0,S.jsx)(Dn,{dataKey:"QzaAr_2Q7kesClKq8g229g",dataForm:"60"});break;case"Open a Matter":t=(0,S.jsx)(Dn,{dataKey:"QzaAr_2Q7kesClKq8g229g",dataForm:"9"});break;case"Request Annual Leave":t=(0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Vt,{futureLeave:ia,team:fe,userData:V,totals:la,bankHolidays:$t,allLeaveRecords:Ra})});break;case"Review Instructions":sessionStorage.setItem("reviewedInstructionIds",fo),Va(fo);try{window.dispatchEvent(new CustomEvent("navigateToInstructions"))}catch(d){console.error("Failed to dispatch navigation event:",d)}return;case"Open Matter":s("openMatterOpening","true");try{window.dispatchEvent(new CustomEvent("navigateToInstructions"))}catch(d){console.error("Failed to dispatch navigation event:",d)}return;case"Resume Pitch":s("resumePitchBuilder","true");try{window.dispatchEvent(new CustomEvent("navigateToEnquiries"))}catch(d){console.error("Failed to dispatch navigation event:",d)}break;case"Book Space":t=(0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(D.A,{size:h.H.small}),children:(0,S.jsx)(Xt,{feeEarner:V[0].Initials,onCancel:()=>{Dt(!1),Vo()},futureBookings:Pa})});break;case"Unclaimed Enquiries":t=(0,S.jsx)(Ut.A,{enquiries:Ha,onSelect:()=>{},userEmail:an||"",onAreaChange:()=>{}});break;case"Verify ID":case"Review ID":try{window.dispatchEvent(new CustomEvent("navigateToInstructions"))}catch(d){console.error("Failed to dispatch navigation event:",d)}return;case"Assess Risk":t=(0,S.jsx)(Dn,{dataKey:"QzaAr_2Q7kesClKq8g229g",dataForm:"70"});break;case"Submit to CCL":case"Draft CCL":t=(0,S.jsxs)("div",{style:{padding:"20px"},children:[(0,S.jsx)(u.E,{variant:"medium",style:{marginBottom:"15px",display:"block"},children:"CCL submission functionality is coming soon."}),(0,S.jsx)(m.Y,{text:"Close",onClick:()=>Dt(!1)})]});break;default:t=(0,S.jsx)("div",{children:"No form available."})}At(t),Ft(n),Nt(o);const l=(e=>{const t=at[e];if(!t)return console.log(`\u274c No mapping found for icon: ${e}`),null;const n=t.filled;if(console.log(`\ud83d\udd0d Processing icon "${e}":`,{type:typeof n,isFunction:"function"===typeof n,hasDefault:n&&"object"===typeof n&&n.default,iconComponent:n}),"function"===typeof n)return n;if(n&&"object"===typeof n&&n.default){const t=n.default;return console.log(`\ud83d\udd27 Using default export for "${e}":`,typeof t),t}return console.log(`\u274c Could not resolve icon component for "${e}"`),null})(e.icon);(0,r.cY)("Setting panel icon for action:",e,"icon component:",l),Ot(l),Dt(!0)},[Ce,Ya,ia,fe,V,la,$t,Ra,Pa,Ha,ue,co,Bn,po,fo,Vo,Va]),Qo=(0,a.useMemo)(()=>{const e={};return mo.forEach(t=>{const n=t.nextAction;if(e[n])e[n].count++;else{let a="OpenFile";"Verify ID"===n?a="ContactCard":"Assess Risk"===n?a="Shield":"Submit to CCL"===n?a="Send":"Review"===n&&(a="ReviewRequestMirrored"),e[n]={count:1,icon:a,disabled:t.disabled}}}),e},[mo]),Xo=(0,a.useMemo)(()=>{const e=[];if(On||ho||e.push({title:"Confirm Attendance",icon:"Calendar",onClick:()=>Jo({title:"Confirm Attendance",icon:"Calendar"}),category:"critical"}),!yo&&("LZ"===to||xo)){const t=e=>["Verify ID","Review ID","Review","Open Matter"].includes(e)?"standard":"critical";Object.entries(Qo).forEach(n=>{let[a,{count:o,icon:i,disabled:s}]=n;const l=1===o?a:`${a} (${o})`;e.push({title:l,icon:i,disabled:s,onClick:s?()=>(0,r.cY)("CCL action disabled in production"):()=>Jo({title:a,icon:i}),category:t(a)})})}e.push(...Ko.map(e=>{var t;return{...e,icon:e.icon||"",category:null!==(t=e.category)&&void 0!==t?t:"standard"}}));const t=e=>{var t,n;const a=e.replace(/\s*\(\d+\)$/,"");return null!==(t=null!==(n=tn[a])&&void 0!==n?n:tn[e])&&void 0!==t?t:99};return e.sort((e,n)=>t(e.title)-t(n.title)),e},[On,ho,Ia,Ya,Qo,yo,Ko,Jo,Ba,to,xo]);(0,a.useEffect)(()=>{ce&&ce(Xo.length>0)},[Xo.length,ce]);const er=(0,a.useMemo)(()=>{const e=nn.filter(e=>"Unclaimed Enquiries"===e.title?["LZ","JW","AC"].includes(to):(e.title,!0));return e.sort((e,t)=>(tn[e.title]||99)-(tn[t.title]||99)),e},[to]);a.useLayoutEffect(()=>{ge((0,S.jsx)(st,{isDarkMode:ue,quickActions:er,handleActionClick:Jo,currentUserConfirmed:ho,highlighted:!1,resetSelectionRef:ya,panelActive:_t||Wt||Do||ke,seamless:!0,userDisplayName:qt,userIdentifier:an,onToggleTheme:pe}))},[ue,er,ho,qt,an,pe]);Ja(),vo(new Date),(0,a.useMemo)(()=>fe.map(e=>{const t=En.find(t=>(t.name||"").toLowerCase()===(e.First||"").toLowerCase());return{name:e.First,initials:e.Initials,nickname:e.Nickname,attendance:t&&t.weeks&&t.weeks[go]?t.weeks[go].attendance:""}}).sort((e,t)=>e.name.localeCompare(t.name)),[fe,En,go]);const tr=(0,d.i7)({from:{opacity:0,transform:"translateY(5px)"},to:{opacity:1,transform:"translateY(0)"}}),nr=(0,d.i7)({"0%":{transform:"scale(0)",opacity:0},"70%":{transform:"scale(1.3)",opacity:1},"100%":{transform:"scale(1)",opacity:1}}),ar=((0,d.Zq)({display:"flex",alignItems:"center",justifyContent:"center",animation:`${tr} 0.3s ease`}),(0,d.Zq)({width:"24px",height:"24px",borderRadius:"50%",background:b.M.highlight,color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",animation:`${nr} 0.3s ease`}),a.useMemo(()=>{const e=No.find(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase().startsWith("matters opened")});return e&&"number"===typeof e.count?e.count:0},[No])),or=(Ee&&Number((ar/Ee*100).toFixed(2)),(0,S.jsx)(ft,{isDarkMode:ue,immediateActionsReady:Da,immediateActionsList:Xo,highlighted:!1,seamless:!1}));return(0,S.jsxs)("div",{className:on(ue),children:["undefined"!==typeof document&&document.getElementById("app-level-immediate-actions")&&(0,o.createPortal)(or,document.getElementById("app-level-immediate-actions")),(0,S.jsx)("div",{style:{paddingTop:"16px"},children:(0,S.jsx)(C,{metrics:Ro,enquiryMetrics:[{title:"Enquiries Today",count:Me,prevCount:et},{title:"Enquiries This Week",count:Te,prevCount:nt},{title:"Enquiries This Month",count:Ee,prevCount:rt},{title:"Matters Opened This Month",count:ar},{title:"Conversion Rate",percentage:Ee?Number((ar/Ee*100).toFixed(2)):0,isPercentage:!0}],isDarkMode:ue})}),!_t&&(0,S.jsx)("div",{style:{margin:"12px 16px"},children:(0,S.jsx)(Qe,{title:"Attendance",id:"attendance-section",variant:"default",animationDelay:.1,children:(0,S.jsx)(Lt,{ref:Ce,isDarkMode:ue,isLoadingAttendance:On,isLoadingAnnualLeave:Pn,attendanceError:In,annualLeaveError:Rn,attendanceRecords:co,teamData:he,annualLeaveRecords:Bn,futureLeaveRecords:ia,userData:V,onAttendanceUpdated:uo})})}),(0,S.jsx)("div",{style:{margin:"12px 16px"},children:(0,S.jsx)(Qe,{title:"Transactions & Balances",id:"transactions-section",variant:"default",animationDelay:.1,children:(0,S.jsx)(Ne,{transactions:Vn,userInitials:to,isDarkMode:ue,onTransactionClick:e=>{ve(e),Se(!0)},matters:pa||[],updateTransaction:e=>{Jn(t=>t.map(t=>t.transaction_id===e.transaction_id?e:t))},outstandingBalances:To})})}),(0,S.jsx)("div",{style:{height:"1px",background:ue?"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%)":"linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.1) 50%, transparent 100%)",margin:"12px 16px"}}),V&&V[0]&&("LZ"===V[0].Initials||"CB"===V[0].Initials||(null===(Y=V[0].Email)||void 0===Y?void 0:Y.toLowerCase().includes("luke"))||(null===(G=V[0].Email)||void 0===G?void 0:G.toLowerCase().includes("cass")))&&(0,S.jsx)("div",{style:{margin:"12px 16px"},children:(0,S.jsx)(J,{maxItems:8,showHeader:!0,compact:!1})}),(0,S.jsx)("div",{style:{margin:"12px 16px"},children:(0,S.jsx)(ie,{showHeader:!0,compact:!1,maxItemsPerColumn:3})}),(0,S.jsx)(P.A,{isOpen:Wt,onClose:()=>{Pt(!1),Vo()},title:"Context Details",width:"2000px",children:(0,S.jsxs)(c.B,{tokens:T.hs,styles:T.de,children:[(0,S.jsxs)(c.B,{tokens:T.nt,children:[(0,S.jsx)(u.E,{variant:"xLarge",styles:{root:{fontWeight:"600"}},children:"Teams Context"}),(0,S.jsx)(p.R,{items:sn(K),columns:ln(ue),setKey:"teamsSet",layoutMode:g.ch.justified,isHeaderVisible:!1,styles:{root:{selectors:{".ms-DetailsRow":{padding:"8px 0",borderBottom:"none"},".ms-DetailsHeader":{display:"none"}}}}})]}),(0,S.jsxs)(c.B,{tokens:T.nt,children:[(0,S.jsx)(u.E,{variant:"xLarge",styles:{root:{fontWeight:"600"}},children:"SQL Context"}),(0,S.jsx)(p.R,{items:sn(V),columns:ln(ue),setKey:"sqlSet",layoutMode:g.ch.justified,isHeaderVisible:!1,styles:{root:{selectors:{".ms-DetailsRow":{padding:"8px 0",borderBottom:"none"},".ms-DetailsHeader":{display:"none"}}}}})]})]})}),(0,S.jsxs)(P.A,{isOpen:Do,onClose:()=>{Eo(!1),Vo()},title:"Outstanding Balances Details",width:"2000px",children:[(0,S.jsx)(y.l,{label:"Show Only My Matters",checked:Ao,onChange:(e,t)=>Io(!!t),styles:{root:{marginBottom:"10px"}}}),(0,S.jsx)(Tt,{balances:Fo,matters:null!==pa&&void 0!==pa?pa:[]})]}),(0,S.jsx)(P.A,{isOpen:_t,onClose:()=>{Dt(!1),Vo()},title:It,description:Bt,width:"85%",isDarkMode:ue,variant:"modal",icon:Rt||void 0,children:Et}),(0,S.jsx)(P.A,{isOpen:ke,onClose:()=>{Se(!1),Vo()},title:"Approve Transaction",width:"2000px",isDarkMode:ue,children:be&&(0,S.jsx)(ye,{transaction:be,matters:pa||[],onSubmit:(e,t)=>{Jn(e=>e.map(e=>e.transaction_id===t.transaction_id?t:e))},onCancel:()=>{Se(!1),Vo()},userInitials:to})}),wt&&(0,S.jsx)(A.A,{isOpen:!0,onClose:()=>{Ct(null),Vo()},link:wt,isDarkMode:ue,userData:V,matters:Ga,offsetTop:96}),jt&&(0,S.jsx)(H,{resource:jt,onClose:()=>{Mt(null),Vo()}})]})}},59769:(e,t,n)=>{n.d(t,{A:()=>k});var a=n(65043),o=n(93589),r=n(42463),i=n(10615),s=n(48330),l=n(9442),d=n(63485),c=n(11638),u=n(30800),p=n(1870),g=n(81518),x=n(11622),h=n(36819),m=n(79489),f=n(60886),y=n(70579);const b=e=>(0,p.Zq)({padding:"20px",color:e?u.M.dark.text:u.M.light.text,fontFamily:"Raleway, sans-serif",display:"flex",flexDirection:"column",gap:"10px"}),v={display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},k=e=>{let{link:t,isDarkMode:n,onClose:k,isOpen:S,userData:w,matters:C,offsetTop:j=96}=e;const[M,_]=(0,a.useState)(null),[T,D]=(0,a.useState)(!1),E=(0,a.useRef)(null),[A,I]=(0,a.useState)(!1),[F,B]=(0,a.useState)(null),[N,R]=(0,a.useState)(()=>Date.now()),[L,O]=(0,a.useState)(!1),W=(0,a.useCallback)(()=>new Promise((e,t)=>{if(window.Cognito)return void e();const n=document.getElementById("cognito-seamless-script");if(n)n.addEventListener("load",()=>{window.Cognito?e():t(new Error("Cognito script loaded but Cognito is not available"))}),n.addEventListener("error",()=>t(new Error("Failed to load Cognito script")));else{const n=document.createElement("script");n.id="cognito-seamless-script",n.src="https://www.cognitoforms.com/f/seamless.js",n.async=!0,n.onload=()=>{window.Cognito?e():t(new Error("Cognito script loaded but Cognito is not available"))},n.onerror=()=>t(new Error("Failed to load Cognito script")),document.body.appendChild(n)}}),[]);(0,a.useEffect)(()=>{S&&W().then(()=>{D(!0)}).catch(e=>{console.error(e)})},[W,S]),(0,a.useEffect)(()=>{if(T&&t.embedScript&&E.current){E.current.innerHTML="";const e=document.createElement("script");e.src="https://www.cognitoforms.com/f/seamless.js",e.async=!0,e.setAttribute("data-key",t.embedScript.key),e.setAttribute("data-form",t.embedScript.formId),E.current.appendChild(e)}},[T,t.embedScript]);const P=(0,a.useCallback)(()=>{t.url&&navigator.clipboard.writeText(t.url).then(()=>{_(`Copied '${t.title}' URL to clipboard!`),setTimeout(()=>_(null),3e3)}).catch(e=>{console.error("Failed to copy: ",e)})},[t.url,t.title]),$=(0,a.useCallback)(()=>{window.open(t.url,"_blank","noopener,noreferrer")},[t.url]),z=(0,a.useCallback)(async e=>{var n;if(L)return;O(!0);const a={formType:t.title,data:e,initials:(null===w||void 0===w||null===(n=w[0])||void 0===n?void 0:n.Initials)||"N/A"},o=`${(0,f.T)()}/${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_POST_FINANCIAL_TASK_PATH}?code=${{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_LOCAL_DATA:"true"}.REACT_APP_POST_FINANCIAL_TASK_CODE}`;try{const n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(n.ok){const e=await n.json();console.log("Financial task created successfully:",e),I(!0),B("Financial form submitted successfully!"),setTimeout(()=>{I(!1),B(null),R(Date.now())},3e3)}else{const e=await n.text();console.error("Error posting financial task:",e),B(null)}if("Payment Requests"===t.title)try{await fetch("https://prod-16.uksouth.logic.azure.com:443/workflows/625f5ed1d19b42999e113bd44c4799e5/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=OQhUuEJuXMgy2UCbOAuwM-3OBKb0xLIKgbp1GcnH_Bg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(r){console.error("Error posting payment request to external endpoint:",r)}}catch(i){console.error("Error in financial form submission:",i),B(null)}finally{O(!1)}},[t.title,w,L]);return(0,y.jsxs)(m.A,{isOpen:S,onClose:k,title:t.title,width:"60%",offsetTop:j,children:[(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:0},children:[F&&(0,y.jsx)(o.n,{messageBarType:r.H.success,isMultiline:!1,onDismiss:()=>B(null),dismissButtonAriaLabel:"Close",styles:{root:{marginBottom:"10px",borderRadius:"4px"}},children:F}),(0,y.jsx)("div",{style:{flexGrow:1,padding:"20px",minHeight:0},children:t.embedScript?(0,y.jsx)("div",{ref:E,style:{flexGrow:1,minHeight:0},children:!T&&(0,y.jsx)("div",{style:v,children:(0,y.jsx)("img",{src:g,alt:"Loading...",style:{width:"100px",height:"auto"}})})}):t.fields?(0,y.jsx)("div",{style:{flexGrow:1},children:(0,y.jsx)(x.Ay,{fields:t.fields.map(e=>({...e,name:e.label})),onSubmit:z,onCancel:()=>console.log("Form cancelled"),isSubmitting:L,matters:C},N)}):t.component?a.createElement(t.component,{users:w||[],matters:C,onBack:k}):(0,y.jsx)("div",{children:(0,y.jsx)(i.E,{children:"No form available for this item."})})}),(0,y.jsxs)("div",{className:b(n),style:{flexShrink:0},children:[(0,y.jsxs)(s.B,{tokens:{childrenGap:6},children:[(0,y.jsxs)(i.E,{children:[(0,y.jsx)(l.N,{href:"https://helix-law.co.uk/",target:"_blank",styles:{root:{color:n?u.M.dark.subText:u.M.light.subText,fontSize:"12px",fontFamily:"Raleway, sans-serif",textDecoration:"none"}},"aria-label":"Helix Law Website",children:"https://helix-law.co.uk/"})," ","|"," ",(0,y.jsx)(i.E,{variant:"small",styles:{root:{color:n?u.M.dark.text:u.M.light.text,display:"inline"}},children:"01273 761990"})]}),(0,y.jsx)(i.E,{styles:{root:{fontSize:"12px",fontFamily:"Raleway, sans-serif",color:n?u.M.dark.text:u.M.light.text}},children:"Second Floor, Britannia House, 21 Station Street, Brighton, BN1 4DE"})]}),(0,y.jsxs)("div",{className:(0,p.Zq)({display:"flex",justifyContent:"space-between",alignItems:"center"}),children:[(0,y.jsx)("div",{className:(0,p.Zq)({display:"flex",gap:"10px"}),children:t.url&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.j,{text:"Copy",onClick:P,styles:h.M5,ariaLabel:"Copy URL to clipboard"}),(0,y.jsx)(d.j,{text:"Go To",onClick:$,styles:h.M5,ariaLabel:"Go to URL"})]})}),(0,y.jsx)(c.Y,{text:"Close",onClick:k,styles:h.Pk,ariaLabel:"Close Details"})]})]})]}),M&&(0,y.jsx)(o.n,{messageBarType:r.H.success,isMultiline:!1,onDismiss:()=>_(null),dismissButtonAriaLabel:"Close",styles:{root:{position:"fixed",bottom:20,right:20,maxWidth:"300px",zIndex:1e3,borderRadius:"4px"}},children:M})]})}},75273:e=>{e.exports=[]},79489:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(65043),o=n(97950),r=n(10615),i=n(13706),s=n(1870),l=n(30800),d=n(70579);const c=(e,t,n)=>(0,s.Zq)({position:"fixed",top:"side"===n?e:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.4)",display:"flex",justifyContent:"side"===n?"flex-end":"center",alignItems:"side"===n?"stretch":"center",padding:"modal"===n?"20px":0,zIndex:2e3,opacity:t?0:1,transition:"opacity 0.2s ease",margin:0,marginTop:"0 !important",overflowY:"modal"===n?"auto":"hidden"}),u=(e,t,n,a)=>(0,s.Zq)({background:n?l.M.dark.background:l.M.light.background,width:"side"===a?e||"480px":e||"min(95vw, 1400px)",maxWidth:"side"===a?"90vw":"95vw",height:"side"===a?"100%":"auto",minHeight:0,maxHeight:"side"===a?"none":"calc(100vh - 40px)",boxShadow:n?"side"===a?"-4px 0 16px rgba(0, 0, 0, 0.3)":"0 10px 30px rgba(0,0,0,0.35)":"side"===a?"-4px 0 16px rgba(0, 0, 0, 0.15)":"0 10px 30px rgba(0,0,0,0.15)",borderRadius:"side"===a?0:12,display:"flex",flexDirection:"column",transform:"side"===a?t?"translateX(100%)":"translateX(0)":t?"scale(0.98) translateY(-6px)":"scale(1) translateY(0)",transition:"side"===a?"transform 0.25s ease-out":"transform 0.18s ease-out",overflow:"hidden",margin:"modal"===a?"auto":void 0}),p=e=>(0,s.Zq)({padding:"16px 20px",background:e?l.M.dark.cardBackground:l.M.light.cardBackground,borderBottom:`1px solid ${e?l.M.dark.border:l.M.light.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0}),g=e=>{let{isOpen:t,onClose:n,title:g,description:x,children:h,width:m,offsetTop:f=0,isDarkMode:y=!1,variant:b="side",icon:v}=e;const[k,S]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),[j,M]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(t){document.body.style.overflow="hidden";const e=document.documentElement;e.style.scrollbarGutter;e.style.scrollbarGutter="stable",C(!0)}else w&&!t&&_()},[t,w]),(0,a.useEffect)(()=>{if("undefined"===typeof document)return;const e=document.createElement("div");return e.setAttribute("data-bespoke-panel-portal",""),document.body.appendChild(e),M(e),()=>{try{document.body.removeChild(e)}catch(t){}}},[]);const _=()=>{k||(S(!0),setTimeout(()=>{document.body.style.overflow="";document.documentElement.style.scrollbarGutter="",S(!1),C(!1),n()},250))};if((0,a.useEffect)(()=>{const e=e=>{"Escape"===e.key&&w&&!k&&_()};return w&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[w,k]),!w)return null;const T=(0,d.jsx)("div",{className:c(f,k,b),onClick:_,role:"dialog","aria-modal":"true",children:(0,d.jsxs)("div",{className:u(m||"480px",k,y,b),onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:p(y),children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[v&&"function"===typeof v&&(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,marginTop:2},children:a.createElement(v,{style:{fontSize:20,color:y?l.M.dark.text:l.M.light.text}})}),(0,d.jsxs)("div",{style:{flex:1},children:[(0,d.jsx)(r.E,{variant:"large",styles:{root:{fontWeight:600,color:y?l.M.dark.text:l.M.light.text,marginBottom:x?"4px":"0"}},children:g}),x&&(0,d.jsx)(r.E,{variant:"medium",styles:{root:{fontWeight:400,color:y?l.M.dark.subText:l.M.light.subText,fontSize:"12px",lineHeight:"1.4",display:"block"}},children:x})]})]}),(0,d.jsx)(i.K,{iconProps:{iconName:"Cancel"},ariaLabel:"Close Panel",onClick:_,styles:{root:{color:y?l.M.dark.text:l.M.light.text,":hover":{backgroundColor:y?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"}}}})]}),(0,d.jsx)("div",{className:(0,s.Zq)({display:"flex",flexDirection:"column",padding:"16px",overflowY:"auto",minHeight:0,flexGrow:1}),children:h})]})});return j?(0,o.createPortal)(T,j):T}},92713:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(65043),o=n(29760),r=n(30800),i=n(70579);const s=e=>{let{checked:t,onChange:n,id:s,disabled:l=!1,onText:d,offText:c,size:u="md",ariaLabel:p,title:g,style:x}=e;const{isDarkMode:h}=(0,o.DP)(),m="sm"===u?18:22,f="sm"===u?36:44,y="sm"===u?14:18,b=(m-y)/2,v=(0,a.useCallback)(()=>{l||n(!t)},[l,t,n]),k=(0,a.useCallback)(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),v())},[v]),S=r.M.highlight,w=h?"rgba(255,255,255,0.22)":"rgba(0,0,0,0.22)",C=h?"0 0 0 3px rgba(255,255,255,0.25)":"0 0 0 3px rgba(0,0,0,0.15)";return(0,i.jsxs)("button",{id:s,type:"button",role:"switch","aria-checked":t,"aria-label":p,disabled:l,title:g,onClick:v,onKeyDown:k,style:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"flex-start",width:f+(d||c?"sm"===u?42:52:0),minWidth:f,height:m,padding:0,margin:0,border:"none",background:"transparent",cursor:l?"not-allowed":"pointer",fontFamily:"Raleway, sans-serif",fontSize:"sm"===u?11:12,color:h?r.M.dark.text:r.M.light.text,gap:6,...x},children:[(0,i.jsx)("span",{style:{position:"relative",width:f,height:m,background:t?S:w,borderRadius:m,transition:"background 180ms ease",boxShadow:h?"inset 0 0 0 1px rgba(255,255,255,0.08)":"inset 0 0 0 1px rgba(0,0,0,0.08)"},children:(0,i.jsx)("span",{style:{position:"absolute",top:b,left:b,width:y,height:y,background:"#fff",borderRadius:"50%",transform:`translateX(${t?f-y-2*b:0}px)`,transition:"transform 180ms cubic-bezier(.4,.2,.2,1), background 180ms",boxShadow:"0 1px 2px rgba(0,0,0,0.25), 0 0 0 1px rgba(0,0,0,0.05)"}})}),(d||c)&&(0,i.jsx)("span",{style:{userSelect:"none",fontWeight:500,minWidth:"sm"===u?32:40,textAlign:"left",opacity:l?.5:.85,transition:"color 180ms, opacity 180ms"},children:t?d:c}),(0,i.jsx)("span",{className:"toggle-focus-ring",style:{position:"absolute",inset:0,borderRadius:m,pointerEvents:"none"}}),(0,i.jsx)("style",{children:`\n        button[id='${s||""}']:focus-visible .toggle-focus-ring { box-shadow: ${C}; }\n        button[id='${s||""}']:active span > span { filter: brightness(0.95); }\n      `})]})}}}]);
//# sourceMappingURL=448.8c1ef6f0.chunk.js.map