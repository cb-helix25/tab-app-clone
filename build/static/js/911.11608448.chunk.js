"use strict";(self.webpackChunkteamhub=self.webpackChunkteamhub||[]).push([[911],{4911:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(65043),l=n(48330),s=n(94028),o=n(27533),i=n(63485),r=n(93589),c=n(42463),d=n(23830);n(28691);async function y(e){const t=await fetch("/api/callhub/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to send call event")}}var h=n(70579);const u=()=>{const[e,t]=(0,a.useState)(null),[n,u]=(0,a.useState)(null),[x,m]=(0,a.useState)("email"),[p,k]=(0,a.useState)(""),[j,g]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[C,f]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[N,T]=(0,a.useState)("+44"),[P,O]=(0,a.useState)(null),[q,A]=(0,a.useState)(null),[D,K]=(0,a.useState)(null),[E,L]=(0,a.useState)(null),[F,B]=(0,a.useState)(null),[U,H]=(0,a.useState)(!1),[W,M]=(0,a.useState)(null),[G,I]=(0,a.useState)(!1),[R,V]=(0,a.useState)(),[z,$]=(0,a.useState)(""),[J,Q]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(""),[Z,_]=(0,a.useState)(),[ee,te]=(0,a.useState)(),[ne,ae]=(0,a.useState)(),[le,se]=(0,a.useState)(),[oe,ie]=(0,a.useState)(),[re,ce]=(0,a.useState)(),[de,ye]=(0,a.useState)(),[he,ue]=(0,a.useState)(),[xe,me]=(0,a.useState)(""),[pe,ke]=(0,a.useState)("");(0,a.useEffect)(()=>{"message"===e&&"existing"===n||(O(null),A(null))},[e,n]);const je=(e,t)=>`${((t-e)/1e3/60).toFixed(1)} mins`,ge=("enquiry"===e||"email"===x)&&!p,be=!!e&&("message"!==e||!!n)&&!!x&&!!j&&!!b&&!!C&&!ge&&!U&&!F;return(0,h.jsxs)("div",{style:{padding:20},children:[(0,h.jsxs)("div",{className:"matter-opening-card",children:[(0,h.jsx)("div",{className:"step-header active",children:(0,h.jsx)("span",{className:"step-title",children:"Call Hub"})}),(0,h.jsx)("div",{className:"step-content active",children:(0,h.jsxs)(l.B,{tokens:{childrenGap:20},children:[(0,h.jsxs)("div",{className:"client-type-selection",children:[(0,h.jsx)("div",{className:"client-type-icon-btn"+("enquiry"===e?" active":""),onClick:()=>{t("enquiry"),u("new"),m("email")},children:(0,h.jsx)("span",{className:"client-type-label",children:"New Enquiry"})}),(0,h.jsx)("div",{className:"client-type-icon-btn"+("message"===e?" active":""),onClick:()=>{t("message"),u(null),m("phone")},children:(0,h.jsx)("span",{className:"client-type-label",children:"Telephone Message"})})]}),"message"===e&&(0,h.jsxs)("div",{className:"client-type-selection",children:[(0,h.jsx)("div",{className:"client-type-icon-btn"+("existing"===n?" active":""),onClick:()=>u("existing"),children:(0,h.jsx)("span",{className:"client-type-label",children:"Existing Client"})}),(0,h.jsx)("div",{className:"client-type-icon-btn"+("expert"===n?" active":""),onClick:()=>u("expert"),children:(0,h.jsx)("span",{className:"client-type-label",children:"Expert"})}),(0,h.jsx)("div",{className:"client-type-icon-btn"+("other"===n?" active":""),onClick:()=>u("other"),children:(0,h.jsx)("span",{className:"client-type-label",children:"Other"})})]}),("enquiry"===e||"message"===e&&n)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(l.B,{horizontal:!0,tokens:{childrenGap:8},children:[(0,h.jsx)(s.A,{label:"First Name",value:b,onChange:(e,t)=>v(t||"")}),(0,h.jsx)(s.A,{label:"Last Name",value:C,onChange:(e,t)=>f(t||"")})]}),(0,h.jsxs)(l.B,{tokens:{childrenGap:8},children:[(0,h.jsxs)(l.B,{horizontal:!0,tokens:{childrenGap:8},children:[(0,h.jsx)(o.m,{label:"Code",selectedKey:N,options:[{key:"+44",text:"+44"},{key:"+1",text:"+1"},{key:"+61",text:"+61"},{key:"+353",text:"+353"}],onChange:(e,t)=>T(null===t||void 0===t?void 0:t.key),styles:{dropdown:{width:110}}}),(0,h.jsx)(s.A,{label:"Phone Number",value:j,onChange:(e,t)=>g(t||"")}),(0,h.jsx)(i.j,{text:"Lookup Client",onClick:async()=>{A(null);try{const e=await async function(e,t){const n=await fetch(`/api/callhub/client?countryCode=${encodeURIComponent(e)}&phone=${encodeURIComponent(t)}`);if(404===n.status)return null;if(!n.ok)throw new Error("Client lookup failed");return n.json()}(N,j);e?(O(e),e.email&&k(e.email)):(O(null),A("No client found"))}catch(e){A("Lookup failed")}},disabled:!("message"===e&&"existing"===n)})]}),q&&(0,h.jsx)(r.n,{messageBarType:c.H.warning,children:q}),P&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("strong",{children:"Point of Contact:"})," ",P.name," (",P.email,")"]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("strong",{children:"Matters"}),(0,h.jsx)("ul",{children:P.matters.map(e=>(0,h.jsx)("li",{children:e},e))})]})]})]}),("enquiry"===e||"email"===x)&&(0,h.jsx)(s.A,{label:"Email",value:p,onChange:(e,t)=>k(t||""),required:"enquiry"===e||"email"===x,description:"enquiry"===e?"Decline enquiry if prospect refuses to give email address unless they genuinely do not have one.":void 0}),(0,h.jsxs)("div",{className:"client-type-selection",children:[(0,h.jsx)("div",{className:"client-type-icon-btn"+("email"===x?" active":""),onClick:()=>m("email"),children:(0,h.jsx)("span",{className:"client-type-label",children:"Email"})}),(0,h.jsx)("div",{className:"client-type-icon-btn"+("phone"===x?" active":""),onClick:()=>m("phone"),children:(0,h.jsx)("span",{className:"client-type-label",children:"Phone"})})]}),ge&&(0,h.jsx)("div",{style:{color:"red"},children:"Cannot proceed without an email address."}),(0,h.jsx)(o.m,{label:"Which best describes caller?",options:[{key:"property-owner",text:"Property Owner"},{key:"tenant",text:"Tenant"},{key:"director",text:"Director"},{key:"company-owner",text:"Company Owner"},{key:"construction-professional",text:"Construction or Property Professional"},{key:"solicitor",text:"Solicitor"},{key:"other",text:"Unsure/Other"}],selectedKey:Z,onChange:(e,t)=>_(null===t||void 0===t?void 0:t.key)}),"message"===e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.m,{label:"Who is the message from?",options:[{key:"client",text:"Client"},{key:"opponent",text:"Opponent"},{key:"court",text:"Court"},{key:"other",text:"Other"},{key:"uncertain",text:"Uncertain"}],selectedKey:ee,onChange:(e,t)=>te(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(o.m,{label:"Message for",options:[{key:"Alex Cook",text:"Alex Cook"},{key:"Bianca O'Donnell",text:"Bianca O'Donnell"},{key:"Sam Packwood",text:"Sam Packwood"}],selectedKey:R,onChange:(e,t)=>V(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(s.A,{label:"CC",value:z,onChange:(e,t)=>$(t||"")}),(0,h.jsx)(d.S,{label:"Urgent",checked:J,onChange:(e,t)=>Q(!!t)}),J&&(0,h.jsx)(s.A,{label:"Urgency Reason",value:X,onChange:(e,t)=>Y(t||"")})]}),"enquiry"===e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.m,{label:"Area of Work",options:[{key:"commercial",text:"commercial"},{key:"construction",text:"construction"},{key:"employment",text:"employment"},{key:"property",text:"property"},{key:"other",text:"other / unsure"}],selectedKey:ne,onChange:(e,t)=>ae(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(o.m,{label:"Value in Dispute",options:[{key:"lt10",text:"Less than \xa310,000"},{key:"10-50",text:"\xa310,000 to \xa350,000"},{key:"50-100",text:"\xa350,000 to \xa3100,000"},{key:"gt100",text:"Greater than \xa3100,000"},{key:"other",text:"The claim is for something other than money"},{key:"unsure",text:"unsure"}],selectedKey:le,onChange:(e,t)=>se(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(o.m,{label:"Which best describes you?",options:[{key:"property-owner",text:"Property Owner"},{key:"tenant",text:"Tenant"},{key:"director",text:"Director"},{key:"company-owner",text:"Company Owner"},{key:"construction-professional",text:"Construction or Property Professional"},{key:"solicitor",text:"Solicitor"},{key:"other",text:"Other"}],selectedKey:oe,onChange:(e,t)=>ie(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(o.m,{label:"Is the prospect a Construction Professional or a Home Owner?",options:[{key:"construction-professional",text:"Construction Professional"},{key:"home-owner",text:"Home Owner"},{key:"none",text:"None of these"}],selectedKey:re,onChange:(e,t)=>ce(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(o.m,{label:"Is the prospect a Property Professional, Landlord, or a Tenant?",options:[{key:"property-professional",text:"Property Professional"},{key:"landlord",text:"Landlord"},{key:"tenant",text:"Tenant"},{key:"none",text:"None of these"}],selectedKey:de,onChange:(e,t)=>ye(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(o.m,{label:"How did you hear about us?",options:[{key:"google",text:"google search"},{key:"following",text:"team/firm following"},{key:"referral",text:"referral"},{key:"other",text:"other"}],selectedKey:he,onChange:(e,t)=>ue(null===t||void 0===t?void 0:t.key)}),(0,h.jsx)(s.A,{label:"Search Term Used",description:"What exactly did the caller search for? (e.g., 'commercial dispute solicitor')",value:xe,onChange:(e,t)=>me(t||"")}),(0,h.jsx)(s.A,{label:"Web Page Visited",description:"If known, what page were they looking at? (e.g., helix-law.com/commercial)",value:pe,onChange:(e,t)=>ke(t||"")})]}),(0,h.jsx)(s.A,{label:"message"===e?"Telephone Message":"Notes",multiline:!0,value:w,onChange:(e,t)=>S(t||"")})]}),"enquiry"===e&&(0,h.jsxs)("div",{children:[(0,h.jsx)("strong",{children:"Contact Options"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Email \u2013 ~1hr response"}),(0,h.jsx)("li",{children:"WhatsApp \u2013 ~1hr response"}),(0,h.jsx)("li",{children:"Calendly \u2013 schedule a call"}),(0,h.jsx)("li",{children:"Voicemail \u2013 we will return your call"})]})]}),(0,h.jsxs)(l.B,{horizontal:!0,tokens:{childrenGap:10},children:[(0,h.jsx)(i.j,{text:"Claim Enquiry",onClick:async()=>{const t=Date.now();K(t);try{await y({action:"claim",callKind:e,enquiryType:n,contactPreference:x,email:p,contactPhone:j,callerFirstName:b,callerLastName:C,claimTime:t})}catch(a){console.error(a)}},disabled:!!D}),(0,h.jsx)(i.j,{text:"Mark Contacted",onClick:async()=>{if(!D)return;const t=Date.now();L(t);try{await y({action:"contact",callKind:e,enquiryType:n,contactPreference:x,email:p,contactPhone:j,callerFirstName:b,callerLastName:C,claimTime:D,contactTime:t})}catch(a){console.error(a)}},disabled:!D||!!E}),(0,h.jsx)(i.j,{text:"Abandon Call",onClick:async()=>{if(!D)return;const t=Date.now();B(t);try{await y({action:"abandon",callKind:e,enquiryType:n,contactPreference:x,email:p,contactPhone:j,callerFirstName:b,callerLastName:C,claimTime:D,abandonTime:t})}catch(a){console.error(a)}},disabled:!D||!!E||!!F}),(0,h.jsx)(i.j,{text:"Save Call",onClick:async()=>{H(!0),M(null),I(!1);try{await y({action:"save",callKind:e,enquiryType:n,contactPreference:x,email:p,contactPhone:j,callerFirstName:b,callerLastName:C,notes:w,claimTime:D,contactTime:E,abandonTime:F,teamMember:R,ccTeamMember:z,urgent:J,urgentReason:X,callerCategory:Z,messageFrom:ee,areaOfWork:ne,valueInDispute:le,prospectDescription:oe,constructionOrHomeOwner:re,propertyProfessional:de,heardAboutUs:he,searchTerm:xe,webPageVisited:pe}),I(!0)}catch(t){M(t.message||"Unable to save call")}finally{H(!1)}},disabled:!be})]}),D&&(0,h.jsxs)("div",{children:["Claimed at ",new Date(D).toLocaleTimeString()]}),D&&E&&(0,h.jsxs)("div",{children:["Time to contact: ",je(D,E)]}),D&&F&&(0,h.jsxs)("div",{children:["Time to abandon: ",je(D,F)]}),F&&(0,h.jsxs)("div",{children:["Abandoned at ",new Date(F).toLocaleTimeString()]}),G&&(0,h.jsx)(r.n,{messageBarType:c.H.success,onDismiss:()=>I(!1),children:"Call saved"}),W&&(0,h.jsx)(r.n,{messageBarType:c.H.error,onDismiss:()=>M(null),children:W})]})})]}),(0,h.jsx)("style",{children:"\n          .client-type-selection {\n            display: flex;\n            gap: 8px;\n          }\n          .client-type-icon-btn {\n            flex: 1;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 14.4px 8px;\n            border: 1px solid #e0e0e0;\n            background: #f8f8f8;\n            cursor: pointer;\n            transition: all 0.2s ease;\n          }\n          .client-type-icon-btn .client-type-label {\n            pointer-events: none;\n          }\n          .client-type-icon-btn:not(.active):hover {\n            background: #e3f0fc;\n            border-color: #3690CE;\n          }\n          .client-type-icon-btn.active {\n            background: #e3f0fc;\n            border-color: #3690CE;\n            color: #3690CE;\n            font-weight: 600;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          }\n        "})]})}},28691:()=>{}}]);
//# sourceMappingURL=911.11608448.chunk.js.map